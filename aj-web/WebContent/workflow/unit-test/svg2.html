<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>SVG Test</title>
	<script src="https://lib.baomitu.com/less.js/3.0.4/less.min.js"></script>
    <script src="https://lib.baomitu.com/vue/2.6.11/vue.js"></script>
    <script src="../js/lib/raphael-2.3.js"></script>
    <script src="/ajaxjs-js/js/ajaxjs-base.js"></script>
    <script src="../js/svg-util.js"></script>
    <script src="../js/svg-serialize.js"></script>
    <script src="../js/svg-resize.js"></script>
    <script src="../js/svg-dot.js"></script>
    <script src="../js/svg-path.js"></script>
    <script src="../js/svg.js"></script>
    <script src="../js/test-data.js"></script>
    
    <style>
		.resizeDot, .dot {
			width:5px;
			height:5px;
			fill: black;
		    stroke: rgb(255, 255, 255);
		}
		
		.dot {
			cursor: move;
		}
		
		.path {
			stroke: #808080;
			fill: none;
			stroke-width: 3;
		}
		
		.arrow {
			stroke: #808080;
			fill: #808080;
			stroke-width: 2;
			radius: 4;
		}
		
		.rectBaseStyle {
			stroke:#03689A;
			stroke-width: 2;
			ry: 8;
		    rx: 8;
		}   
		 
		html, body {
			height:100%;
		}
		
		image{
			height:48px;
			width: 48px;
		}
    </style>
</head>
<body>
	<div id="canvas" style="height:100%;width:100%;"></div>
	
	<script> 
		PAPER = aj.svg.Mgr.initSVG(aj("#canvas"));
		//MyBOX = PAPER.rect().attr( {x: 50, y: 20, width: 500, height: 200, fill: "90-#fff-#F6F7FF"} );
		vueObj1 = aj.svg.createBaseComponent(PAPER, {x: 50, y: 20, width: 500, height: 200, fill: "90-#fff-#F6F7FF"});
		//vueObj1.isDrag = false;
		vueObj1.init(); 
		
		console.assert(vueObj1.id);

		vueObj2 = aj.svg.createBaseComponent(PAPER, {x: 50, y: 590, width: 300, height: 100, fill: "90-#fff-#F6F7FF"});
		vueObj2.text = "Hello World!";
		vueObj2.init();  
		setTimeout(()=>vueObj2.pos(100, 600), 1000);
		
		PATH = new aj.svg.Path(vueObj1.svg, vueObj2.svg, 'text');
		
		moveFn = () => PATH.rectResizeHandler();
		vueObj1.addUpdateHandler(moveFn);
		vueObj2.addUpdateHandler(moveFn);
		
		PATH.restore([{x:306,y:363},{x:450,y:442}]);

		vueObj3 = aj.svg.createBaseComponent(PAPER, {x: 110, y: 369, width: 48, height: 48, src: "../asset/images/start.png"}, 'img');
		vueObj3.init(); 

		PATH2 = new aj.svg.Path(vueObj3.svg, vueObj1.svg);
		moveFn2 = () => PATH2.rectResizeHandler();
		vueObj3.addUpdateHandler(moveFn2);
		vueObj1.addUpdateHandler(moveFn2);

		
/* 		var path2 = new aj.svg.Wire(vueObj1, vueObj2);
		path2.renderer();
		aj.svg.Mgr.register(path2);
		
		vueObj1.addUpdateHandler(()=>{path2.renderer()});
		vueObj2.addUpdateHandler(()=>{path2.renderer()}); */
	</script>
</body>
</html>