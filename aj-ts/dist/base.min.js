"use strict";var aj;Element.prototype.$=function(t,e){if("function"!=typeof e)return this.querySelector.apply(this,arguments);t=this.querySelectorAll(t);return t&&e&&Array.prototype.forEach.call(t,e),t},Element.prototype.up=function(t,e){if(t&&e)throw"只能任选一种参数，不能同时传";var r=this.parentNode;for(t=t&&t.toUpperCase();r;){if(t&&r.tagName==t)return r;if(e&&r.className&&~r.className.indexOf(e))return r;r=r.parentNode}return null},Function.prototype.delegate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=this,i=this.scope,s=arguments,c=arguments.length;return function(){for(var t=arguments.length,e=t<c?c:t,r=0;r<e;r++)arguments[r]&&(s[r]=arguments[r]);s.length=e;for(var r=0,o=s.length;r<o;r++){var n=s[r];n&&"function"==typeof n&&1==n.late&&(s[r]=n.apply(i||this,s))}return a.apply(i||this,s)}},Date.prototype.format=function(t){var e,r,o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+e+")").test(t)&&(r=1==RegExp.$1.length?o[e]:("00"+o[e]).substr((""+o[e]).length),t=t.replace(RegExp.$1,r));return t},HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,r){for(var o=atob(this.toDataURL(e,r).split(",")[1]),n=o.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=o.charCodeAt(i);t(new Blob([a],{type:e||"image/png"}))}}),function(p){p.apply=function(t,e,r){for(var o in e)t[o]=e[o];return r?p.apply(t,r):t},p.loadScript=function(t,e,r){var o=document.createElement("script");o.src=t,r&&(o.onload=r),e&&(o.id=e),document.getElementsByTagName("head")[0].appendChild(o)},p.parallel=function(t,r){for(var e,o=0,n=Array(t.length).fill().map(function(){return{isActive:!1,data:null}}),a=function(e){return function(t){n[e].data=t,n[e].isActive=!0,n.every(function(t){return!0===t.isActive})&&(t=n.map(function(t){return t.data}),r(t))}};e=t.shift();)e(a(o)),o++},p.throttle=function(o,n,a){var i,s;return function(){var t,e=this,r=+new Date;window.clearTimeout(i),a<=r-(s=s||r)?(o.apply(this,arguments),s=r):(t=arguments,i=window.setTimeout(function(){return o.apply(e,t)},n))}},p.SELECTED="selected",p.SELECTED_CSS="."+p.SELECTED;var t=(e.prototype.$watch=function(t,e){},e.prototype.$set=function(t,e,r){},e.prototype.$destroy=function(){},e.prototype.$emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},e.prototype.register=function(t){var e,r,o,n,a,i={props:{},methods:{}},s={},c="function"==typeof this.propsFactory?this.propsFactory():this.props;for(e in this)"constructor"!=e&&"name"!=e&&"register"!=e&&"propsFactory"!=e&&"watchFactory"!=e&&"props"!=e&&"$destroy"!=e&&"$watch"!=e&&"$set"!=e&&"$el"!=e&&"$emit"!=e&&"$options"!=e&&(r=this[e],"template"==(n=e)||"data"==n||"mixins"==n||"computed"==n||"mounted"==n||"beforeCreate"==n||"watch"==n?i[e]=r:(o=r)===String||o===Boolean||o===Number||o&&o.type?i.props[e]=r:"function"==typeof r?i.methods[e]=r:(n=e,(o=c)&&o[n]?i.props[e]=c[e]:"$"!=e[0]&&(s[e]=r)));for(a in c)a in i.props||(i.props[a]=c[a]);i.data||(i.data=function(){return JSON.parse(JSON.stringify(s))}),i.watch&&this.watchFactory&&p.apply(i.watch,this.watchFactory()),Vue.component(this.name,i)},e);function e(){this.$el=document.body,this.props={},this.$children=[]}p.VueComponent=t}(aj=aj||{});var html=String,aj;!function(aj){var xhr;!function(xhr_1){function request(t,e,r,o,n){void 0===o&&(o="GET");var a=r?json2url(r):"",r=new XMLHttpRequest;"POST"==(o=o.toUpperCase())||"PUT"==o?r.open(o,t):r.open(o,t+(a?"?"+a:"")),e.url=t,r.onreadystatechange=requestHandler.delegate(null,e,n&&n.parseContentType),r.setRequestHeader("Accept","application/json"),"POST"==o||"PUT"==o?(r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(a)):r.send(null)}function json2url(t,e){var r,o=new Array;for(r in t)o.push(r+"="+t[r]);var n=o.join("&");return e&&(n=~e.indexOf("?")?e+"&"+o:e+"?"+o),n}function requestHandler(ev,cb,parseContentType){if(4===this.readyState&&200===this.status){var responseText=this.responseText.trim(),data=null;try{if(!responseText)throw"服务端返回空的字符串!";switch(parseContentType){case"text":data=responseText;break;case"xml":data=this.responseXML;break;case"json":default:try{data=JSON.parse(responseText)}catch(e){try{data=eval("window.TEMP_VAR = "+responseText)}catch(e){throw e}}}}catch(e){window.alert("XHR 错误:"+e+"\n访问地址是: "+cb.url)}cb(data,this)}4===this.readyState&&500==this.status&&window.alert("服务端 500 错误！")}function form(t,e,r){if(void 0===e&&(e=xhr_1.defaultCallBack),void 0===r&&(r={}),t){if("string"==typeof t&&(t=document.body.$(t)),!t.action)throw"请在 form 表单中指定 action 属性。Please fill the url in ACTION attribute.";r.noFormValid||new aj.form.Validator(t),r.googleReCAPTCHA&&!document.body.$("#googleReCAPTCHA")&&aj.loadScript("https://www.recaptcha.net/recaptcha/api.js?render="+r.googleReCAPTCHA,"googleReCAPTCHA"),t.addEventListener("submit",formSubmit.delegate(null,e,r));t=t.$("button.returnBtn");t&&(t.onclick=goBack)}}function formSubmit(t,e,r){t.preventDefault();var o,n=t.target,t=(t=n.getAttribute("method"))&&t.toLowerCase();r.method=t||r.method||"post",(r.noFormValid||aj.form.Validator.onSubmit(n))&&(o=serializeForm(n,r),r&&r.beforeSubmit&&!1===r.beforeSubmit(n,o)||(r.googleReCAPTCHA?grecaptcha.ready(function(){grecaptcha.execute(r.googleReCAPTCHA,{action:"submit"}).then(function(t){o.grecaptchaToken=t,"put"==r.method?xhr_1.put(n.action,e,o):xhr_1.post(n.action,e,o)})}):"put"==r.method?xhr_1.put(n.action,e,o):xhr_1.post(n.action,e,o)))}function goBack(t){t.preventDefault(),history.back()}function serializeForm(t,r){var o={};return new FormData(t).forEach(function(t,e){r&&r.ignoreField!=e&&(o[e]=encodeURIComponent(t.toString()))}),o}xhr_1.request=request,xhr_1.json2url=json2url,xhr_1.requestHandler=requestHandler,xhr_1.get=function(t,e,r,o){return request(t,e,r,"GET",o)},xhr_1.post=function(t,e,r,o){return request(t,e,r,"POST",o)},xhr_1.put=function(t,e,r,o){return request(t,e,r,"PUT",o)},xhr_1.dele=function(t,e,r,o){return request(t,e,r,"DELETE",o)},xhr_1.defaultCallBack=function(t,e,r,o){t?(t.result&&(t=t.result),t.isOk?(r&&r(t),aj.msg.show(t.msg||"操作成功！")):(o&&o(t),aj.msg.show(t.msg||"执行失败！原因未知！"))):(o&&o(t),aj.msg.show("服务端执行错误，不是标准的消息体 ServerSide Error! "))},xhr_1.form=form}(xhr=aj.xhr||(aj.xhr={}))}(aj=aj||{});var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__makeTemplateObject=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};
//# sourceMappingURL=../sourcemap/base.min.js.map
