"use strict";var html=String,aj,aj;Element.prototype.$=function(t,e){if("function"!=typeof e)return this.querySelector.apply(this,arguments);t=this.querySelectorAll(t);return t&&e&&Array.prototype.forEach.call(t,e),t},Element.prototype.up=function(t,e){if(t&&e)throw"只能任选一种参数，不能同时传";var r=this.parentNode;for(t=t&&t.toUpperCase();r;){if(t&&r.tagName==t)return r;if(e&&r.className&&~r.className.indexOf(e))return r;r=r.parentNode}return null},Function.prototype.delegate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=this,i=this.scope,s=arguments,u=arguments.length;return function(){for(var t=arguments.length,e=t<u?u:t,r=0;r<e;r++)arguments[r]&&(s[r]=arguments[r]);s.length=e;for(var r=0,n=s.length;r<n;r++){var o=s[r];o&&"function"==typeof o&&1==o.late&&(s[r]=o.apply(i||this,s))}return a.apply(i||this,s)}},Date.prototype.format=function(t){var e,r,n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+e+")").test(t)&&(r=1==RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length),t=t.replace(RegExp.$1,r));return t},HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,r){for(var n=atob(this.toDataURL(e,r).split(",")[1]),o=n.length,a=new Uint8Array(o),i=0;i<o;i++)a[i]=n.charCodeAt(i);t(new Blob([a],{type:e||"image/png"}))}}),function(o){o.apply=function(t,e,r){for(var n in e)t[n]=e[n];return r?o.apply(t,r):t},o.loadScript=function(t,e,r){var n=document.createElement("script");n.src=t,r&&(n.onload=r),e&&(n.id=e),document.getElementsByTagName("head")[0].appendChild(n)},o.parallel=function(t,r){for(var e,n=0,o=Array(t.length).fill().map(function(){return{isActive:!1,data:null}}),a=function(e){return function(t){o[e].data=t,o[e].isActive=!0,o.every(function(t){return!0===t.isActive})&&(t=o.map(function(t){return t.data}),r(t))}};e=t.shift();)e(a(n)),n++},o.throttle=function(n,o,a){var i,s;return function(){var t,e=this,r=+new Date;window.clearTimeout(i),a<=r-(s=s||r)?(n.apply(this,arguments),s=r):(t=arguments,i=window.setTimeout(function(){return n.apply(e,t)},o))}},o.SELECTED="selected",o.SELECTED_CSS="."+o.SELECTED}(aj=aj||{}),function(aj){var xhr;!function(xhr_1){function request(t,e,r,n,o){void 0===n&&(n="GET");var a=r?json2url(r):"",r=new XMLHttpRequest;"POST"==(n=n.toUpperCase())||"PUT"==n?r.open(n,t):r.open(n,t+(a?"?"+a:"")),e.url=t,r.onreadystatechange=requestHandler.delegate(null,e,o&&o.parseContentType),r.setRequestHeader("Accept","application/json"),"POST"==n||"PUT"==n?(r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(a)):r.send(null)}function json2url(t,e){var r,n=new Array;for(r in t)n.push(r+"="+t[r]);var o=n.join("&");return e&&(o=~e.indexOf("?")?e+"&"+n:e+"?"+n),o}function requestHandler(ev,cb,parseContentType){if(4===this.readyState&&200===this.status){var responseText=this.responseText.trim(),data=null;try{if(!responseText)throw"服务端返回空的字符串!";switch(parseContentType){case"text":data=responseText;break;case"xml":data=this.responseXML;break;case"json":default:try{data=JSON.parse(responseText)}catch(e){try{data=eval("window.TEMP_VAR = "+responseText)}catch(e){throw e}}}}catch(e){window.alert("XHR 错误:"+e+"\n访问地址是: "+cb.url)}cb(data,this)}4===this.readyState&&500==this.status&&window.alert("服务端 500 错误！")}function form(t,e,r){if(void 0===e&&(e=xhr_1.defaultCallBack),void 0===r&&(r={}),t){if("string"==typeof t&&(t=document.body.$(t)),!t.action)throw"请在 form 表单中指定 action 属性。Please fill the url in ACTION attribute.";r.noFormValid||aj.form.Validator(t),r.googleReCAPTCHA&&(document.body.$("#googleReCAPTCHA")||aj.loadScript("https://www.recaptcha.net/recaptcha/api.js?render="+r.googleReCAPTCHA,"googleReCAPTCHA")),t.addEventListener("submit",formSubmit.delegate(null,e,r));t=t.$("button.returnBtn");t&&(t.onclick=goBack)}}function formSubmit(t,e,r){t.preventDefault();var n,o=t.target,t=(t=o.getAttribute("method"))&&t.toLowerCase();r.method=t||r.method||"post",(r.noFormValid||aj.form.Validator.onSubmit(o))&&(n=serializeForm(o,r),r&&r.beforeSubmit&&!1===r.beforeSubmit(o,n)||(r.googleReCAPTCHA?grecaptcha.ready(function(){grecaptcha.execute(r.googleReCAPTCHA,{action:"submit"}).then(function(t){n.grecaptchaToken=t,"put"==r.method?xhr_1.put(o.action,e,n):xhr_1.post(o.action,e,n)})}):"put"==r.method?xhr_1.put(o.action,e,n):xhr_1.post(o.action,e,n)))}function goBack(t){t.preventDefault(),history.back()}function serializeForm(t,r){var n={};return new FormData(t).forEach(function(t,e){r&&r.ignoreField!=e&&(n[e]=encodeURIComponent(t.toString()))}),n}xhr_1.request=request,xhr_1.json2url=json2url,xhr_1.requestHandler=requestHandler,xhr_1.get=function(t,e,r,n){return request(t,e,r,"GET",n)},xhr_1.post=function(t,e,r,n){return request(t,e,r,"POST",n)},xhr_1.put=function(t,e,r,n){return request(t,e,r,"PUT",n)},xhr_1.dele=function(t,e,r,n){return request(t,e,r,"DELETE",n)},xhr_1.defaultCallBack=function(t,e,r,n){t?t.isOk?(r&&r(t),aj.msg.show(t.msg||"操作成功！")):(n&&n(t),aj.msg(t.msg||"执行失败！原因未知！")):(n&&n(t),aj.msg.show("服务端执行错误，不是标准的消息体 ServerSide Error! "))},xhr_1.form=form}(xhr=aj.xhr||(aj.xhr={}))}(aj=aj||{});
//# sourceMappingURL=../sourcemap/base.min.js.map
