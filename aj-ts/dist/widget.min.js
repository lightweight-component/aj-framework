"use strict";var aj;Vue.component("aj-accordion-menu",{template:'<ul class="aj-accordion-menu" @click="onClk"><slot></slot></ul>',methods:{onClk:function(e){var t,n;this.children=this.$el.children,"A"==(t=(t=e).target).tagName&&t.getAttribute("target")&&(n=t.parentNode,null!==(t=n.parentNode)&&void 0!==t&&t.$("li",function(e){e==n?e.classList.add("selected"):e.classList.remove("selected")}));var a=e.target;if(a&&"H3"==a.tagName&&"LI"==a.parentNode.tagName){a=(a=e.target).parentNode;for(var i,o=0,s=this.children.length;o<s;o++){var r=(i=this.children[o]).querySelector("ul");i!=a||-1!=i.className.indexOf("pressed")?(i.classList.remove("pressed"),r&&(r.style.height="0px")):(r&&(r.style.height=r.scrollHeight+"px"),i.classList.add("pressed"))}}}}}),Vue.component("aj-widget-baidu-search",{template:'\n        <div class="aj-widget-baidu-search"><form method="GET" action="http://www.baidu.com/baidu" onsubmit="//return g(this);">\n            <input type="text" name="word" placeholder="请输入搜索之关键字" />\n            <input name="tn" value="bds" type="hidden" />\n            <input name="cl" value="3" type="hidden" />\n            <input name="ct" value="2097152" type="hidden" />\n            <input name="si" :value="getSiteDomainName" type="hidden" />\n            <div class="searchBtn" onclick="this.parentNode.submit();"></div>\n        </form></div>\n    ',props:["siteDomainName"],computed:{getSiteDomainName:function(){return this.siteDomainName||location.host||document.domain}}}),Vue.component("aj-expander",{template:"\n        <div class=\"aj-expander\" :style=\"'height:' + (expended ? openHeight : closeHeight) + 'px;'\">\n            <div :class=\"expended ? 'closeBtn' : 'openBtn'\" @click=\"expended = !expended;\"></div>\n            <slot></slot>\n        </div>\n    ",data:function(){return{expended:!1}},props:{openHeight:{type:Number,default:200},closeHeight:{type:Number,default:50}}}),Vue.component("aj-process-line",{template:'\n        <div class="aj-process-line">\n            <div class="process-line">\n                <div v-for="(item, index) in items" :class="{current: index == current, done: index < current}">\n                    <span>{{index + 1}}</span><p>{{item}}</p>\n                </div>\n            </div>\n        </div>    \n    ',props:{items:{type:Array,default:function(){return["Step 1","Step 2","Step 3"]}}},data:function(){return{current:0}},methods:{go:function(e){this.current=e},perv:function(){var e=this.current-1;e<0&&(e=this.items.length-1),this.go(e)},next:function(){var e=this.current+1;this.items.length==e&&(e=0),this.go(e)}}}),Vue.component("aj-tab",{template:'\n        <div :class="isVertical ? \'aj-simple-tab-vertical\' : \'aj-tab\' ">\n\t      <button v-for="tab in tabs" v-bind:key="tab.name"\n\t        v-bind:class="[\'tab-button\', { active: currentTab.name === tab.name }]"\n\t        v-on:click="currentTab = tab">{{tab.name}}\n\t      </button>\n\t      <component v-bind:is="currentTab.component" class="tab"></component>\n        </div>\n    ',props:{isVertical:Boolean},data:function(){return{tabs:[],currentTab:{}}},mounted:function(){for(var e=this.$slots.default,t=0;t<e.length;t++){var n=e[t];"textarea"===n.tag&&this.tabs.push({name:n.data.attrs["data-title"],component:{template:"<div>"+n.children[0].text+"</div>"}})}this.currentTab=this.tabs[0]}}),function(e){var t;t=e.widget||(e.widget={}),function(){(t.tab||(t.tab={})).tabable={mounted:function(){var n=this,e=this.$el.$(".aj-simple-tab-horizontal > ul");e.onclick=function(e){var t=e.target;a(t);e=Array.prototype.indexOf.call(null===(e=t.parentElement)||void 0===e?void 0:e.children,t),e=null===(t=n.$el.$(".aj-simple-tab-horizontal > div"))||void 0===t?void 0:t.children[e];a(e)},e.onclick({target:e.children[0]})}};var a=function(e){var t=e.parentNode.$(".selected");e!==t&&(t&&t.classList.remove("selected"),e.classList.add("selected"))}}()}(aj=aj||{}),Vue.component("aj-avatar",{template:'\n        <a :href="avatar" target="_blank">\n            <img :src="avatar" style="max-width:50px;max-height:60px;vertical-align: middle;" @mouseenter="mouseEnter" @mouseleave="mouseLeave" />\n        </a>\n    ',props:{avatar:{type:String,required:!0}},methods:{mouseEnter:function(){aj.img.imageEnlarger&&(aj.img.imageEnlarger.imgUrl=this.avatar)},mouseLeave:function(){aj.img.imageEnlarger&&(aj.img.imageEnlarger.imgUrl=null)}}}),function(e){var t,n;t=e.widget||(e.widget={}),(n=t.img||(t.img={})).initImageEnlarger=function(){return n.imageEnlarger=new Vue({el:document.body.appendChild(document.createElement("div")),template:'<div class="aj-image-large-view"><div><img :src="imgUrl" /></div></div>',data:{imgUrl:null},mounted:function(){var a=this;document.addEventListener("mousemove",e.throttle(function(e){var t,n;a.imgUrl&&(t=0,(n=a.$el.$("img").clientWidth)>e.pageX&&(t=n),(n=a.$el.$("div")).style.top=e.pageY+20+"px",n.style.left=e.pageX-n.clientWidth+t+"px")},50,5e3),!1)}}),n.imageEnlarger},Vue.component("aj-img-thumb",{template:'<a class="aj-img-thumb" :href="getImgUrl" v-if="imgUrl" target="_blank">\n                <img :src="getImgUrl"\n                    :onmouseenter="\'aj.widget.img.imageEnlarger.imgUrl = \\\'\' + getImgUrl + \'\\\';\'" \n                    onmouseleave="aj.widget.img.imageEnlarger.imgUrl = null;" />\n            </a>',props:{imgUrl:String},computed:{getImgUrl:function(){if(!this.imgUrl)return"";if(-1!=this.imgUrl.indexOf("http"))return this.imgUrl;if(!this.ajResources.imgPerfix)throw"未提供图片前缀地址";return this.ajResources.imgPerfix+this.imgUrl}}})}(aj=aj||{}),function(e){function r(e,t,n,a){var i=e,o=t;return(n<e||a<t)&&(n/a<e/t?(i=n,o=Math.round(n*(t/e))):(o=a,i=Math.round(a*(e/t)))),{targetWidth:i,targetHeight:o}}function o(e){var t,n=document.createElement("canvas");return n.width=e.width,n.height=e.height,null!==(t=n.getContext("2d"))&&void 0!==t&&t.drawImage(e,0,0),n}function n(e,t,n,a){void 0===n&&(n="image/jpeg"),void 0===a&&(a=.9);var i=new Image;i.onload=function(){var e=o(i);t(e.toDataURL(n,a))},i.src=e}function l(e){var t;return EXIF.getData(e,function(){t=EXIF.getTag(this,"Orientation")}),t}function d(e,t){var n=e.width,a=e.height,i=document.createElement("canvas"),o=i.getContext("2d");switch(-1<[5,6,7,8].indexOf(t)?(i.width=a,i.height=n):(i.width=n,i.height=a),t){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,a);break;case 4:o.transform(1,0,0,-1,0,a);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,a,0);break;case 7:o.transform(0,-1,-1,0,a,n);break;case 8:o.transform(0,-1,1,0,0,n);break;default:o.transform(1,0,0,1,0,0)}return o.drawImage(e,0,0),i.toDataURL("image/jpeg")}function s(e){for(var t=e.split(","),e=t[0].match(/:(.*?);/)[1],n=atob(t[1]),a=n.length,i=new Uint8Array(a);a--;)i[a]=n.charCodeAt(a);return new Blob([i],{type:e})}(e=e.img||(e.img={})).fitSize=r,e.imgObj2Canvas=o,e.imageToCanvas=n,e.imageElToBlob=function(e,t){n(e,function(e){return t(s(e))})},e.changeBlobImageQuality=function(e,n,a,i){void 0===a&&(a="image/jpeg"),void 0===i&&(i=.9);var t=new FileReader;t.onload=function(e){var e=e.target.result,t=new Image;t.onload=function(){var e=o(t);n&&n(s(e.toDataURL(a,i)))},t.src=e},t.readAsDataURL(e)},e.getPhotoOrientation=l,e.rotate=d,e.compress=function(e,n){var t=r(e.width,e.height,1e3,1500),a=t.targetWidth,i=t.targetHeight,o=l(e);6==o&&(a=t.targetHeight,i=t.targetWidth);var s=new Image;s.onload=function(){var e,t=document.createElement("canvas");t.width=a,t.height=i,null!==(e=t.getContext("2d"))&&void 0!==e&&e.drawImage(s,0,0,a,i),t.toBlob(function(e){n.$blob=e},n.$fileType||"image/jpeg")},s.src=d(e,o)}}(aj=aj||{}),Vue.component("aj-layer",{template:'<div class="aj-modal hide" @click="close"><div><slot></slot></div></div>',props:{notCloseWhenTap:Boolean,cleanAfterClose:Boolean},methods:{show:function(e){var t=this,n=Number(getComputedStyle(this.$el).zIndex);document.body.$(".aj-modal",function(e){e!=t.$el&&(e=Number(getComputedStyle(e).zIndex),n<=e&&(t.$el.style.zIndex=String(e+1)))}),this.$el.classList.remove("hide"),this.BUS&&this.BUS.$emit("aj-layer-closed",this),e&&e.afterClose&&(this.afterClose=e&&e.afterClose)},close:function(e){var t=!1;e?!e.isForceClose&&this.notCloseWhenTap||(t=aj.widget.msgbox.$options.methods.close.apply(this,arguments)):t=aj.widget.msgbox.$options.methods.close.call(this,{target:document.body.$(".aj-modal")}),t&&this.cleanAfterClose&&(this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy())}}}),function(n){var e,i;e=n.widget||(n.widget={}),i=e.modal||(e.modal={}),document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(document.createElement("div")).className="alertHolder",i.msgbox=new Vue({el:".alertHolder",template:'\n                <div class="aj-modal hide" @click="close">\n                    <div>\n                        <div v-html="showText"></div>\n                        <div class="aj-btnsHolder">\n                            <button v-show="showOk"  @click="onBtnClk" class="ok">确定</button>\n                            <button v-show="showYes" @click="onBtnClk" class="yes">{{showSave? \'保存\': \'是\'}}</button>\n                            <button v-show="showNo"  @click="onBtnClk" class="no">{{showSave? \'否\': \'否\'}}</button>\n                        </div>\n                    </div>\n                </div>\n            ',data:{showText:"",afterClose:null,showOk:!1,showYes:!1,showNo:!1,showSave:!1},methods:{show:function(e,t){return this.showText=e,this.$el.classList.remove("hide"),t&&n.apply(this,t),this},close:function(e){if(!e)return this.$el.classList.add("hide"),this.afterClose&&this.afterClose(null,this),!0;e=e.target;return!(!e||-1==e.className.indexOf("modal"))&&(this.$el.classList.add("hide"),this.afterClose&&this.afterClose(e,this),!0)},onBtnClk:function(e){switch(e.target.className){case"ok":this.onOkClk&&this.onOkClk(e,this);break;case"no":this.onNoClk&&this.onNoClk(e,this);break;case"yes":this.onYesClk&&this.onYesClk(e,this)}}}})}),n.alert=function(e,t){var n=i.msgbox.show(e,{showYes:!1,showNo:!1,showOk:!0,onOkClk:function(){n.$el.classList.add("hide"),t&&t()}})},n.showConfirm=function(e,t,n){var a=i.msgbox.show(e,{showYes:!0,showNo:!0,showOk:!1,showSave:!1,onYesClk:function(e){a.$el.classList.add("hide"),t&&t(a.$el,e)},onNoClk:function(){a.$el.classList.add("hide")}})},i.popup=function(e,t){i.msgbox.show(e,{showYes:!1,showNo:!1,showOk:!1,showSave:!1})},document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("div");e.className="aj-topMsg",e.setAttribute("v-html","showText"),document.body.appendChild(e),n.msg=new Vue({el:e,data:{showText:""},methods:{show:function(e,t){var n=this;this.showText=e;var a=this.$el;setTimeout(function(){a.classList.remove("fadeOut"),a.classList.add("fadeIn")},0),setTimeout(function(){a.classList.remove("fadeIn"),a.classList.add("fadeOut"),t&&t.afterClose&&t.afterClose(a,n)},t&&t.showTime||3e3)}}})})}(aj=aj||{}),Vue.component("aj-adjust-font-size",{template:'\n        <div class="aj-adjust-font-size">\n            <span>字体大小</span>\n            <ul @click="onClk">\n                <li><label><input type="radio" name="fontSize" /> 小</label></li>\n                <li><label><input type="radio" name="fontSize" /> 中</label></li>\n                <li><label><input type="radio" name="fontSize" /> 大</label></li>\n            </ul>\n        </div>\n    ',props:{articleTarget:{type:String,default:"article p"}},methods:{onClk:function(e){var n=this,t=e.target,e=function(t){document.body.$(n.$props.articleTarget,function(e){return e.style.fontSize=t})};"LABEL"!=t.tagName&&"input"!=t.tagName||("LABEL"!=t.tagName&&(t=t.up("label")),-1!=t.innerHTML.indexOf("大")?e("12pt"):-1!=t.innerHTML.indexOf("中")?e("10.5pt"):-1!=t.innerHTML.indexOf("小")&&e("9pt"))}}}),function(n){var e,a;function i(){var e,t;a&&window.clearInterval(a),a=window.setInterval(function(){e=document.documentElement.scrollTop||document.body.scrollTop,t=Math.floor((0-e)/8),0===e?clearInterval(a):document.documentElement.scrollTop=document.body.scrollTop=e+t},20)}e=n.widget||(n.widget={}),a=0,e.back2top=i,e.initBack2top=function(){var e=new Vue({el:document.body.appendChild(document.createElement("div")),template:'<div @click="clk" class="aj-widget-back2top" title="回到顶部"><i class="fa fa-arrow-up" aria-hidden="true"></i> </div>',methods:{clk:i}}),t=n.throttle(function(){e.$el.style.top=document.body.scrollTop+100+"px"},2e3,0);window.addEventListener("scroll",t),t()}}(aj=aj||{}),function(a){var e,t,n,i,o,s,r;function l(e,t){for(var n,a=e.childNodes,i=0,o=a.length;i<o;i++)n=a.item(i),0<"||BR|HR|TEXTAREA|".indexOf("|"+n.tagName+"|")||(n.title?n.title=t(n.title):n.alt?n.alt=t(n.alt):"INPUT"==n.tagName&&""!=n.value&&"text"!=n.type&&"hidden"!=n.type?n.value=t(n.value):3==n.nodeType?n.data=t(n.data):l(n,t))}function d(e,t,n){for(var a,i,o,s=[],r=0,l=e.length;r<l;r++)a=e.charAt(r),i=t.indexOf(a),o=n.charAt(i),s.push(-1!=i?o:a);return s.join("")}function c(e,t){var n;i?e():a.loadScript("https://framework.ajaxjs.com/src/widget/page/ChineseChars.js","",function(){i=!0,e()}),(null===(n=t.up("span"))||void 0===n?void 0:n.$(a.SELECTED_CSS)).classList.remove(a.SELECTED),t.classList.add(a.SELECTED)}function u(e){o!==t&&c(function(){l(document.body,d.delegate(null,s.简化中文,s.正体中文)),o=t,n.set(r,o+"")},e)}e=(e=(e=a.widget||(a.widget={})).page||(e.page={})).TraditionalChinese||(e.TraditionalChinese={}),t=1,i=!(n={set:function(e,t){var n=new Date;n.setDate(n.getDate()+6e5),document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()},del:function(e){document.cookie=e+"=;expires="+new Date(0).toUTCString()},get:function(e){e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=e?unescape(e[2]):""}}),s=a.widget.page.TraditionalChinese,r="ChineseType",o=function(){switch((navigator.userLanguage||navigator.language).toLowerCase()){case"zh-tw":return t;case"zh-cn":return 2;default:return 0}}(),e.toSimpleChinese=function(e){2!==o&&c(function(){l(document.body,d.delegate(null,s.正体中文,s.简化中文)),o=2,n.set(r,o+"")},e)},e.toChinese=u,e.init=function(){var e=(e=n.get(r))&&Number(e);o!=t&&e!=t||u(document.querySelector(".Chinese"))}}(aj=aj||{});
//# sourceMappingURL=../sourcemap/widget.min.js.map
