"use strict";var aj;Vue.component("aj-attachment-picture-list",{template:html(__makeTemplateObject(['\n        <table>\n            <tr>\n                <td>\n                    <div class="label">相册图：</div>\n                    <ul>\n                        <li v-for="pic in pics" style="float:left;margin-right:1%;text-align:center;">\n                            <a :href="picCtx + pic.path" target="_blank"><img :src="picCtx + pic.path" style="max-width: 100px;max-height: 100px;" /></a><br />\n                            <a href="###" @click="delPic(pic.id);">删 除</a>\n                        </li>\n                    </ul>\n                </td> \n                <td>\n                    <aj-xhr-upload ref="attachmentPictureUpload" :action="uploadUrl" :is-img-upload="true" :img-place="blankBg"></aj-xhr-upload>\n                </td>\n            </tr>\n        </table>\n    '],['\n        <table>\n            <tr>\n                <td>\n                    <div class="label">相册图：</div>\n                    <ul>\n                        <li v-for="pic in pics" style="float:left;margin-right:1%;text-align:center;">\n                            <a :href="picCtx + pic.path" target="_blank"><img :src="picCtx + pic.path" style="max-width: 100px;max-height: 100px;" /></a><br />\n                            <a href="###" @click="delPic(pic.id);">删 除</a>\n                        </li>\n                    </ul>\n                </td> \n                <td>\n                    <aj-xhr-upload ref="attachmentPictureUpload" :action="uploadUrl" :is-img-upload="true" :img-place="blankBg"></aj-xhr-upload>\n                </td>\n            </tr>\n        </table>\n    '])),props:{picCtx:String,uploadUrl:String,blankBg:String,delImgUrl:String,apiUrl:String},data:function(){return{pics:[]}},mounted:function(){this.getData(),this.$refs.attachmentPictureUpload.uploadOk_callback=this.getData},methods:{getData:function(){var e=this;aj.xhr.get(this.apiUrl,function(t){return e.pics=t.result})},delPic:function(t){var e=this;aj.showConfirm("确定删除相册图片？",function(){aj.xhr.dele(e.delImgUrl+t+"/",function(t){t.isOk&&e.getData()})})}}}),function(t){t.grid||(t.grid={}),Vue.component("aj-simple-grid",{template:html(__makeTemplateObject(['\n            <div>\n                <form action="?" method="GET" style="float:right;">\n                    <input type="hidden" name="searchField" value="content" />\n                    <input type="text" name="searchValue" placeholder="请输入搜索之关键字" class="aj-input" />\n                    <button style="margin-top: 0;" class="aj-btn">搜索</button>\n                </form>\n                <table class="aj-grid ajaxjs-borderTable">\n                    <thead>\n                        <tr>\n                            <th v-for="key in columns" @click="sortBy(key)" :class="{ active: sortKey == key }">\n                                {{ key | capitalize }}\n                                <span class="arrow" :class="sortOrders[key] > 0 ? \'asc\' : \'dsc\'"></span>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="entry in filteredData">\n                            <td v-for="key in columns" v-html="entry[key]"></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        '],['\n            <div>\n                <form action="?" method="GET" style="float:right;">\n                    <input type="hidden" name="searchField" value="content" />\n                    <input type="text" name="searchValue" placeholder="请输入搜索之关键字" class="aj-input" />\n                    <button style="margin-top: 0;" class="aj-btn">搜索</button>\n                </form>\n                <table class="aj-grid ajaxjs-borderTable">\n                    <thead>\n                        <tr>\n                            <th v-for="key in columns" @click="sortBy(key)" :class="{ active: sortKey == key }">\n                                {{ key | capitalize }}\n                                <span class="arrow" :class="sortOrders[key] > 0 ? \'asc\' : \'dsc\'"></span>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="entry in filteredData">\n                            <td v-for="key in columns" v-html="entry[key]"></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        '])),props:{data:Array,columns:Array,filterKey:String},data:function(){var e={};return this.columns.forEach(function(t){return e[t]=1}),{sortKey:"",sortOrders:e}},computed:{filteredData:function(){var i=this.sortKey,n=this.filterKey&&this.filterKey.toLowerCase(),a=this.sortOrders[i]||1,t=this.data;return n&&(t=t.filter(function(e){return Object.keys(e).some(function(t){return-1<String(e[t]).toLowerCase().indexOf(n)})})),i&&(t=t.slice().sort(function(t,e){return((t=t[i])===(e=e[i])?0:e<t?1:-1)*a})),t}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]}}})}(aj=aj||{}),function(i){var t;(t=i.list||(i.list={})).datastore={props:{apiUrl:{type:String,required:!0},hrefStr:{type:String,required:!1},isPage:{type:Boolean,default:!0},initPageSize:{type:Number,required:!1,default:9},autoLoad:{type:Boolean,default:!0},initBaseParam:{type:Object,default:function(){return{}}},pageParamNames:{type:Array,default:function(){return["start","limit"]}},onLoad:Function},data:function(){return{baseParam:this.initBaseParam,result:[],extraParam:{},realApiUrl:this.apiUrl,pageSize:this.initPageSize,total:0,totalPage:0,pageStart:0,currentPage:0}},methods:{jumpPageBySelect:function(t){t=t.target,t=t.options[t.selectedIndex].value;this.pageStart=(Number(t)-1)*this.pageSize,this.getData()},onPageSizeChange:function(t){this.pageSize=Number(t.target.value),this.count(),this.getData()},count:function(){var t=this.total/this.pageSize,e=this.total%this.pageSize;this.totalPage=parseInt(String(0==e?t:1+t)),this.currentPage=parseInt(this.pageStart/this.pageSize+1)},previousPage:function(){this.pageStart-=this.pageSize,this.currentPage=parseInt(this.pageStart/this.pageSize+1),this.getData()},nextPage:function(){this.pageStart+=this.pageSize,this.currentPage=this.pageStart/this.pageSize+1,this.getData()}}},Vue.component("aj-list",{mixins:[t.datastore],template:html(__makeTemplateObject(['\n\t\t\t<div class="aj-list">\n\t\t\t\t<slot name="header" v-if="total != 0"></slot>\n\t\t\t\t<ul v-if="showDefaultUi && (total != 0)">\n\t\t\t\t\t<li v-for="(item, index) in result">\n\t\t\t\t\t\t<slot v-bind="item">\n\t\t\t\t\t\t\t<a href="#" @click="show(item.id, index, $event)" :id="item.id">{{item.name}}</a>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="no-data" v-show="total == 0">未有任何数据</div>\n\t\t\t\t<footer v-if="isPage" class="pager">\n\t\t\t\t\t<a v-if="pageStart > 0" href="#" @click="previousPage">上一页</a>\n\t\t\t\t\t<a v-if="(pageStart > 0 ) && (pageStart + pageSize < total)"\n\t\t\t\t\t\tstyle="text-decoration: none;">&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</a>\n\t\t\t\t\t<a v-if="pageStart + pageSize < total" href="#" @click="nextPage">下一页</a>\n\t\t\t\t\t<a href="javascript:;" @click="getData"><i class="fa fa-refresh" aria-hidden="true"></i> 刷新</a>\n\t\t\t\t\t<input type="hidden" name="start" :value="pageStart" />\n\t\t\t\t\t页数：{{currentPage}}/{{totalPage}} 记录数：{{pageStart}}/{{total}}\n\t\t\t\t\t每页记录数： <input size="2" title="输入一个数字确定每页记录数" type="text" :value="pageSize" @change="onPageSizeChange" />\n\t\t\t\t\t跳转：\n\t\t\t\t\t<select @change="jumpPageBySelect">\n\t\t\t\t\t\t<option :value="n" v-for="n in totalPage">{{n}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</footer>\n\t\t\t\t<div v-show="!!autoLoadWhenReachedBottom" class="buttom"></div>\n\t\t\t</div>\n\t\t'],['\n\t\t\t<div class="aj-list">\n\t\t\t\t<slot name="header" v-if="total != 0"></slot>\n\t\t\t\t<ul v-if="showDefaultUi && (total != 0)">\n\t\t\t\t\t<li v-for="(item, index) in result">\n\t\t\t\t\t\t<slot v-bind="item">\n\t\t\t\t\t\t\t<a href="#" @click="show(item.id, index, $event)" :id="item.id">{{item.name}}</a>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="no-data" v-show="total == 0">未有任何数据</div>\n\t\t\t\t<footer v-if="isPage" class="pager">\n\t\t\t\t\t<a v-if="pageStart > 0" href="#" @click="previousPage">上一页</a>\n\t\t\t\t\t<a v-if="(pageStart > 0 ) && (pageStart + pageSize < total)"\n\t\t\t\t\t\tstyle="text-decoration: none;">&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</a>\n\t\t\t\t\t<a v-if="pageStart + pageSize < total" href="#" @click="nextPage">下一页</a>\n\t\t\t\t\t<a href="javascript:;" @click="getData"><i class="fa fa-refresh" aria-hidden="true"></i> 刷新</a>\n\t\t\t\t\t<input type="hidden" name="start" :value="pageStart" />\n\t\t\t\t\t页数：{{currentPage}}/{{totalPage}} 记录数：{{pageStart}}/{{total}}\n\t\t\t\t\t每页记录数： <input size="2" title="输入一个数字确定每页记录数" type="text" :value="pageSize" @change="onPageSizeChange" />\n\t\t\t\t\t跳转：\n\t\t\t\t\t<select @change="jumpPageBySelect">\n\t\t\t\t\t\t<option :value="n" v-for="n in totalPage">{{n}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</footer>\n\t\t\t\t<div v-show="!!autoLoadWhenReachedBottom" class="buttom"></div>\n\t\t\t</div>\n\t\t'])),props:{showDefaultUi:{type:Boolean,default:!0},isShowFooter:{type:Boolean,default:!0},autoLoadWhenReachedBottom:{type:String,default:""},isDataAppend:{type:Boolean,default:!1}},mounted:function(){this.autoLoad&&this.getData(),this.autoLoadWhenReachedBottom},methods:{foo:function(){window.alert(9)},getData:function(){var e=this;this.lastRequestParam={},i.apply(this.lastRequestParam,this.baseParam),i.apply(this.lastRequestParam,this.extraParam),function(){var t={};t[this.pageParamNames[0]]=this.pageStart,t[this.pageParamNames[1]]=this.pageSize,this.isPage&&i.apply(this.lastRequestParam,t)}.call(this),i.xhr.get(this.apiUrl,this.onLoad||function(t){t.result&&(void 0===t.total&&i.alert("JSON 缺少 total 字段"),0!=t.total&&0!=t.result.length||i.alert("没有找到任何记录"),e.result=t.result,e.isPage&&(e.total=t.total,e.count())),e.$emit("pager-result",e.result)},this.lastRequestParam)},reset:function(){this.total=this.totalPage=this.pageStart=this.currentPage=0,this.pageSize=this.initPageSize},doAjaxGet:function(t){this.isPage?(this.total=t.total,this.result=this.isDataAppend?this.result.concat(t.result):t.result,this.count()):this.result=t.result},onBaseParamChange:function(t){i.apply(this.baseParam,t),this.pageStart=0,this.getData()}},watch:{baseParam:function(){this.getData()}}})}(aj=aj||{}),Vue.component("aj-cell-renderer",{props:{html:{type:String,default:""},form:Object},render:function(t){return-1==this.html.indexOf("<aj-")?this._v(this.html):t(Vue.extend({template:this.html,props:{form:Object}}),{props:{form:this.form}})}}),Vue.component("aj-grid-select-row",{template:'<a href="#" @click="fireSelect">选择</a>',props:{type:{type:String,required:!0}},methods:{fireSelect:function(){this.BUS.$emit("on-"+this.type+"-select",this.$parent.form)}}}),Vue.component("aj-grid-open-link",{template:'<a href="#" @click="fireSelect"><i class="fa fa-external-link"></i> 详情</a>',methods:{fireSelect:function(){this.BUS.$emit("on-open-link-clk",this.$parent.form)}}}),function(i){var t;(t=(t=i.list||(i.list={})).grid||(t.grid={})).SectionModel={data:function(){return{isSelectAll:!1,selected:{},selectedTotal:0,maxRows:0}},mounted:function(){this.BUS&&this.BUS.$on("on-delete-btn-clk",this.batchDelete)},methods:{batchDelete:function(){var e=this;0<this.selectedTotal?i.showConfirm("确定批量删除记录？",function(){for(var t in e.selected)i.xhr.dele(e.apiUrl+"/"+t+"/",function(t){console.log(t)})}):i.alert("未选择记录")},selectAll:function(){var e=this;this.$el.$("table .selectCheckbox input[type=checkbox]",this.selectedTotal===this.maxRows?function(t){t.checked=!1;t=t.dataset.id;if(!t)throw"需要提供 id 在 DOM 属性中";e.$set(e.selected,Number(t),!1)}:function(t){t.checked=!0;t=t.dataset.id;if(!t)throw"需要提供 id 在 DOM 属性中";e.$set(e.selected,Number(t),!0)})}},watch:{selected:{handler:function(t){var e,i=0;for(e in this.selected)!1===this.selected[e]?delete this.selected[e]:i++;(this.selectedTotal=i)===this.maxRows?this.$el.$(".top-checkbox").checked=!0:this.$el.$(".top-checkbox").checked=!1},deep:!0}}},Vue.component("aj-grid",{mixins:[t.SectionModel],template:'<div class="aj-grid"><slot v-bind="this"></slot></div>',props:{apiUrl:{type:String,required:!0}},data:function(){return{list:[],updateApi:null,showAddNew:!1}},mounted:function(){var e=this;this.$children.forEach(function(t){switch(t.$options._componentTag){case"aj-entity-toolbar":e.$toolbar=t;break;case"aj-grid-inline-edit-row":e.$row=t;break;case"aj-list":e.$store=t}}),this.$store.$on("pager-result",function(t){console.log(t),e.list=t,e.maxRows=t.length})},methods:{onCreateClk:function(){this.showAddNew=!0},reload:function(){this.$store.getData()},onDirtySaveClk:function(){var e=this,t=function(){var e=[];return this.list.forEach(function(t){t.dirty&&e.push(t)}),e}.call(this);t.length?t.forEach(function(t){i.xhr.put(e.apiUrl+"/"+t.id+"/",function(t){t.isOk&&(e.list.forEach(function(t){t.dirty&&delete t.dirty}),i.msg.show("修改记录成功"))},t.dirty)}):i.msg.show("没有修改过的记录")}}})}(aj=aj||{}),Vue.component("aj-grid-inline-edit-row-create",{template:html(__makeTemplateObject(['\n        <tr class="aj-grid-inline-edit-row isEditMode">\n            <td><input type="checkbox" /></td>\n            <td></td>\n            <td v-for="key in columns" style="padding:0" class="cell" @dblclick="dbEdit">\n                <aj-select v-if="key != null && key.type == \'select\'" :name="key.name" :options="key.data"\n                    style="width: 200px;"></aj-select>\n                <input v-if="key != null && !key.type" type="text" size="0" :name="key" />\n            </td>\n            <td class="control">\n                <span @click="addNew"><img :src="ajResources.commonAsset + \'/icon/update.gif\'" />新增</span>\n                <span @click="$parent.showAddNew = false"><img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 撤销</span>\n            </td>\n        </tr>\n    '],['\n        <tr class="aj-grid-inline-edit-row isEditMode">\n            <td><input type="checkbox" /></td>\n            <td></td>\n            <td v-for="key in columns" style="padding:0" class="cell" @dblclick="dbEdit">\n                <aj-select v-if="key != null && key.type == \'select\'" :name="key.name" :options="key.data"\n                    style="width: 200px;"></aj-select>\n                <input v-if="key != null && !key.type" type="text" size="0" :name="key" />\n            </td>\n            <td class="control">\n                <span @click="addNew"><img :src="ajResources.commonAsset + \'/icon/update.gif\'" />新增</span>\n                <span @click="$parent.showAddNew = false"><img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 撤销</span>\n            </td>\n        </tr>\n    '])),props:{columns:{type:Array,required:!0},createApi:{type:String,required:!1,default:"."}},methods:{addNew:function(){var e=this,i={};this.$el.$("*[name]",function(t){return i[t.name]=t.value}),this.BUS.$emit("before-add-new",i),aj.xhr.post(this.createApi,function(t){t&&t.isOk?(aj.msg.show("新建实体成功"),e.$el.$("input[name]",function(t){t.value=""}),e.$parent.reload(),e.$parent.showAddNew=!1):t&&t.msg&&aj.msg.show(t.msg)},i)},dbEdit:function(t){this.isEditMode=!this.isEditMode;var e=t.target;"INPUT"!==e.tagName&&(e=e.$("input")),setTimeout(function(){return e&&e.focus()},200)}}}),function(i){var t;function e(l){return function(t){for(var e,i=this.$parent.list,n=0,a=i.length;n<a;n++)if(this.id&&String(i[n].id)==this.id){e=i[n];break}if(!e)throw"找不到匹配的实体！目标 id: "+this.id;e.dirty||(e.dirty={id:this.id}),e.dirty[l]=t}}(t=i.list||(i.list={})).grid||(t.grid={}),Vue.component("aj-grid-inline-edit-row",{template:html(__makeTemplateObject(['\n            <tr class="aj-grid-inline-edit-row" :class="{editing: isEditMode}">\n                <td v-if="showCheckboxCol" class="selectCheckbox">\n                    <input type="checkbox" @change="selectCheckboxChange" :data-id="id" />\n                </td>\n                <td v-if="showIdCol">{{id}}</td>\n                <td v-for="cellRenderer in columns" :style="styleModifly" class="cell" @dblclick="dbEdit">\n                    <aj-cell-renderer v-if="!isEditMode" :html="renderCell(data, cellRenderer)" :form="data"></aj-cell-renderer>\n                    <aj-cell-renderer v-if="isEditMode && cellRenderer && cellRenderer.editMode"\n                        :html="rendererEditMode(data, cellRenderer)" :form="data">\n                    </aj-cell-renderer>\n                    <input type="text" v-if="canEdit(cellRenderer)" size="0" v-model="data[cellRenderer]" />\n                </td>\n                <td v-if="showControl" class="control">\n                    <aj-cell-renderer v-if="controlUi" :html="controlUi" :form="data"></aj-cell-renderer>\n                    <span @click="onEditClk" class="edit"><i class="fa fa-pencil" aria-hidden="true"></i>\n                        {{!isEditMode ? "编辑" : "确定"}}</span>\n                    <span @click="dele(id)" class="delete"><i class="fa fa-times" aria-hidden="true"></i> 删除</span>\n                </td>\n            </tr>\n        '],['\n            <tr class="aj-grid-inline-edit-row" :class="{editing: isEditMode}">\n                <td v-if="showCheckboxCol" class="selectCheckbox">\n                    <input type="checkbox" @change="selectCheckboxChange" :data-id="id" />\n                </td>\n                <td v-if="showIdCol">{{id}}</td>\n                <td v-for="cellRenderer in columns" :style="styleModifly" class="cell" @dblclick="dbEdit">\n                    <aj-cell-renderer v-if="!isEditMode" :html="renderCell(data, cellRenderer)" :form="data"></aj-cell-renderer>\n                    <aj-cell-renderer v-if="isEditMode && cellRenderer && cellRenderer.editMode"\n                        :html="rendererEditMode(data, cellRenderer)" :form="data">\n                    </aj-cell-renderer>\n                    <input type="text" v-if="canEdit(cellRenderer)" size="0" v-model="data[cellRenderer]" />\n                </td>\n                <td v-if="showControl" class="control">\n                    <aj-cell-renderer v-if="controlUi" :html="controlUi" :form="data"></aj-cell-renderer>\n                    <span @click="onEditClk" class="edit"><i class="fa fa-pencil" aria-hidden="true"></i>\n                        {{!isEditMode ? "编辑" : "确定"}}</span>\n                    <span @click="dele(id)" class="delete"><i class="fa fa-times" aria-hidden="true"></i> 删除</span>\n                </td>\n            </tr>\n        '])),props:{rowData:{type:Object,required:!0},showIdCol:{type:Boolean,default:!0},columns:Array,showCheckboxCol:{type:Boolean,default:!0},showControl:{type:Boolean,default:!0},filterField:Array,enableInlineEdit:{type:Boolean,default:!1},deleApi:String,controlUi:String},data:function(){return{id:this.rowData.id,data:this.rowData,isEditMode:!1}},mounted:function(){for(var t in this.data)this.$watch("data."+t,e.call(this,t))},computed:{filterData:function(){var e=JSON.parse(JSON.stringify(this.data));return delete e.id,delete e.dirty,this.filterField&&this.filterField.length&&this.filterField.forEach(function(t){return delete e[t]}),e},styleModifly:function(){return{padding:this.isEditMode?0:""}}},methods:{canEdit:function(t){return this.isEditMode&&!function(t){if(this.filterField&&this.filterField.length)for(var e=0,i=this.filterField.length;e<i;e++)if(this.filterField[e]==t)return!0;return!1}.call(this,t)&&!t.editMode},renderCell:function(t,e){var i;return""===e?"":"string"==typeof e?(i=t[e])+"":"function"==typeof e?i=e(t):("object"==typeof e&&e.renderer&&(i=e.renderer(t)),(null===i?"":i)+"")},onEditClk:function(){this.enableInlineEdit?this.isEditMode=!this.isEditMode:this.$parent.onEditClk&&this.$parent.onEditClk(this.id)},rendererEditMode:function(t,e){return"string"==typeof e?e.toString():e.editMode&&"function"==typeof e.editRenderer?e.editRenderer(t):"NULL"},dbEdit:function(t){var e;this.enableInlineEdit&&(this.isEditMode=!this.isEditMode,this.isEditMode&&(e=t.target,setTimeout(function(){"INPUT"!==e.tagName&&(e=e.$("input")),e&&e.focus()},200)))},selectCheckboxChange:function(t){var e=t.target,t=this.$parent;e.checked?t.$set(t.selected,this.id,!0):t.$set(t.selected,this.id,!1)},dele:function(t){var e=this;i.showConfirm("确定删除记录 id:["+t+"] 吗？",function(){return i.xhr.dele(e.$parent.apiUrl+"/"+t+"/",function(t){t.isOk&&(i.msg.show("删除成功"),e.$parent.reload())})})}}})}(aj=aj||{}),Vue.component("aj-entity-toolbar",{template:html(__makeTemplateObject(['\n        <div class="toolbar"> \n            <form v-if="search" class="right">\n                <input type="text" name="keyword" placeholder="请输入关键字" size="12" />\n                <button @click="doSearch"><i class="fa fa-search" style="color:#417BB5;"></i>搜索</button>\n            </form>\n            <aj-form-between-date v-if="betweenDate" class="right"></aj-form-between-date>\n            <ul>\n                <li v-if="create" @click="$emit(\'on-create-btn-clk\')"><i class="fa fa-plus" style="color:#0a90f0;"></i> 新建</li>\n                <li v-if="save" @click="$emit(\'on-save-btn-clk\')"><i class="fa fa-floppy-o" style="color:rgb(205, 162, 4);"></i> 保存</li>\n                <li v-if="deleBtn" @click="$emit(\'on-delete-btn-clk\')"><i class="fa fa-trash-o" style="color:red;"></i> 删除</li>\n                <li v-if="excel"><i class="fa fa-file-excel-o" style="color:green;"></i> 导出</li>\n                <slot></slot>\n                \n            </ul>\n        </div>\n    '],['\n        <div class="toolbar"> \n            <form v-if="search" class="right">\n                <input type="text" name="keyword" placeholder="请输入关键字" size="12" />\n                <button @click="doSearch"><i class="fa fa-search" style="color:#417BB5;"></i>搜索</button>\n            </form>\n            <aj-form-between-date v-if="betweenDate" class="right"></aj-form-between-date>\n            <ul>\n                <li v-if="create" @click="$emit(\'on-create-btn-clk\')"><i class="fa fa-plus" style="color:#0a90f0;"></i> 新建</li>\n                <li v-if="save" @click="$emit(\'on-save-btn-clk\')"><i class="fa fa-floppy-o" style="color:rgb(205, 162, 4);"></i> 保存</li>\n                <li v-if="deleBtn" @click="$emit(\'on-delete-btn-clk\')"><i class="fa fa-trash-o" style="color:red;"></i> 删除</li>\n                <li v-if="excel"><i class="fa fa-file-excel-o" style="color:green;"></i> 导出</li>\n                <slot></slot>\n                \n            </ul>\n        </div>\n    '])),props:{betweenDate:{type:Boolean,default:!0},create:{type:Boolean,default:!0},save:{type:Boolean,default:!0},excel:{type:Boolean,default:!1},deleBtn:{type:Boolean,default:!0},search:{type:Boolean,default:!0}},methods:{doSearch:function(t){t.preventDefault(),aj.apply(this.$parent.$store.extraParam,{keyword:aj.form.utils.getFormFieldValue(this.$el,"input[name=keyword]")}),this.$parent.$store.reload()}}}),function(i){var t,n,e;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="aj-tree-like-select",t.template='<select :name="fieldName" class="aj-select" @change="onSelected" style="min-width:180px;"></select>',t.props={fieldName:{type:String,required:!1,default:"catalogId"},apiUrl:{type:String,default:function(){return i.ctx+"/admin/tree-like/"}},isAutoLoad:{type:Boolean,default:!0},isAutoJump:Boolean,initFieldValue:String},t.apiUrl="",t.isAutoJump=!1,t.isAutoLoad=!1,t.fieldName="",t.fieldValue="",t.initFieldValue="",t}t=i.list||(i.list={}),n=t.tree||(t.tree={}),e=i.VueComponent,__extends(a,e),a.prototype.data=function(){return{fieldValue:this.initFieldValue}},a.prototype.mounted=function(){this.isAutoLoad&&this.getData()},a.prototype.onSelected=function(t){var e=t.target;this.fieldValue=e.selectedOptions[0].value,this.isAutoJump?location.assign("?"+this.fieldName+"="+this.fieldValue):this.BUS&&this.BUS.$emit("aj-tree-catelog-select-change",t,this)},a.prototype.getData=function(){var e=this;i.xhr.get(this.apiUrl,function(t){n.rendererOption([{id:0,name:"请选择分类"}].concat(t.result),e.$el,e.fieldValue,{makeAllOption:!1}),e.fieldValue&&i.form.utils.selectOption.call(e,e.fieldValue)})},t=a,(new(n.TreeLikeSelect=t)).register()}(aj=aj||{}),function(t){!function(t){function r(t,e){for(var i=0,n=t.length;i<n;i++){var a=t[i];if(a.id==e)return a;if(a.children){a=r(a.children,e);if(null!=a)return a}}return null}function o(t,e){for(var i in t){if(i==e)return t[i];var n=t[i].children;if(n)for(var a=0,l=n.length;a<l;a++){var r=o(n[a],e);if(null!=r)return r}}return null}t.makeTree=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var a,l=t[i];-1===l.pid?e.push(l):(a=r(e,l.pid))?(a.children||(a.children=[]),a.children.push(l)):console.log("parent not found!")}return e},t.findParentInArray=r,t.findParentInMap=o;var s=[];function d(t,e){for(var i in s.push(t),t){t[i].level=s.length,e(t[i],i);var n=t[i].children;if(n)for(var a=0,l=n.length;a<l;a++)d(n[a],e)}s.pop()}function l(t){if(!t)return{};for(var e={},i=0,n=t.length;i<n;i++){var a,l=t[i],r=o(e,l.pid+"");null==r?e[l.id]=l:((a={})[l.id]=l,r.children||(r.children=[]),r.children.push(a))}return e}t.output=d,t.toTree=l,t.rendererOption=function(t,e,n,i){i&&i.makeAllOption&&((i=document.createElement("option")).value=i.innerHTML="全部分类",e.appendChild(i));var a=document.createDocumentFragment();d(l(t),function(t,e){var i=document.createElement("option");i.value=e,n&&n==e&&(i.selected=!0),i.dataset.pid=t.pid+"",i.innerHTML=new Array(5*t.level).join("&nbsp;")+(1==t.level?"":"└─")+t.name,a.appendChild(i)}),e.appendChild(a)}}((t=t.list||(t.list={})).tree||(t.tree={}))}(aj=aj||{}),function(t){var e,i,n;function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="aj-tree-item",t.template=html(__makeTemplateObject(['\n            <li>\n                <div :class="{bold: isFolder, node: true}" @click="toggle">\n                    <span>········</span>{{model.name}}\n                    <span v-if="isFolder">[{{open ? \'-\' : \'+\'}}]</span>\n                </div>\n                <ul v-show="open" v-if="isFolder" :class="{show: open}">\n                    <aj-tree-item class="item" v-for="(model, index) in model.children" :key="index" :model="model">\n                    </aj-tree-item>\n                    <li v-if="allowAddNode" class="add" @click="addChild">+</li>\n                </ul>\n            </li>\n        '],['\n            <li>\n                <div :class="{bold: isFolder, node: true}" @click="toggle">\n                    <span>········</span>{{model.name}}\n                    <span v-if="isFolder">[{{open ? \'-\' : \'+\'}}]</span>\n                </div>\n                <ul v-show="open" v-if="isFolder" :class="{show: open}">\n                    <aj-tree-item class="item" v-for="(model, index) in model.children" :key="index" :model="model">\n                    </aj-tree-item>\n                    <li v-if="allowAddNode" class="add" @click="addChild">+</li>\n                </ul>\n            </li>\n        '])),t.props={model:Object,allowAddNode:{type:Boolean,default:!1}},t.model={children:[]},t.open=!1,t.allowAddNode=!1,t.computed={isFolder:function(){return!(!this.model.children||!this.model.children.length)}},t}e=t.list||(t.list={}),i=e.tree||(e.tree={}),n=t.VueComponent,__extends(a,n),a.prototype.toggle=function(){this.isFolder&&(this.open=!this.open),this.BUS&&this.BUS.$emit("tree-node-click",this.model)},a.prototype.changeType=function(){this.isFolder||(Vue.set(this.model,"children",[]),this.addChild(),this.open=!0)},a.prototype.addChild=function(){this.model.children.push({name:"new stuff"})},e=a,(new(i.TreeItem=e)).register()}(aj=aj||{}),function(t){var e,i,n;function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="aj-tree",t.template='<ul class="aj-tree"><aj-tree-item :model="treeData"></aj-tree-item></ul>',t.props={apiUrl:String,topNodeName:String},t.topNodeName="",t.apiUrl="",t.isAutoLoad=!1,t.treeData={name:t.topNodeName||"TOP",children:null},t}e=t.list||(t.list={}),i=e.tree||(e.tree={}),n=t.VueComponent,__extends(a,n),a.prototype.getData=function(){var e=this;t.xhr.get(this.apiUrl,function(t){return e.treeData.children=i.makeTree(t.result)}),this.BUS&&this.BUS.$on("treenodeclick",function(t){return e.$emit("treenodeclick",t)})},a.prototype.mounted=function(){this.getData()},e=a,(new(i.Tree=e)).register()}(aj=aj||{});
//# sourceMappingURL=../sourcemap/list.min.js.map
