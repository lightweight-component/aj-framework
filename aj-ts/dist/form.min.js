"use strict";var aj;Vue.component("aj-form-between-date",{template:html(__makeTemplateObject(['\n        <form action="." method="GET" class="dateRange" @submit="valid">\n            <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="起始时间" field-name="startDate" ></aj-form-calendar-input>\n            - <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="截至时间" field-name="endDate"></aj-form-calendar-input>\n            <button class="aj-btn">按时间筛选</button>\n        </form>    \n    '],['\n        <form action="." method="GET" class="dateRange" @submit="valid">\n            <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="起始时间" field-name="startDate" ></aj-form-calendar-input>\n            - <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="截至时间" field-name="endDate"></aj-form-calendar-input>\n            <button class="aj-btn">按时间筛选</button>\n        </form>    \n    '])),props:{isAjax:{type:Boolean,default:!0}},methods:{valid:function(t){var e,i=this.$el.$("input[name=startDate]").value,n=this.$el.$("input[name=endDate]").value;return i&&n?new Date(i)>new Date(n)?(aj.alert("起始日期不能晚于结束日期"),void t.preventDefault()):void(this.isAjax&&(t.preventDefault(),e=this.$parent.$parent,aj.apply(e.$refs.pager.extraParam,{startDate:i,endDate:n}),e.reload())):(aj.alert("输入数据不能为空"),void t.preventDefault())}}}),Vue.component("aj-form-calendar-input",{template:html(__makeTemplateObject(['\n        <div class="aj-form-calendar-input" :class="{\'show-time\': showTime}" @mouseover="onMouseOver">\n            <div class="icon fa fa-calendar"></div>\n            <input :placeholder="placeholder" size="12" :name="fieldName" :value="date + (dateOnly ? \'\' : \' \' + time)"\n                type="text" autocomplete="off" />\n            <aj-form-calendar ref="calendar" :show-time="showTime" @pick-date="recEvent" @pick-time="recTimeEvent">\n            </aj-form-calendar>\n        </div>\n    '],['\n        <div class="aj-form-calendar-input" :class="{\'show-time\': showTime}" @mouseover="onMouseOver">\n            <div class="icon fa fa-calendar"></div>\n            <input :placeholder="placeholder" size="12" :name="fieldName" :value="date + (dateOnly ? \'\' : \' \' + time)"\n                type="text" autocomplete="off" />\n            <aj-form-calendar ref="calendar" :show-time="showTime" @pick-date="recEvent" @pick-time="recTimeEvent">\n            </aj-form-calendar>\n        </div>\n    '])),data:function(){return{date:this.fieldValue,time:""}},props:{fieldName:{type:String,required:!0},fieldValue:{type:String,required:!1,default:""},dateOnly:{type:Boolean,required:!1,default:!0},showTime:!1,positionFixed:Boolean,placeholder:{type:String,default:"请输入日期"}},watch:{fieldValue:function(t){this.date=t}},mounted:function(){var t;this.positionFixed&&this.$el.$(".aj-form-calendar").classList.add("positionFixed"),this.fieldValue&&((t=this.fieldValue.split(" ")[0]).split("-"),this.$refs.calendar.date=new Date(t[0],t[1]-1,t[2]," ",""," "))},methods:{recTimeEvent:function(t){this.time=t},recEvent:function(t){this.date=t.trim()},onMouseOver:function(t){var e,i;this.positionFixed&&(i=(e=t.currentTarget).getBoundingClientRect(),(t=this.$el.$(".aj-form-calendar")).style.top=+(i.top+e.clientHeight)+"px",t.style.left=+i.left+0+"px")}}}),function(t){var e,i;function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="aj-form-calendar",t.template=html(__makeTemplateObject(['\n        <div class="aj-form-calendar">\n            <div class="selectYearMonth">\n                <a href="###" @click="getDate(\'preYear\')" class="preYear" title="上一年">&lt;</a>\n                <select @change="setMonth" v-model="month">\n                    <option value="1">一月</option>\n                    <option value="2">二月</option>\n                    <option value="3">三月</option>\n                    <option value="4">四月</option>\n                    <option value="5">五月</option>\n                    <option value="6">六月</option>\n                    <option value="7">七月</option>\n                    <option value="8">八月</option>\n                    <option value="9">九月</option>\n                    <option value="10">十月</option>\n                    <option value="11">十一月</option>\n                    <option value="12">十二月</option>\n                </select>\n                <a href="###" @click="getDate(\'nextYear\')" class="nextYear" title="下一年">&gt;</a>\n            </div>\n            <div class="showCurrentYearMonth">\n                <span class="showYear">{{year}}</span>/<span class="showMonth">{{month}}</span>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <td>日</td>\n                        <td>一</td>\n                        <td>二</td>\n                        <td>三</td>\n                        <td>四</td>\n                        <td>五</td>\n                        <td>六</td>\n                    </tr>\n                </thead>\n                <tbody @click="pickDay"></tbody>\n            </table>\n            <div v-if="showTime" class="showTime">\n                时 <select class="hour aj-select">\n                    <option v-for="n in 24">{{n}}</option>\n                </select>\n                分 <select class="minute aj-select">\n                    <option v-for="n in 61">{{n - 1}}</option>\n                </select>\n                <a href="#" @click="pickupTime">选择时间</a>\n            </div>\n        </div>'],['\n        <div class="aj-form-calendar">\n            <div class="selectYearMonth">\n                <a href="###" @click="getDate(\'preYear\')" class="preYear" title="上一年">&lt;</a>\n                <select @change="setMonth" v-model="month">\n                    <option value="1">一月</option>\n                    <option value="2">二月</option>\n                    <option value="3">三月</option>\n                    <option value="4">四月</option>\n                    <option value="5">五月</option>\n                    <option value="6">六月</option>\n                    <option value="7">七月</option>\n                    <option value="8">八月</option>\n                    <option value="9">九月</option>\n                    <option value="10">十月</option>\n                    <option value="11">十一月</option>\n                    <option value="12">十二月</option>\n                </select>\n                <a href="###" @click="getDate(\'nextYear\')" class="nextYear" title="下一年">&gt;</a>\n            </div>\n            <div class="showCurrentYearMonth">\n                <span class="showYear">{{year}}</span>/<span class="showMonth">{{month}}</span>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <td>日</td>\n                        <td>一</td>\n                        <td>二</td>\n                        <td>三</td>\n                        <td>四</td>\n                        <td>五</td>\n                        <td>六</td>\n                    </tr>\n                </thead>\n                <tbody @click="pickDay"></tbody>\n            </table>\n            <div v-if="showTime" class="showTime">\n                时 <select class="hour aj-select">\n                    <option v-for="n in 24">{{n}}</option>\n                </select>\n                分 <select class="minute aj-select">\n                    <option v-for="n in 61">{{n - 1}}</option>\n                </select>\n                <a href="#" @click="pickupTime">选择时间</a>\n            </div>\n        </div>'])),t.watch={date:function(){this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.render()}},t.showTime=Boolean,t.date=new Date,t.year=(new Date).getFullYear(),t.month=(new Date).getMonth()+1,t.day=1,t}e=t.form||(t.form={}),i=t.VueComponent,__extends(n,i),n.prototype.data=function(){var t=new Date;return{date:t,year:t.getFullYear(),month:t.getMonth()+1,day:1}},n.prototype.mounted=function(){this.$options.watch.date.call(this)},n.prototype.render=function(){for(var t=this.getDateArr(),e=document.createDocumentFragment();t.length;){for(var i=document.createElement("tr"),n=1;n<=7;n++){var a,o,l=document.createElement("td");!t.length||(a=t.shift())&&(o=this.year+"-"+this.month+"-"+a,l.title=o,l.className="day day_"+o,l.innerHTML=a+"",o=new Date(this.year,this.month-1,a),a=o,o=this.date,a.getFullYear()==o.getFullYear()&&a.getMonth()==o.getMonth()&&a.getDate()==o.getDate()&&l.classList.add("onToday")),i.appendChild(l)}e.appendChild(i)}var r=this.$el.$("table tbody");r.innerHTML="",r.appendChild(e)},n.prototype.getDate=function(t,e){var i=this.date.getFullYear(),n=this.date.getMonth()+1;switch(t){case"preMonth":this.date=new Date(i,n-2,1);break;case"nextMonth":this.date=new Date(i,n,1);break;case"setMonth":this.date=new Date(i,e-1,1);break;case"preYear":this.date=new Date(i-1,n-1,1);break;case"nextYear":this.date=new Date(i+1,n-1,1)}},n.prototype.setMonth=function(t){t=t.target;this.getDate("setMonth",Number(t.selectedOptions[0].value))},n.prototype.getDateArr=function(){for(var t=[],e=1,i=new Date(this.year,this.month-1,1).getDay();e<=i;e++)t.push(0);for(var e=1,n=new Date(this.year,this.month,0).getDate();e<=n;e++)t.push(e);return t},n.prototype.pickDay=function(t){t=t.target.title;return this.$emit("pick-date",t),t},n.prototype.pickupTime=function(t){var e=this.$el.$(".hour"),i=this.$el.$(".minute"),i=e.selectedOptions[0].value+":"+i.selectedOptions[0].value;this.$emit("pick-time",i)},t=n,(new(e.Calendar=t)).register()}(aj=aj||{}),function(t){var e,i;function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="aj-china-area",t.template=html(__makeTemplateObject(['\n\t\t\t<div class="aj-china-area">\n\t\t\t\t<span>省</span>\n\t\t\t\t<select v-model="province" class="aj-select" style="width:120px;" :name="provinceName || \'locationProvince\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in addressData[86]" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>市 </span>\n\t\t\t\t<select v-model="city" class="aj-select" style="width:120px;" :name="cityName || \'locationCity\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in citys" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>区</span>\n\t\t\t\t<select v-model="district" class="aj-select" style="width:120px;" :name="districtName || \'locationDistrict\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in districts" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t'],['\n\t\t\t<div class="aj-china-area">\n\t\t\t\t<span>省</span>\n\t\t\t\t<select v-model="province" class="aj-select" style="width:120px;" :name="provinceName || \'locationProvince\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in addressData[86]" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>市 </span>\n\t\t\t\t<select v-model="city" class="aj-select" style="width:120px;" :name="cityName || \'locationCity\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in citys" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>区</span>\n\t\t\t\t<select v-model="district" class="aj-select" style="width:120px;" :name="districtName || \'locationDistrict\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in districts" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t'])),t.provinceCode=String,t.cityCode=String,t.districtCode=String,t.provinceName=String,t.cityName=String,t.districtName=String,t.computed={citys:function(){return this.province?this.addressData[this.province]:{}},districts:function(){return this.city?this.addressData[this.city]:{}}},t}e=t.form||(t.form={}),i=t.VueComponent,__extends(n,i),n.prototype.data=function(){return{province:this.provinceCode||"",city:this.cityCode||"",district:this.districtCode||"",addressData:window.China_AREA}},n.prototype.mounted=function(){if(!window.China_AREA)throw"中国行政区域数据 脚本没导入"},t=n,(new(e.ChinaArea=t)).register()}(aj=aj||{}),function(n){var i;i=n.form||(n.form={}),Vue.component("aj-edit-form",{template:html(__makeTemplateObject(['\n            <form class="aj-table-form" :action="getInfoApi + (isCreate ? \'\' : info.id + \'/\')" :method="isCreate ? \'POST\' : \'PUT\'">\n                <h3>{{isCreate ? "新建" : "编辑" }}{{uiName}}</h3>\n                \x3c!-- 传送 id 参数 --\x3e\n                <input v-if="!isCreate" type="hidden" name="id" :value="info.id" />\n                <slot v-bind:info="info"></slot>\n                <div class="aj-btnsHolder">\n                    <button><img :src="ajResources.commonAsset + \'/icon/save.gif\'" /> {{isCreate ? "新建":"保存"}}</button>\n                    <button onclick="this.up(\'form\').reset();return false;">复 位</button>\n                    <button v-if="!isCreate" v-on:click.prevent="del()">\n                        <img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 删 除\n                    </button>\n                    <button @click.prevent="close">关闭</button>\n                </div>\n            </form>\n        '],['\n            <form class="aj-table-form" :action="getInfoApi + (isCreate ? \'\' : info.id + \'/\')" :method="isCreate ? \'POST\' : \'PUT\'">\n                <h3>{{isCreate ? "新建" : "编辑" }}{{uiName}}</h3>\n                \x3c!-- 传送 id 参数 --\x3e\n                <input v-if="!isCreate" type="hidden" name="id" :value="info.id" />\n                <slot v-bind:info="info"></slot>\n                <div class="aj-btnsHolder">\n                    <button><img :src="ajResources.commonAsset + \'/icon/save.gif\'" /> {{isCreate ? "新建":"保存"}}</button>\n                    <button onclick="this.up(\\\'form\\\').reset();return false;">复 位</button>\n                    <button v-if="!isCreate" v-on:click.prevent="del()">\n                        <img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 删 除\n                    </button>\n                    <button @click.prevent="close">关闭</button>\n                </div>\n            </form>\n        '])),props:{isCreate:Boolean,uiName:String,apiUrl:{type:String,required:!0}},data:function(){return{id:0,info:{}}},mounted:function(){var i=this;n.xhr.form(this.$el,function(t){var e;t&&(t.isOk?(e=(i.isCreate?"新建":"保存")+i.uiName+"成功",n.msg.show(e),i.$parent.close()):n.msg.show(t.msg))})},methods:{load:function(t,e){var i=this;this.id=t,n.xhr.get(this.apiUrl+t+"/",function(t){i.info=t.result,e&&e(t)})},close:function(){"aj-layer"===this.$parent.$options._componentTag?this.$parent.close():history.back()},del:function(){var t=i.utils.getFormFieldValue(this.$el,"input[name=id]"),e=i.utils.getFormFieldValue(this.$el,"input[name=name]");n.showConfirm("请确定删除记录：\n"+e+"？",function(){return n.xhr.dele("../"+t+"/",function(t){t.isOk?n.msg.show("删除成功！"):n.alert("删除失败！")})})}}})}(aj=aj||{}),function(o){var t,e,i,n;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.fieldName="",t.fieldValue="",t.radomId=0,t.action="",t.accpectFileType="",t.limitFileType="",t.fileSize=0,t.fileName="",t.$fileObj=null,t.$blob=null,t.buttonBottom=!1,t.limitSize=0,t.progress=0,t.errMsg="init",t.errStatus=[!1,!1],t.newlyId="",t.$uploadOk_callback=function(t){t.isOk&&(this.fieldValue=t.imgUrl),o.xhr.defaultCallBack(t)},t}function l(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="aj-file-uploader",t.template=html(__makeTemplateObject(['\n            <div class="aj-file-uploader">\n                <input type="hidden" :name="fieldName" :value="fieldValue" />\n                <input type="file" :id="\'uploadInput_\' + radomId" @change="onUploadInputChange" :accept="accpectFileType" />\n            \n                <label class="pseudoFilePicker" :for="\'uploadInput_\' + radomId">\n                    <div @drop="onDrop" ondragover="event.preventDefault();">\n                        <div>+</div>点击选择文件<br />或拖放到此\n                    </div>\n                </label>\n            \n                <div class="msg" v-if="errMsg != \'\'">\n                    允许类型：{{limitFileType || \'无限制\'}}\n                    <br />\n                    允许大小：{{limitSize ? changeByte(limitSize * 1024) : \'无限制\'}}\n                    <span class="slot"></span>\n                </div>\n                <div class="msg" v-if="errMsg == \'\'">\n                    {{fileName}}<div v-if="fileSize">{{changeByte(fileSize)}}</div>\n                    <button @click.prevent="doUpload">{{progress && progress !== 100 ? \'上传中 \' + progress + \'%\': \'上传\'}}</button>\n                </div>\n            </div>\n        '],['\n            <div class="aj-file-uploader">\n                <input type="hidden" :name="fieldName" :value="fieldValue" />\n                <input type="file" :id="\'uploadInput_\' + radomId" @change="onUploadInputChange" :accept="accpectFileType" />\n            \n                <label class="pseudoFilePicker" :for="\'uploadInput_\' + radomId">\n                    <div @drop="onDrop" ondragover="event.preventDefault();">\n                        <div>+</div>点击选择文件<br />或拖放到此\n                    </div>\n                </label>\n            \n                <div class="msg" v-if="errMsg != \'\'">\n                    允许类型：{{limitFileType || \'无限制\'}}\n                    <br />\n                    允许大小：{{limitSize ? changeByte(limitSize * 1024) : \'无限制\'}}\n                    <span class="slot"></span>\n                </div>\n                <div class="msg" v-if="errMsg == \'\'">\n                    {{fileName}}<div v-if="fileSize">{{changeByte(fileSize)}}</div>\n                    <button @click.prevent="doUpload">{{progress && progress !== 100 ? \'上传中 \' + progress + \'%\': \'上传\'}}</button>\n                </div>\n            </div>\n        '])),t.props={action:{type:String,required:!0},fieldName:String,limitSize:{type:Number,default:2e4},limitFileType:String,accpectFileType:String,buttonBottom:Boolean,radomId:{type:Number,default:function(){return Math.round(1e3*Math.random())}}},t.watch={fileName:function(t){var e;this.limitFileType?t&&this.limitFileType&&(e=t.split(".").pop(),new RegExp(this.limitFileType,"i").test(e)?Vue.set(this.errStatus,0,!0):(e="上传文件为 "+t+"，<br />抱歉，不支持上传 *."+e+" 类型文件",Vue.set(this.errStatus,0,e))):Vue.set(this.errStatus,0,!0)},fileSize:function(t){this.limitSize&&this.limitSize&&t>1024*this.limitSize?(t="要上传的文件容量过大("+this.changeByte(t)+")，请压缩到 "+this.changeByte(1024*this.limitSize)+" 以下",Vue.set(this.errStatus,1,t)):Vue.set(this.errStatus,1,!0)},errStatus:function(t){var e=t.length;if(e){for(var i="",n=0;n<e;n++){var a=t[n];if(!1===a)return;a&&"string"==typeof a&&(i+=a+"；<br/>")}i?(o.alert(i),this.errMsg=i):(this.errMsg="",this.errStatus=[!1,!1])}}},t}t=o.xhr_upload||(o.xhr_upload={}),e=o.VueComponent,__extends(a,e),n=i=a,__extends(l,n),l.prototype.onUploadInputChange=function(t){t=t.target;t.files&&t.files[0]&&this.onFileGet(t.files)},l.prototype.onDrop=function(t){var e;t.preventDefault(),null!==(e=t.dataTransfer)&&void 0!==e&&e.files&&this.onFileGet(t.dataTransfer.files)},l.prototype.onFileGet=function(t){t=t[0],t.type;this.$fileObj=t,this.fileName=t.name,this.fileSize=t.size},l.prototype.changeByte=function(t){var e="",t=(e=t<102.4?t.toFixed(2)+"B":t<104857.6?(t/1024).toFixed(2)+"KB":t<107374182.4?(t/1048576).toFixed(2)+"MB":(t/1073741824).toFixed(2)+"GB").indexOf(".");return"00"==e.substr(t+1,2)?e.substring(0,t)+e.substr(t+3,2):e},l.prototype.doUpload=function(){var i=this,t=new FormData;this.$blob?t.append("file",this.$blob,this.fileName):this.$fileObj&&t.append("file",this.$fileObj);var e=new XMLHttpRequest;e.onreadystatechange=e.requestHandler.delegate(null,this.uploadOk_callback,"json"),e.open("POST",this.action,!0),e.onprogress=function(t){var e=0,t=~~(1e3*t.loaded/t.total);e!==(t/=10)&&(e=t),i.progress=e},e.send(t)},i=l,t.FileUploader=i,t.fileUploader=new i,t.fileUploader.register()}(aj=aj||{}),function(r){var t,e,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="aj-form-html-editor",t.template=html(__makeTemplateObject(['\n            <div class="aj-form-html-editor">\n                <ul class="toolbar" @click="onToolBarClk">\n                    <li class="dorpdown">\n                        <i title="字体" class="fa-font"></i>\n                        <div class="fontfamilyChoser" @click="onFontfamilyChoserClk">\n                            <a style="font-family: \'宋体\'">宋体</a>\n                            <a style="font-family: \'黑体\'">黑体</a>\n                            <a style="font-family: \'楷体\'">楷体</a>\n                            <a style="font-family: \'隶书\'">隶书</a>\n                            <a style="font-family: \'幼圆\'">幼圆</a>\n                            <a style="font-family: \'Microsoft YaHei\'">Microsoft YaHei</a>\n                            <a style="font-family: Arial">Arial</a>\n                            <a style="font-family: \'Arial Narrow\'">Arial Narrow</a>\n                            <a style="font-family: \'Arial Black\'">Arial Black</a>\n                            <a style="font-family: \'Comic Sans MS\'">Comic Sans MS</a>\n                            <a style="font-family: Courier">Courier</a>\n                            <a style="font-family: System">System</a>\n                            <a style="font-family: \'Times New Roman\'">Times New Roman</a>\n                            <a style="font-family: Verdana">Verdana</a>\n                        </div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="字号" class="fa-header"></i>\n                        <div class="fontsizeChoser" @click="onFontsizeChoserClk">\n                            <a style="font-size: xx-small; ">极小</a>\n                            <a style="font-size: x-small;  ">特小</a>\n                            <a style="font-size: small;    ">小</a>\n                            <a style="font-size: medium;   ">中</a>\n                            <a style="font-size: large;    ">大</a>\n                            <a style="font-size: x-large;  ">特大</a>\n                            <a style="font-size: xx-large; line-height: 140%">极大</a>\n                        </div>\n                    </li>\n                    <li><i title="加粗" class="bold fa-bold"></i></li>\n                    <li><i title="斜体" class="italic fa-italic"></i></li>\n                    <li><i title="下划线" class="underline fa-underline"></i></li>\n                    <li><i title="左对齐" class="justifyleft fa-align-left"></i></li>\n                    <li><i title="中间对齐" class="justifycenter fa-align-center"></i></li>\n                    <li><i title="右对齐" class="justifyright fa-align-right"></i></li>\n                    <li><i title="数字编号" class="insertorderedlist fa-list-ol"></i></li>\n                    <li><i title="项目编号" class="insertunorderedlist fa-list-ul"></i></li>\n                    <li><i title="增加缩进" class="outdent fa-outdent"></i></li>\n                    <li><i title="减少缩进" class="indent fa-indent"></i></li>\n                    <li class="dorpdown">\n                        <i title="字体颜色" class="fa-paint-brush"></i>\n                        <div class="fontColor colorPicker" v-html="createColorPickerHTML()" @click="onFontColorPicker"></div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="背景颜色" class="fa-pencil"></i>\n                        <div class="bgColor colorPicker" v-html="createColorPickerHTML()" @click="onFontBgColorPicker"></div>\n                    </li>\n                    <li><i title="增加链接" class="createLink fa-link"></i></li>\n                    <li><i title="增加图片" class="insertImage fa-file-image-o"></i></li>\n                    <li><i title="一键存图" class="saveRemoteImage2Local fa-hdd-o"></i></li>\n                    <li><i title="清理 HTML" class="cleanHTML fa-eraser"></i></li>\n                    <li><i title="切换到代码" class="switchMode fa-code"></i></li>\n                </ul>\n            \n                <div class="editorBody">\n                    <iframe srcdoc="<html><body></body></html>"></iframe>\n                    <slot></slot>\n                </div>\n                <aj-form-popup-upload ref="uploadLayer" :upload-url="uploadImageActionUrl"></aj-form-popup-upload>\n            </div>\n        '],['\n            <div class="aj-form-html-editor">\n                <ul class="toolbar" @click="onToolBarClk">\n                    <li class="dorpdown">\n                        <i title="字体" class="fa-font"></i>\n                        <div class="fontfamilyChoser" @click="onFontfamilyChoserClk">\n                            <a style="font-family: \'宋体\'">宋体</a>\n                            <a style="font-family: \'黑体\'">黑体</a>\n                            <a style="font-family: \'楷体\'">楷体</a>\n                            <a style="font-family: \'隶书\'">隶书</a>\n                            <a style="font-family: \'幼圆\'">幼圆</a>\n                            <a style="font-family: \'Microsoft YaHei\'">Microsoft YaHei</a>\n                            <a style="font-family: Arial">Arial</a>\n                            <a style="font-family: \'Arial Narrow\'">Arial Narrow</a>\n                            <a style="font-family: \'Arial Black\'">Arial Black</a>\n                            <a style="font-family: \'Comic Sans MS\'">Comic Sans MS</a>\n                            <a style="font-family: Courier">Courier</a>\n                            <a style="font-family: System">System</a>\n                            <a style="font-family: \'Times New Roman\'">Times New Roman</a>\n                            <a style="font-family: Verdana">Verdana</a>\n                        </div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="字号" class="fa-header"></i>\n                        <div class="fontsizeChoser" @click="onFontsizeChoserClk">\n                            <a style="font-size: xx-small; ">极小</a>\n                            <a style="font-size: x-small;  ">特小</a>\n                            <a style="font-size: small;    ">小</a>\n                            <a style="font-size: medium;   ">中</a>\n                            <a style="font-size: large;    ">大</a>\n                            <a style="font-size: x-large;  ">特大</a>\n                            <a style="font-size: xx-large; line-height: 140%">极大</a>\n                        </div>\n                    </li>\n                    <li><i title="加粗" class="bold fa-bold"></i></li>\n                    <li><i title="斜体" class="italic fa-italic"></i></li>\n                    <li><i title="下划线" class="underline fa-underline"></i></li>\n                    <li><i title="左对齐" class="justifyleft fa-align-left"></i></li>\n                    <li><i title="中间对齐" class="justifycenter fa-align-center"></i></li>\n                    <li><i title="右对齐" class="justifyright fa-align-right"></i></li>\n                    <li><i title="数字编号" class="insertorderedlist fa-list-ol"></i></li>\n                    <li><i title="项目编号" class="insertunorderedlist fa-list-ul"></i></li>\n                    <li><i title="增加缩进" class="outdent fa-outdent"></i></li>\n                    <li><i title="减少缩进" class="indent fa-indent"></i></li>\n                    <li class="dorpdown">\n                        <i title="字体颜色" class="fa-paint-brush"></i>\n                        <div class="fontColor colorPicker" v-html="createColorPickerHTML()" @click="onFontColorPicker"></div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="背景颜色" class="fa-pencil"></i>\n                        <div class="bgColor colorPicker" v-html="createColorPickerHTML()" @click="onFontBgColorPicker"></div>\n                    </li>\n                    <li><i title="增加链接" class="createLink fa-link"></i></li>\n                    <li><i title="增加图片" class="insertImage fa-file-image-o"></i></li>\n                    <li><i title="一键存图" class="saveRemoteImage2Local fa-hdd-o"></i></li>\n                    <li><i title="清理 HTML" class="cleanHTML fa-eraser"></i></li>\n                    <li><i title="切换到代码" class="switchMode fa-code"></i></li>\n                </ul>\n            \n                <div class="editorBody">\n                    <iframe srcdoc="<html><body></body></html>"></iframe>\n                    <slot></slot>\n                </div>\n                <aj-form-popup-upload ref="uploadLayer" :upload-url="uploadImageActionUrl"></aj-form-popup-upload>\n            </div>\n        '])),t.props={fieldName:{type:String,required:!0},uploadImageActionUrl:String},t.fieldName="",t.fieldValue="",t.uploadImageActionUrl="",t.toolbarEl=document.body,t.iframeEl=document.body,t.iframeDoc=document,t.sourceEditor=document.body,t.mode="iframe",t}function a(e){this.toolbarEl.$("i",function(t){-1==t.className.indexOf("switchMode")&&(t.style.color=e?"lightgray":"")})}t=r.form||(r.form={}),e=r.VueComponent,__extends(n,e),n.prototype.mounted=function(){var i=this,t=this.$el;this.mode="iframe",this.toolbarEl=t.$(".toolbar"),this.iframeEl=t.$("iframe"),this.iframeEl.contentWindow.onload=function(t){var e=i.iframeEl.contentWindow.document;e.designMode="on",e.addEventListener("paste",function(t){var e=this;if(!this.uploadImageActionUrl)return void r.alert("未提供图片上传地址");var i=t.clipboardData&&t.clipboardData.items,n=null;if(i&&i.length)for(var a=0;a<i.length;a++){var o=i[a];if(-1!==o.type.indexOf("image")){if(window.isCreate)return void r.alert("请保存记录后再上传图片。");n=o.getAsFile();break}}n&&(t.preventDefault(),r.img.changeBlobImageQuality(n,function(t){Vue.options.components["aj-xhr-upload"].extendOptions.methods.doUpload.call({action:e.uploadImageActionUrl,progress:0,uploadOk_callback:function(t){t.isOk&&this.format("insertImage",this.ajResources.imgPerfix+t.imgUrl)},$blob:t,$fileName:"foo.jpg"})}))}.bind(i)),i.iframeDoc=e,new MutationObserver(function(t,e){"iframe"===i.mode&&(i.sourceEditor.value=i.iframeDoc.body.innerHTML)}).observe(e.body,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),i.sourceEditor.value&&i.setIframeBody(i.sourceEditor.value)},this.sourceEditor=t.$("textarea"),this.sourceEditor.classList.add("hide"),this.sourceEditor.name=this.fieldName,this.sourceEditor.oninput=function(t){"textarea"===i.mode&&i.setIframeBody(i.sourceEditor.value)},this.uploadImgMgr=this.$refs.uploadLayer},n.prototype.setIframeBody=function(t){this.iframeDoc.body.innerHTML=t},n.prototype.getValue=function(t,e){var i=this.iframeDoc.body.innerHTML;return t&&(i=i.replace(/<(\/)*(\\?xml:|meta|link|span|font|del|ins|st1:|[ovwxp]:)((.|\s)*?)>/gi,"").replace(/(class|style|type|start)=("(.*?)"|(\w*))/gi,"").replace(/<style(.*?)style>/gi,"").replace(/<script(.*?)script>/gi,"").replace(/<!--(.*?)-->/gi,"")),e&&(i=encodeURIComponent(i)),i},n.prototype.setMode=function(){"iframe"==this.mode?(this.iframeEl.classList.add("hide"),this.sourceEditor.classList.remove("hide"),this.mode="textarea",a.call(this,!0)):(this.iframeEl.classList.remove("hide"),this.sourceEditor.classList.add("hide"),this.mode="iframe",a.call(this,!1))},n.prototype.onToolBarClk=function(t){var e=this,i=t.target.className.split(" ").shift();switch(i){case"createLink":var n=prompt("请输入 URL 地址");n&&this.format("createLink",n);break;case"insertImage":window.isCreate?r.alert("请保存记录后再上传图片。"):this.uploadImgMgr.show(function(t){t&&t.isOk&&e.format("insertImage",t.fullUrl)});break;case"switchMode":this.setMode();break;case"cleanHTML":this.setIframeBody(HtmlSanitizer.SanitizeHtml(this.iframeDoc.body.innerHTML));break;case"saveRemoteImage2Local":(function(){for(var t=this.iframeDoc.querySelectorAll("img"),a=new Array,e=[],i=0,n=t.length;i<n;i++){var o=t[i],l=o.getAttribute("src");/^http/.test(l)&&(a.push(o),e.push(l))}e.length?r.xhr.post("../downAllPics/",function(t){for(var e=t.pics,i=0,n=e.length;i<n;i++)a[i].src="images/"+e[i];r.alert("所有图片下载完成。")},{pics:e.join("|")}):r.alert("未发现有远程图片")}).call(this);break;default:this.format(i)}},n.prototype.format=function(t,e){e?this.iframeDoc.execCommand(t,!1,e):this.iframeDoc.execCommand(t,!1),this.iframeEl.contentWindow.focus()},n.prototype.onFontsizeChoserClk=function(t){for(var e=t.target,i=t.currentTarget.children,n=0,a=i.length;n<a&&e!=i[n];n++);this.format("fontsize",n+"")},n.prototype.onFontColorPicker=function(t){this.format("foreColor",t.target.title)},n.prototype.onFontBgColorPicker=function(t){this.format("backColor",t.target.title)},n.prototype.onFontfamilyChoserClk=function(t){t=t.target;this.format("fontname",t.innerHTML);var e=t.parentNode;e.style.display="none",setTimeout(function(){return e.style.display=""},300)},n.prototype.createColorPickerHTML=function(){for(var t,e,i,n=["00","33","66","99","CC","FF"],a=['<div class="colorhead"><span class="colortitle">颜色选择</span></div><div class="colorbody"><table cellspaci="0" cellpadding="0"><tr>'],o=0;o<6;++o){a.push('<td><table class="colorpanel" cellspacing="0" cellpadding="0">');for(var l=0,r=n[o];l<6;++l){a.push("<tr>");for(var s=0,c=n[l];s<6;++s)e=5==s&&2!=o&&5!=o?";border-right:none;":"",i=5==l&&o<3?";border-bottom:none":"",t="#"+r+n[s]+c,a.push('<td unselectable="on" style="background-color: '+t+e+i+'" title="'+t+'"></td>');a.push("</tr>")}a.push("</table></td>"),"66"==n[o]&&a.push("</tr><tr>")}return a.push("</tr></table></div>"),a.join("")},i=n,(new(t.HtmlEditor=i)).register()}(aj=aj||{}),function(a){var e,i,o,t;function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="aj-img-uploder",t.template='<div class="aj-img-uploader">\n                <img :src="imgBase64Str" />'+e.fileUploader.template+"\n            </div>",t.imgBase64Str="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALMAAAB2CAYAAACDMaL0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5RkM5NjQxRDQxQUNFNDExOTcwMkU4MjNEOTc3MDU5RiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4QTc3NDNFQkFDNDIxMUU0QTEzMkQyOUQzOTFFQkMzRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4QTc3NDNFQUFDNDIxMUU0QTEzMkQyOUQzOTFFQkMzRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUZDOTY0MUQ0MUFDRTQxMTk3MDJFODIzRDk3NzA1OUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUZDOTY0MUQ0MUFDRTQxMTk3MDJFODIzRDk3NzA1OUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz77Tka5AAADFElEQVR42uzd0W3aUBiAUVNFlTqBO4VRn/scT1FvQaaAKWCK0hX6FKZghb44Rr2uLGqCL+AY7HMkqyitSHC+XP5riDoryzIZs91ulzAJ5SfngJGYiZnREDNiBjGDmEHMiBnEDGIGMYOYETOIGcQMYkbMIGYQM4gZxIyYQcwgZhAzYgYxg5hBzPDP0wQeYzmR7+Wf6vhdHd+tzDy6z9Xxzco8HZvq2I/sMaXVUYTbX8Q8DasQ8+vIHlcWfkAXNoDTsR9hyMlIH5OYETPjeNYRs1OAmEHM0I8np+BuHK4Xz8PtrdNhZX5UeXUsq+NndfwIt3Onxcr8iCvyIeD6Vbyi8XErtJX54Vbl4sTfFU6PlTlWFv58HfBzt4Xs+rGYo9XheGlYzA9tEebTe2RlNjNHbb6yls3XR/qV/H0337GNDaCYY1flonH7eYCvYRtW4GbQqzDyGHuMGZ3n5PTE1YWPXhFfGnP7vhE0Yu50BeG5Zayogxri6X0jR2PGpaty8c4cfYtX3/LEb3+IuecrA3mH0K+ZnbPG/J0mXvgwZvQ8XpxbMesIY5766xU9O7r/1UBzuJhHbB05huxDoF2u9ebv/JAsGlct+n7WMWbQatFxREg7rvbGDTEPqstmMO0Q8iKMH5lTKuYhV+dzm8E84r68R1nMgyvOrMwx+gg69S0Sc9cV9dSIEBvmMtzPreOzARRzVNBt4WZJ/Asjyws3g0YUMd/UrYJKIzeD9fXrwiZSzLewPArpmqgOq/k84t9n4fOvQ9hWaTHfdDM4D4H1vdLnJ36o7vmXCgbhN03iV+f67ZrXhrQO93WwPTOSLFu+jnrjZ/MXzMpy3P9Lwm63u/cH+JL8/+b841k55hlgZsxgyNW+nqOzDqsyxoy71nwT1NcwdvRxPVrMfPhMnlwwXojZKbjbsQMzM2IGMYOYQcwgZsQMYgYxg5gRMzy+0b+fGTGDmEHMIGYQM2IGMYOYQcyIGcQMYgYxg5gRM4gZxAxiRswgZhAziBnEjJhBzCBmEDNiBjGDmEHMIGbEDGIGMYOYmaY3AQYAXojZOq5J9RcAAAAASUVORK5CYII=",t.imgMaxWidth=0,t.imgMaxHeight=0,t}e=a.xhr_upload||(a.xhr_upload={}),o={jpeg:"/9j/4",gif:"R0lGOD",png:"iVBORw"},i=e.FileUploader,__extends(n,i),n.prototype.propsFactory=function(){var t=a.apply({imgMaxWidth:{type:Number,default:1920},imgMaxHeight:{type:Number,default:1680}},this.props);return t.accpectFileType={type:String,default:"image/*"},t.limitFileType={type:String,default:"jpg|png|gif|jpeg"},t},n.prototype.beforeCreate=function(){this.$options.template=this.$options.template.replace('<span class="slot"></span>',"<br />最大尺寸：{{imgMaxWidth}}x{{imgMaxHeight}}")},n.prototype.mounted=function(){var t=this,e=this.$el.$("img");e.onload=function(){(e.width>t.imgMaxWidth||e.height>t.imgMaxHeight)&&(t.errMsg="图片大小尺寸不符合要求哦，请裁剪图片重新上传吧~")}},n.prototype.watchFactory=function(){return{imgBase64Str:function(t){var e,i,n=!1;for(e in o)if(~t.indexOf(o[e])){n=!0;break}n?Vue.set(this.errStatus,2,""):(i="亲，改了扩展名我还能认得你不是图片哦",Vue.set(this.errStatus,2,i),a.alert(i))},errMsg:function(t){t||this.readBase64()}}},n.prototype.readBase64=function(){var e=this,t=new FileReader;t.onload=function(t){t=t.target;e.imgBase64Str=t.result},this.$fileObj&&t.readAsDataURL(this.$fileObj)},t=n,(new(e.ImgFileUploader=t)).register()}(aj=aj||{}),Vue.component("aj-form-popup-upload",{template:html(__makeTemplateObject(['\n        <aj-layer>\n            <h3>图片上传</h3>\n            <p>上传成功后自动插入到正文</p>\n            <aj-img-uploder ref="uploadControl" :action="uploadUrl"></aj-img-uploder>\n        </aj-layer>\n    '],['\n        <aj-layer>\n            <h3>图片上传</h3>\n            <p>上传成功后自动插入到正文</p>\n            <aj-img-uploder ref="uploadControl" :action="uploadUrl"></aj-img-uploder>\n        </aj-layer>\n    '])),data:function(){return{text:{}}},props:{uploadUrl:{type:String,required:!0},imgName:{type:String,required:!1},imgId:{type:Number,required:!1},imgPlace:String},mounted:function(){var t=this.$refs.uploadControl;this.text={maxSize:t.limitSize||600,maxHeight:t.imgMaxHeight,maxWidth:t.imgMaxWidth}},methods:{show:function(t){t&&(this.$refs.uploadControl.uploadOk_callback=t),this.$children[0].show()}}}),Vue.component("aj-form-select",{template:html(__makeTemplateObject(['\n        <select :name="name" class="aj-form-select">\n            <template v-for="value, key, index in options">\n                <option v-if="index === selectedIndex" selected :value="value" >{{key}}</option>\n                <option v-else :value="value" >{{key}}</option>\n            </template>\n        </select>\n    '],['\n        <select :name="name" class="aj-form-select">\n            <template v-for="value, key, index in options">\n                <option v-if="index === selectedIndex" selected :value="value" >{{key}}</option>\n                <option v-else :value="value" >{{key}}</option>\n            </template>\n        </select>\n    '])),props:{name:{type:String,required:!0},options:{type:Object,required:!0},selectedIndex:{type:Number}}}),function(t){(t=(t=t.form||(t.form={})).utils||(t.utils={})).getFormFieldValue=function(t,e){if(t=t.$(e))return t.value;throw"找不到"+e+"元素"},t.selectOption=function(e){this.$el.$("option",function(t){console.log(t.value),t.value==e&&(t.selected=!0)})}}(aj=aj||{}),function(t){!function(t){"validity"in document.createElement("input")||window.alert("不支持 HTML5 表单验证");var e=(n.prototype.checkEveryField=function(){var i=this;document.addEventListener("blur",function(t){var e=t.target;"A"==e.tagName||n.isIgnoreEl(e)||((t=n.check(e))?(i.errorElements.push(t),i.showError(t)):i.removeError(e))},!0)},n.prototype.showError=function(t){var e,i,n=t.el,a=n.id||n.name;a&&(t.el.classList.add("error"),(i=t.el.form.$(".error-message#error-for-"+a))||((i=document.createElement("div")).className="error-message",i.id="error-for-"+a,null!==(e=n.parentNode)&&void 0!==e&&e.insertBefore(i,n.nextSibling)),n.setAttribute("aria-describedby","error-for-"+a),i.innerHTML=t.msg,i.classList.remove("hide"))},n.prototype.removeError=function(t){var e=t.id||t.name;e&&(t.classList.remove("error"),t.removeAttribute("aria-describedby"),(e=t.form.$(".error-message#error-for-"+e))&&(e.innerHTML="",e.classList.add("hide")))},n.isIgnoreEl=function(t){return t.disabled||"file"===t.type||"reset"===t.type||"submit"===t.type||"button"===t.type},n.check=function(t){var e=t.validity;if(!e)throw"浏览器不支持 HTML5 表单验证";if(e.valid)return null;var i={el:t,msg:"无效输入"};return e.valueMissing&&(i.msg="该项是必填项"),e.typeMismatch&&("email"===t.type?i.msg="请输入有效的邮件地址":"url"===t.type?i.msg="请输入一个有效的网址":i.msg="请输入正确的类型"),e.tooShort&&(i.msg="请输入至少"+t.getAttribute("minLength")+"个字符。当前你输入了"+t.value.length+"个字符。"),e.tooLong&&(i.msg="你只能输入最多"+t.getAttribute("maxLength")+"个字符。当前你输入了"+t.value.length+"个字符。"),e.badInput&&(i.msg="请输入数字"),e.stepMismatch&&(i.msg="请选择一个有效值"),e.rangeOverflow&&(i.msg="请选择小于 "+t.getAttribute("max")+" 的值"),e.rangeUnderflow&&(i.msg="请选择大于 "+t.getAttribute("min")+" 的值"),e.patternMismatch&&(i.msg=t.getAttribute("title")||"格式要求不正确"),i},n.onSubmit=function(t){for(var e=t.elements,i=null,n=0,a=e.length;n<a;n++){var o=e[n];this.check(o)&&(i=i||o)}return!i||(i.focus(),!1)},n);function n(t){this.errorElements=[],t.setAttribute("novalidate","true"),this.checkEveryField()}t.Validator=e}(t.form||(t.form={}))}(aj=aj||{});
//# sourceMappingURL=../sourcemap/form.min.js.map
