"use strict";var aj;Element.prototype.$=function(t,e){if("function"!=typeof e)return this.querySelector.apply(this,arguments);t=this.querySelectorAll(t);return t&&e&&Array.prototype.forEach.call(t,e),t},Element.prototype.up=function(t,e){if(t&&e)throw"只能任选一种参数，不能同时传";var r=this.parentNode;for(t=t&&t.toUpperCase();r;){if(t&&r.tagName==t)return r;if(e&&r.className&&~r.className.indexOf(e))return r;r=r.parentNode}return null},Function.prototype.delegate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=this,i=this.scope,s=arguments,u=arguments.length;return function(){for(var t=arguments.length,e=t<u?u:t,r=0;r<e;r++)arguments[r]&&(s[r]=arguments[r]);s.length=e;for(var r=0,o=s.length;r<o;r++){var n=s[r];n&&"function"==typeof n&&1==n.late&&(s[r]=n.apply(i||this,s))}return a.apply(i||this,s)}},Date.prototype.format=function(t){var e,r,o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+e+")").test(t)&&(r=1==RegExp.$1.length?o[e]:("00"+o[e]).substr((""+o[e]).length),t=t.replace(RegExp.$1,r));return t},HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,r){for(var o=atob(this.toDataURL(e,r).split(",")[1]),n=o.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=o.charCodeAt(i);t(new Blob([a],{type:e||"image/png"}))}}),function(u){u.apply=function(t,e,r){for(var o in e)t[o]=e[o];return r?u.apply(t,r):t},u.loadScript=function(t,e,r){var o=document.createElement("script");o.src=t,r&&(o.onload=r),e&&(o.id=e),document.getElementsByTagName("head")[0].appendChild(o)},u.parallel=function(t,r){for(var e,o=0,n=Array(t.length).fill().map(function(){return{isActive:!1,data:null}}),a=function(e){return function(t){n[e].data=t,n[e].isActive=!0,n.every(function(t){return!0===t.isActive})&&(t=n.map(function(t){return t.data}),r(t))}};e=t.shift();)e(a(o)),o++},u.throttle=function(o,n,a){var i,s;return function(){var t,e=this,r=+new Date;window.clearTimeout(i),a<=r-(s=s||r)?(o.apply(this,arguments),s=r):(t=arguments,i=window.setTimeout(function(){return o.apply(e,t)},n))}},u.SELECTED="selected",u.SELECTED_CSS="."+u.SELECTED;var t=(e.prototype.$destroy=function(){},e.prototype.$emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},e.prototype.register=function(t){var e,r,o,n,a={props:{},methods:{}},i={},s="function"==typeof this.propsFactory?this.propsFactory():this.props;for(e in this)"constructor"!=e&&"name"!=e&&"register"!=e&&"propsFactory"!=e&&"watchFactory"!=e&&"props"!=e&&"$destroy"!=e&&"$el"!=e&&"$emit"!=e&&"$options"!=e&&(r=this[e],"template"==(n=e)||"data"==n||"mixins"==n||"computed"==n||"mounted"==n||"beforeCreate"==n||"watch"==n?a[e]=r:(o=r)===String||o===Boolean||o===Number||o&&o.type?a.props[e]=r:"function"==typeof r?a.methods[e]=r:(n=e,(o=s)&&o[n]?a.props[e]=s[e]:"$"!=e[0]&&(i[e]=r)));"aj-img-uploder"==this.name&&console.log(a.props),a.data||(a.data=function(){return JSON.parse(JSON.stringify(i))}),a.watch&&this.watchFactory&&u.apply(a.watch,this.watchFactory()),Vue.component(this.name,a)},e);function e(){this.$el=document.body,this.props={}}u.VueComponent=t}(aj=aj||{});var html=String,aj;!function(aj){var xhr;!function(xhr_1){function request(t,e,r,o,n){void 0===o&&(o="GET");var a=r?json2url(r):"",r=new XMLHttpRequest;"POST"==(o=o.toUpperCase())||"PUT"==o?r.open(o,t):r.open(o,t+(a?"?"+a:"")),e.url=t,r.onreadystatechange=requestHandler.delegate(null,e,n&&n.parseContentType),r.setRequestHeader("Accept","application/json"),"POST"==o||"PUT"==o?(r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(a)):r.send(null)}function json2url(t,e){var r,o=new Array;for(r in t)o.push(r+"="+t[r]);var n=o.join("&");return e&&(n=~e.indexOf("?")?e+"&"+o:e+"?"+o),n}function requestHandler(ev,cb,parseContentType){if(4===this.readyState&&200===this.status){var responseText=this.responseText.trim(),data=null;try{if(!responseText)throw"服务端返回空的字符串!";switch(parseContentType){case"text":data=responseText;break;case"xml":data=this.responseXML;break;case"json":default:try{data=JSON.parse(responseText)}catch(e){try{data=eval("window.TEMP_VAR = "+responseText)}catch(e){throw e}}}}catch(e){window.alert("XHR 错误:"+e+"\n访问地址是: "+cb.url)}cb(data,this)}4===this.readyState&&500==this.status&&window.alert("服务端 500 错误！")}function form(t,e,r){if(void 0===e&&(e=xhr_1.defaultCallBack),void 0===r&&(r={}),t){if("string"==typeof t&&(t=document.body.$(t)),!t.action)throw"请在 form 表单中指定 action 属性。Please fill the url in ACTION attribute.";r.noFormValid||new aj.form.Validator(t),r.googleReCAPTCHA&&!document.body.$("#googleReCAPTCHA")&&aj.loadScript("https://www.recaptcha.net/recaptcha/api.js?render="+r.googleReCAPTCHA,"googleReCAPTCHA"),t.addEventListener("submit",formSubmit.delegate(null,e,r));t=t.$("button.returnBtn");t&&(t.onclick=goBack)}}function formSubmit(t,e,r){t.preventDefault();var o,n=t.target,t=(t=n.getAttribute("method"))&&t.toLowerCase();r.method=t||r.method||"post",(r.noFormValid||aj.form.Validator.onSubmit(n))&&(o=serializeForm(n,r),r&&r.beforeSubmit&&!1===r.beforeSubmit(n,o)||(r.googleReCAPTCHA?grecaptcha.ready(function(){grecaptcha.execute(r.googleReCAPTCHA,{action:"submit"}).then(function(t){o.grecaptchaToken=t,"put"==r.method?xhr_1.put(n.action,e,o):xhr_1.post(n.action,e,o)})}):"put"==r.method?xhr_1.put(n.action,e,o):xhr_1.post(n.action,e,o)))}function goBack(t){t.preventDefault(),history.back()}function serializeForm(t,r){var o={};return new FormData(t).forEach(function(t,e){r&&r.ignoreField!=e&&(o[e]=encodeURIComponent(t.toString()))}),o}xhr_1.request=request,xhr_1.json2url=json2url,xhr_1.requestHandler=requestHandler,xhr_1.get=function(t,e,r,o){return request(t,e,r,"GET",o)},xhr_1.post=function(t,e,r,o){return request(t,e,r,"POST",o)},xhr_1.put=function(t,e,r,o){return request(t,e,r,"PUT",o)},xhr_1.dele=function(t,e,r,o){return request(t,e,r,"DELETE",o)},xhr_1.defaultCallBack=function(t,e,r,o){t?(t.result&&(t=t.result),t.isOk?(r&&r(t),aj.msg.show(t.msg||"操作成功！")):(o&&o(t),aj.msg.show(t.msg||"执行失败！原因未知！"))):(o&&o(t),aj.msg.show("服务端执行错误，不是标准的消息体 ServerSide Error! "))},xhr_1.form=form}(xhr=aj.xhr||(aj.xhr={}))}(aj=aj||{});var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__makeTemplateObject=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};
//# sourceMappingURL=../sourcemap/base.min.js.map

"use strict";var aj;!function(e){var t,n;function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.name="aj-accordion-menu",e.template='<ul class="aj-accordion-menu" @click="onClk"><slot></slot></ul>',e}t=e.widget||(e.widget={}),n=e.VueComponent,__extends(a,n),a.prototype.onClk=function(e){var t,n,a=this.$el.children;"A"==(t=(t=e).target).tagName&&t.getAttribute("target")&&(n=t.parentNode,null!==(t=n.parentNode)&&void 0!==t&&t.$("li",function(e){e==n?e.classList.add("selected"):e.classList.remove("selected")}));var i=e.target;if(i&&"H3"==i.tagName&&"LI"==i.parentNode.tagName){i=i.parentNode;for(var o=void 0,s=0,l=a.length;s<l;s++){var r=(o=a[s]).querySelector("ul");o!=i||-1!=o.className.indexOf("pressed")?(o.classList.remove("pressed"),r&&(r.style.height="0px")):(r&&(r.style.height=r.scrollHeight+"px"),o.classList.add("pressed"))}}},e=a,(new(t.AccordionMenu=e)).register()}(aj=aj||{}),function(e){var t,n;function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.name="aj-widget-baidu-search",e.template=html(__makeTemplateObject(['\n            <div class="aj-widget-baidu-search">\n                <form method="GET" action="http://www.baidu.com/baidu" onsubmit="//return g(this);">\n                    <input type="text" name="word" placeholder="请输入搜索之关键字" />\n                    <input name="tn" value="bds" type="hidden" />\n                    <input name="cl" value="3" type="hidden" />\n                    <input name="ct" value="2097152" type="hidden" />\n                    <input name="si" :value="getSiteDomainName" type="hidden" />\n                    <div class="searchBtn" onclick="this.parentNode.submit();"></div>\n                </form>\n            </div>\n        '],['\n            <div class="aj-widget-baidu-search">\n                <form method="GET" action="http://www.baidu.com/baidu" onsubmit="//return g(this);">\n                    <input type="text" name="word" placeholder="请输入搜索之关键字" />\n                    <input name="tn" value="bds" type="hidden" />\n                    <input name="cl" value="3" type="hidden" />\n                    <input name="ct" value="2097152" type="hidden" />\n                    <input name="si" :value="getSiteDomainName" type="hidden" />\n                    <div class="searchBtn" onclick="this.parentNode.submit();"></div>\n                </form>\n            </div>\n        '])),e.siteDomainName=String,e.computed={getSiteDomainName:function(){return this.siteDomainName||location.host||document.domain}},e}t=e.widget||(e.widget={}),n=e.VueComponent,__extends(a,n),e=a,(new(t.BaiduSearch=e)).register()}(aj=aj||{}),function(e){var t,n;function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.name="aj-expander",e.template=html(__makeTemplateObject(["\n            <div class=\"aj-expander\" :style=\"'height:' + (expended ? openHeight : closeHeight) + 'px;'\">\n                <div :class=\"expended ? 'closeBtn' : 'openBtn'\" @click=\"expended = !expended;\"></div>\n                <slot></slot>\n            </div>\n        "],["\n            <div class=\"aj-expander\" :style=\"'height:' + (expended ? openHeight : closeHeight) + 'px;'\">\n                <div :class=\"expended ? 'closeBtn' : 'openBtn'\" @click=\"expended = !expended;\"></div>\n                <slot></slot>\n            </div>\n        "])),e.expended=!1,e.openHeight={type:Number,default:200},e.closeHeight={type:Number,default:50},e}t=e.widget||(e.widget={}),n=e.VueComponent,__extends(a,n),e=a,(new(t.Expander=e)).register()}(aj=aj||{}),function(e){var t,n;function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.name="aj-process-line",e.template=html(__makeTemplateObject(['\n            <div class="aj-process-line">\n                <div class="process-line">\n                    <div v-for="(item, index) in items" :class="{current: index == current, done: index < current}">\n                        <span>{{index + 1}}</span>\n                        <p>{{item}}</p>\n                    </div>\n                </div>\n            </div>\n        '],['\n            <div class="aj-process-line">\n                <div class="process-line">\n                    <div v-for="(item, index) in items" :class="{current: index == current, done: index < current}">\n                        <span>{{index + 1}}</span>\n                        <p>{{item}}</p>\n                    </div>\n                </div>\n            </div>\n        '])),e.props={items:{type:Array,default:function(){return["Step 1","Step 2","Step 3"]}}},e.items=[],e.current=0,e}t=e.widget||(e.widget={}),n=e.VueComponent,__extends(a,n),a.prototype.go=function(e){this.current=e},a.prototype.perv=function(){var e=this.current-1;e<0&&(e=this.items.length-1),this.go(e)},a.prototype.next=function(){var e=this.current+1;this.items.length==e&&(e=0),this.go(e)},e=a,(new(t.ProcessLine=e)).register()}(aj=aj||{}),Vue.component("aj-tab",{template:'\n        <div :class="isVertical ? \'aj-simple-tab-vertical\' : \'aj-tab\' ">\n\t      <button v-for="tab in tabs" v-bind:key="tab.name"\n\t        v-bind:class="[\'tab-button\', { active: currentTab.name === tab.name }]"\n\t        v-on:click="currentTab = tab">{{tab.name}}\n\t      </button>\n\t      <component v-bind:is="currentTab.component" class="tab"></component>\n        </div>\n    ',props:{isVertical:Boolean},data:function(){return{tabs:[],currentTab:{}}},mounted:function(){for(var e=this.$slots.default,t=0;t<e.length;t++){var n=e[t];"textarea"===n.tag&&this.tabs.push({name:n.data.attrs["data-title"],component:{template:"<div>"+n.children[0].text+"</div>"}})}this.currentTab=this.tabs[0]}}),function(e){var t;t=e.widget||(e.widget={}),function(){(t.tab||(t.tab={})).tabable={mounted:function(){var n=this,e=this.$el.$(".aj-simple-tab-horizontal > ul");e.onclick=function(e){var t=e.target;a(t);e=Array.prototype.indexOf.call(null===(e=t.parentElement)||void 0===e?void 0:e.children,t),e=null===(t=n.$el.$(".aj-simple-tab-horizontal > div"))||void 0===t?void 0:t.children[e];a(e)},e.onclick({target:e.children[0]})}};var a=function(e){var t=e.parentNode.$(".selected");e!==t&&(t&&t.classList.remove("selected"),e.classList.add("selected"))}}()}(aj=aj||{}),function(e){var t,n,a;function i(){var e=null!==a&&a.apply(this,arguments)||this;return e.name="aj-avatar",e.template=html(__makeTemplateObject(['\n            <a :href="avatar" target="_blank">\n                <img :src="avatar" style="max-width:50px;max-height:60px;vertical-align: middle;" \n                    @mouseenter="mouseEnter"\n                    @mouseleave="mouseLeave" />\n            </a>\n        '],['\n            <a :href="avatar" target="_blank">\n                <img :src="avatar" style="max-width:50px;max-height:60px;vertical-align: middle;" \n                    @mouseenter="mouseEnter"\n                    @mouseleave="mouseLeave" />\n            </a>\n        '])),e.props={avatar:{type:String,required:!0}},e.avatar="",e}t=e.widget||(e.widget={}),n=t.img||(t.img={}),a=e.VueComponent,__extends(i,a),i.prototype.mouseEnter=function(){n.imageEnlarger&&(n.imageEnlarger.imgUrl=this.avatar)},i.prototype.mouseLeave=function(){n.imageEnlarger&&(n.imageEnlarger.imgUrl=null)},t=i,(new(n.Avatar=t)).register()}(aj=aj||{}),function(e){var t,n;t=e.widget||(e.widget={}),(n=t.img||(t.img={})).initImageEnlarger=function(){return n.imageEnlarger=new Vue({el:document.body.appendChild(document.createElement("div")),template:'<div class="aj-image-large-view"><div><img :src="imgUrl" /></div></div>',data:{imgUrl:null},mounted:function(){var a=this;document.addEventListener("mousemove",e.throttle(function(e){var t,n;a.imgUrl&&(t=0,(n=a.$el.$("img").clientWidth)>e.pageX&&(t=n),(n=a.$el.$("div")).style.top=e.pageY+20+"px",n.style.left=e.pageX-n.clientWidth+t+"px")},50,5e3),!1)}}),n.imageEnlarger},Vue.component("aj-img-thumb",{template:'<a class="aj-img-thumb" :href="getImgUrl" v-if="imgUrl" target="_blank">\n                <img :src="getImgUrl"\n                    :onmouseenter="\'aj.widget.img.imageEnlarger.imgUrl = \\\'\' + getImgUrl + \'\\\';\'" \n                    onmouseleave="aj.widget.img.imageEnlarger.imgUrl = null;" />\n            </a>',props:{imgUrl:String},computed:{getImgUrl:function(){if(!this.imgUrl)return"";if(-1!=this.imgUrl.indexOf("http"))return this.imgUrl;if(!this.ajResources.imgPerfix)throw"未提供图片前缀地址";return this.ajResources.imgPerfix+this.imgUrl}}})}(aj=aj||{}),function(e){function l(e,t,n,a){var i=e,o=t;return(n<e||a<t)&&(n/a<e/t?(i=n,o=Math.round(n*(t/e))):(o=a,i=Math.round(a*(e/t)))),{targetWidth:i,targetHeight:o}}function s(e,t,n){var a=document.createElement("canvas");return a.width=t||e.width,a.height=n||e.height,null!==(n=a.getContext("2d"))&&void 0!==n&&n.drawImage(e,0,0),a}function t(e,t,n,a,i){return void 0===a&&(a="image/jpeg"),void 0===i&&(i=.9),s(e,t,n).toDataURL(a,i)}function i(e,t,n,a,i,o){void 0===i&&(i="image/jpeg"),void 0===o&&(o=.9),s(e,t,n).toBlob(function(e){return e&&a(e)},i,o)}function a(e,t,n,a){return void 0===n&&(n="image/jpeg"),void 0===a&&(a=.9),i(e,e.width,e.height,t,n,a)}function r(e){var t=0;return EXIF.getData(e,function(){t=EXIF.getTag(this,"Orientation")}),t}function d(e,t){var n=e.width,a=e.height,i=document.createElement("canvas"),o=i.getContext("2d");switch(-1<[5,6,7,8].indexOf(t)?(i.width=a,i.height=n):(i.width=n,i.height=a),t){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,a);break;case 4:o.transform(1,0,0,-1,0,a);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,a,0);break;case 7:o.transform(0,-1,-1,0,a,n);break;case 8:o.transform(0,-1,1,0,0,n);break;default:o.transform(1,0,0,1,0,0)}return o.drawImage(e,0,0),i.toDataURL("image/jpeg")}(e=e.img||(e.img={})).fitSize=l,e.imgObj2Canvas=s,e.reszieCompressCompressAsDataURL=t,e.img2base64=function(e){return t(e,e.width,e.height)},e.reszieCompressAsBlob=i,e.compressAsBlob=a,e.changeBlobImageQuality=function(e,t){var n=new Image;n.onload=function(){return a(n,t)},n.src=URL.createObjectURL(e)},e.getPhotoOrientation=r,e.rotate=d,e.compress=function(e,n){var t=l(e.width,e.height,1e3,1500),a=t.targetWidth,i=t.targetHeight,o=r(e);6==o&&(a=t.targetHeight,i=t.targetWidth);var s=new Image;s.onload=function(){var e,t=document.createElement("canvas");t.width=a,t.height=i,null!==(e=t.getContext("2d"))&&void 0!==e&&e.drawImage(s,0,0,a,i),t.toBlob(function(e){n.$blob=e},n.$fileType||"image/jpeg")},s.src=d(e,o)},e.dataURLtoBlob=function(e){for(var t=e.split(","),e=t[0].match(/:(.*?);/)[1],n=atob(t[1]),a=n.length,i=new Uint8Array(a);a--;)i[a]=n.charCodeAt(a);return new Blob([i],{type:e})}}(aj=aj||{}),function(e){var t,n,a;function i(){var e=null!==a&&a.apply(this,arguments)||this;return e.name="aj-layer",e.template='<div class="aj-modal hide" @click="close"><div><slot></slot></div></div>',e.props={notCloseWhenTap:Boolean,cleanAfterClose:Boolean},e.afterClose=function(){},e.notCloseWhenTap=!1,e.cleanAfterClose=!1,e}t=e.widget||(e.widget={}),n=t.modal||(t.modal={}),a=e.VueComponent,__extends(i,a),i.prototype.show=function(e){var t=this,n=Number(getComputedStyle(this.$el).zIndex);document.body.$(".aj-modal",function(e){e!=t.$el&&(e=Number(getComputedStyle(e).zIndex),n<=e&&(t.$el.style.zIndex=String(e+1)))}),this.$el.classList.remove("hide"),this.BUS&&this.BUS.$emit("aj-layer-closed",this),e&&e.afterClose&&(this.afterClose=e&&e.afterClose)},i.prototype.close=function(e){var t=!1;e?!e.isForceClose&&this.notCloseWhenTap||(t=n.msgbox.$options.methods.close.apply(this,arguments)):t=n.msgbox.$options.methods.close.call(this,{target:document.body.$(".aj-modal")}),t&&this.cleanAfterClose&&(this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy())},t=i,(new(n.Layer=t)).register()}(aj=aj||{}),function(n){var e,i;e=n.widget||(n.widget={}),i=e.modal||(e.modal={}),document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(document.createElement("div")).className="alertHolder",i.msgbox=new Vue({el:".alertHolder",template:html(__makeTemplateObject(['\n                <div class="aj-modal hide" @click="close">\n                    <div>\n                        <div v-html="showText"></div>\n                        <div class="aj-btnsHolder">\n                            <button v-show="showOk"  @click="onBtnClk" class="ok">确定</button>\n                            <button v-show="showYes" @click="onBtnClk" class="yes">{{showSave? \'保存\': \'是\'}}</button>\n                            <button v-show="showNo"  @click="onBtnClk" class="no">{{showSave? \'否\': \'否\'}}</button>\n                        </div>\n                    </div>\n                </div>\n            '],['\n                <div class="aj-modal hide" @click="close">\n                    <div>\n                        <div v-html="showText"></div>\n                        <div class="aj-btnsHolder">\n                            <button v-show="showOk"  @click="onBtnClk" class="ok">确定</button>\n                            <button v-show="showYes" @click="onBtnClk" class="yes">{{showSave? \'保存\': \'是\'}}</button>\n                            <button v-show="showNo"  @click="onBtnClk" class="no">{{showSave? \'否\': \'否\'}}</button>\n                        </div>\n                    </div>\n                </div>\n            '])),data:{showText:"",afterClose:null,showOk:!1,showYes:!1,showNo:!1,showSave:!1},methods:{show:function(e,t){return this.showText=e,this.$el.classList.remove("hide"),t&&n.apply(this,t),this},close:function(e){if(!e)return this.$el.classList.add("hide"),this.afterClose&&this.afterClose(null,this),!0;e=e.target;return!(!e||-1==e.className.indexOf("modal"))&&(this.$el.classList.add("hide"),this.afterClose&&this.afterClose(e,this),!0)},onBtnClk:function(e){switch(e.target.className){case"ok":this.onOkClk&&this.onOkClk(e,this);break;case"no":this.onNoClk&&this.onNoClk(e,this);break;case"yes":this.onYesClk&&this.onYesClk(e,this)}}}})}),n.alert=function(e,t){var n=i.msgbox.show(e,{showYes:!1,showNo:!1,showOk:!0,onOkClk:function(){n.$el.classList.add("hide"),t&&t()}})},n.showConfirm=function(e,t,n){var a=i.msgbox.show(e,{showYes:!0,showNo:!0,showOk:!1,showSave:!1,onYesClk:function(e){a.$el.classList.add("hide"),t&&t(a.$el,e)},onNoClk:function(){a.$el.classList.add("hide")}})},i.popup=function(e,t){i.msgbox.show(e,{showYes:!1,showNo:!1,showOk:!1,showSave:!1})},document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("div");e.className="aj-topMsg",e.setAttribute("v-html","showText"),document.body.appendChild(e),n.msg=new Vue({el:e,data:{showText:""},methods:{show:function(e,t){var n=this;this.showText=e;var a=this.$el;setTimeout(function(){a.classList.remove("fadeOut"),a.classList.add("fadeIn")},0),setTimeout(function(){a.classList.remove("fadeIn"),a.classList.add("fadeOut"),t&&t.afterClose&&t.afterClose(a,n)},t&&t.showTime||3e3)}}})})}(aj=aj||{}),function(e){var t,n,a;function i(){var e=null!==a&&a.apply(this,arguments)||this;return e.name="aj-adjust-font-size",e.template=html(__makeTemplateObject(['\n            <div class="aj-adjust-font-size">\n                <span>字体大小</span>\n                <ul @click="onClk">\n                    <li><label><input type="radio" name="fontSize" /> 小</label></li>\n                    <li><label><input type="radio" name="fontSize" /> 中</label></li>\n                    <li><label><input type="radio" name="fontSize" /> 大</label></li>\n                </ul>\n            </div>\n        '],['\n            <div class="aj-adjust-font-size">\n                <span>字体大小</span>\n                <ul @click="onClk">\n                    <li><label><input type="radio" name="fontSize" /> 小</label></li>\n                    <li><label><input type="radio" name="fontSize" /> 中</label></li>\n                    <li><label><input type="radio" name="fontSize" /> 大</label></li>\n                </ul>\n            </div>\n        '])),e.articleTarget={type:String,default:"article p"},e}t=e.widget||(e.widget={}),n=t.page||(t.page={}),a=e.VueComponent,__extends(i,a),i.prototype.onClk=function(e){var n=this,t=e.target,e=function(t){document.body.$(n.$props.articleTarget,function(e){return e.style.fontSize=t})};"LABEL"!=t.tagName&&"input"!=t.tagName||("LABEL"!=t.tagName&&(t=t.up("label")),-1!=t.innerHTML.indexOf("大")?e("12pt"):-1!=t.innerHTML.indexOf("中")?e("10.5pt"):-1!=t.innerHTML.indexOf("小")&&e("9pt"))},t=i,(new(n.AdjustFontSize=t)).register()}(aj=aj||{}),function(n){var e,a;function i(){var e,t;a&&window.clearInterval(a),a=window.setInterval(function(){e=document.documentElement.scrollTop||document.body.scrollTop,t=Math.floor((0-e)/8),0===e?clearInterval(a):document.documentElement.scrollTop=document.body.scrollTop=e+t},20)}e=n.widget||(n.widget={}),a=0,e.back2top=i,e.initBack2top=function(){var e=new Vue({el:document.body.appendChild(document.createElement("div")),template:'<div @click="clk" class="aj-widget-back2top" title="回到顶部"><i class="fa fa-arrow-up" aria-hidden="true"></i> </div>',methods:{clk:i}}),t=n.throttle(function(){e.$el.style.top=document.body.scrollTop+100+"px"},2e3,0);window.addEventListener("scroll",t),t()}}(aj=aj||{}),function(a){var e,t,n,i,o,s,l;function r(e,t){for(var n,a=e.childNodes,i=0,o=a.length;i<o;i++)n=a.item(i),0<"||BR|HR|TEXTAREA|".indexOf("|"+n.tagName+"|")||(n.title?n.title=t(n.title):n.alt?n.alt=t(n.alt):"INPUT"==n.tagName&&""!=n.value&&"text"!=n.type&&"hidden"!=n.type?n.value=t(n.value):3==n.nodeType?n.data=t(n.data):r(n,t))}function d(e,t,n){for(var a,i,o,s=[],l=0,r=e.length;l<r;l++)a=e.charAt(l),i=t.indexOf(a),o=n.charAt(i),s.push(-1!=i?o:a);return s.join("")}function c(e,t){var n;i?e():a.loadScript("https://framework.ajaxjs.com/src/widget/page/ChineseChars.js","",function(){i=!0,e()}),(null===(n=t.up("span"))||void 0===n?void 0:n.$(a.SELECTED_CSS)).classList.remove(a.SELECTED),t.classList.add(a.SELECTED)}function u(e){o!==t&&c(function(){r(document.body,d.delegate(null,s.简化中文,s.正体中文)),o=t,n.set(l,o+"")},e)}e=(e=(e=a.widget||(a.widget={})).page||(e.page={})).TraditionalChinese||(e.TraditionalChinese={}),t=1,i=!(n={set:function(e,t){var n=new Date;n.setDate(n.getDate()+6e5),document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()},del:function(e){document.cookie=e+"=;expires="+new Date(0).toUTCString()},get:function(e){e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=e?unescape(e[2]):""}}),s=a.widget.page.TraditionalChinese,l="ChineseType",o=function(){switch((navigator.userLanguage||navigator.language).toLowerCase()){case"zh-tw":return t;case"zh-cn":return 2;default:return 0}}(),e.toSimpleChinese=function(e){2!==o&&c(function(){r(document.body,d.delegate(null,s.正体中文,s.简化中文)),o=2,n.set(l,o+"")},e)},e.toChinese=u,e.init=function(){var e=(e=n.get(l))&&Number(e);o!=t&&e!=t||u(document.querySelector(".Chinese"))}}(aj=aj||{});
//# sourceMappingURL=../sourcemap/widget.min.js.map

"use strict";var aj;Vue.component("aj-form-between-date",{template:html(__makeTemplateObject(['\n        <form action="." method="GET" class="dateRange" @submit="valid">\n            <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="起始时间" field-name="startDate" ></aj-form-calendar-input>\n            - <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="截至时间" field-name="endDate"></aj-form-calendar-input>\n            <button class="aj-btn">按时间筛选</button>\n        </form>    \n    '],['\n        <form action="." method="GET" class="dateRange" @submit="valid">\n            <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="起始时间" field-name="startDate" ></aj-form-calendar-input>\n            - <aj-form-calendar-input :date-only="true" :position-fixed="true" placeholder="截至时间" field-name="endDate"></aj-form-calendar-input>\n            <button class="aj-btn">按时间筛选</button>\n        </form>    \n    '])),props:{isAjax:{type:Boolean,default:!0}},methods:{valid:function(t){var e,i=this.$el.$("input[name=startDate]").value,n=this.$el.$("input[name=endDate]").value;return i&&n?new Date(i)>new Date(n)?(aj.alert("起始日期不能晚于结束日期"),void t.preventDefault()):void(this.isAjax&&(t.preventDefault(),e=this.$parent.$parent,aj.apply(e.$refs.pager.extraParam,{startDate:i,endDate:n}),e.reload())):(aj.alert("输入数据不能为空"),void t.preventDefault())}}}),Vue.component("aj-form-calendar-input",{template:html(__makeTemplateObject(['\n        <div class="aj-form-calendar-input" :class="{\'show-time\': showTime}" @mouseover="onMouseOver">\n            <div class="icon fa fa-calendar"></div>\n            <input :placeholder="placeholder" size="12" :name="fieldName" :value="date + (dateOnly ? \'\' : \' \' + time)"\n                type="text" autocomplete="off" />\n            <aj-form-calendar ref="calendar" :show-time="showTime" @pick-date="recEvent" @pick-time="recTimeEvent">\n            </aj-form-calendar>\n        </div>\n    '],['\n        <div class="aj-form-calendar-input" :class="{\'show-time\': showTime}" @mouseover="onMouseOver">\n            <div class="icon fa fa-calendar"></div>\n            <input :placeholder="placeholder" size="12" :name="fieldName" :value="date + (dateOnly ? \'\' : \' \' + time)"\n                type="text" autocomplete="off" />\n            <aj-form-calendar ref="calendar" :show-time="showTime" @pick-date="recEvent" @pick-time="recTimeEvent">\n            </aj-form-calendar>\n        </div>\n    '])),data:function(){return{date:this.fieldValue,time:""}},props:{fieldName:{type:String,required:!0},fieldValue:{type:String,required:!1,default:""},dateOnly:{type:Boolean,required:!1,default:!0},showTime:!1,positionFixed:Boolean,placeholder:{type:String,default:"请输入日期"}},watch:{fieldValue:function(t){this.date=t}},mounted:function(){var t;this.positionFixed&&this.$el.$(".aj-form-calendar").classList.add("positionFixed"),this.fieldValue&&((t=this.fieldValue.split(" ")[0]).split("-"),this.$refs.calendar.date=new Date(t[0],t[1]-1,t[2]," ",""," "))},methods:{recTimeEvent:function(t){this.time=t},recEvent:function(t){this.date=t.trim()},onMouseOver:function(t){var e,i;this.positionFixed&&(i=(e=t.currentTarget).getBoundingClientRect(),(t=this.$el.$(".aj-form-calendar")).style.top=+(i.top+e.clientHeight)+"px",t.style.left=+i.left+0+"px")}}}),function(t){var e,i;function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="aj-form-calendar",t.template=html(__makeTemplateObject(['\n        <div class="aj-form-calendar">\n            <div class="selectYearMonth">\n                <a href="###" @click="getDate(\'preYear\')" class="preYear" title="上一年">&lt;</a>\n                <select @change="setMonth" v-model="month">\n                    <option value="1">一月</option>\n                    <option value="2">二月</option>\n                    <option value="3">三月</option>\n                    <option value="4">四月</option>\n                    <option value="5">五月</option>\n                    <option value="6">六月</option>\n                    <option value="7">七月</option>\n                    <option value="8">八月</option>\n                    <option value="9">九月</option>\n                    <option value="10">十月</option>\n                    <option value="11">十一月</option>\n                    <option value="12">十二月</option>\n                </select>\n                <a href="###" @click="getDate(\'nextYear\')" class="nextYear" title="下一年">&gt;</a>\n            </div>\n            <div class="showCurrentYearMonth">\n                <span class="showYear">{{year}}</span>/<span class="showMonth">{{month}}</span>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <td>日</td>\n                        <td>一</td>\n                        <td>二</td>\n                        <td>三</td>\n                        <td>四</td>\n                        <td>五</td>\n                        <td>六</td>\n                    </tr>\n                </thead>\n                <tbody @click="pickDay"></tbody>\n            </table>\n            <div v-if="showTime" class="showTime">\n                时 <select class="hour aj-select">\n                    <option v-for="n in 24">{{n}}</option>\n                </select>\n                分 <select class="minute aj-select">\n                    <option v-for="n in 61">{{n - 1}}</option>\n                </select>\n                <a href="#" @click="pickupTime">选择时间</a>\n            </div>\n        </div>'],['\n        <div class="aj-form-calendar">\n            <div class="selectYearMonth">\n                <a href="###" @click="getDate(\'preYear\')" class="preYear" title="上一年">&lt;</a>\n                <select @change="setMonth" v-model="month">\n                    <option value="1">一月</option>\n                    <option value="2">二月</option>\n                    <option value="3">三月</option>\n                    <option value="4">四月</option>\n                    <option value="5">五月</option>\n                    <option value="6">六月</option>\n                    <option value="7">七月</option>\n                    <option value="8">八月</option>\n                    <option value="9">九月</option>\n                    <option value="10">十月</option>\n                    <option value="11">十一月</option>\n                    <option value="12">十二月</option>\n                </select>\n                <a href="###" @click="getDate(\'nextYear\')" class="nextYear" title="下一年">&gt;</a>\n            </div>\n            <div class="showCurrentYearMonth">\n                <span class="showYear">{{year}}</span>/<span class="showMonth">{{month}}</span>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <td>日</td>\n                        <td>一</td>\n                        <td>二</td>\n                        <td>三</td>\n                        <td>四</td>\n                        <td>五</td>\n                        <td>六</td>\n                    </tr>\n                </thead>\n                <tbody @click="pickDay"></tbody>\n            </table>\n            <div v-if="showTime" class="showTime">\n                时 <select class="hour aj-select">\n                    <option v-for="n in 24">{{n}}</option>\n                </select>\n                分 <select class="minute aj-select">\n                    <option v-for="n in 61">{{n - 1}}</option>\n                </select>\n                <a href="#" @click="pickupTime">选择时间</a>\n            </div>\n        </div>'])),t.watch={date:function(){this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.render()}},t.showTime=Boolean,t.date=new Date,t.year=(new Date).getFullYear(),t.month=(new Date).getMonth()+1,t.day=1,t}e=t.form||(t.form={}),i=t.VueComponent,__extends(n,i),n.prototype.data=function(){var t=new Date;return{date:t,year:t.getFullYear(),month:t.getMonth()+1,day:1}},n.prototype.mounted=function(){this.$options.watch.date.call(this)},n.prototype.render=function(){for(var t=this.getDateArr(),e=document.createDocumentFragment();t.length;){for(var i=document.createElement("tr"),n=1;n<=7;n++){var a,o,l=document.createElement("td");!t.length||(a=t.shift())&&(o=this.year+"-"+this.month+"-"+a,l.title=o,l.className="day day_"+o,l.innerHTML=a+"",o=new Date(this.year,this.month-1,a),a=o,o=this.date,a.getFullYear()==o.getFullYear()&&a.getMonth()==o.getMonth()&&a.getDate()==o.getDate()&&l.classList.add("onToday")),i.appendChild(l)}e.appendChild(i)}var r=this.$el.$("table tbody");r.innerHTML="",r.appendChild(e)},n.prototype.getDate=function(t,e){var i=this.date.getFullYear(),n=this.date.getMonth()+1;switch(t){case"preMonth":this.date=new Date(i,n-2,1);break;case"nextMonth":this.date=new Date(i,n,1);break;case"setMonth":this.date=new Date(i,e-1,1);break;case"preYear":this.date=new Date(i-1,n-1,1);break;case"nextYear":this.date=new Date(i+1,n-1,1)}},n.prototype.setMonth=function(t){t=t.target;this.getDate("setMonth",Number(t.selectedOptions[0].value))},n.prototype.getDateArr=function(){for(var t=[],e=1,i=new Date(this.year,this.month-1,1).getDay();e<=i;e++)t.push(0);for(var e=1,n=new Date(this.year,this.month,0).getDate();e<=n;e++)t.push(e);return t},n.prototype.pickDay=function(t){t=t.target.title;return this.$emit("pick-date",t),t},n.prototype.pickupTime=function(t){var e=this.$el.$(".hour"),i=this.$el.$(".minute"),i=e.selectedOptions[0].value+":"+i.selectedOptions[0].value;this.$emit("pick-time",i)},t=n,(new(e.Calendar=t)).register()}(aj=aj||{}),function(t){var e,i;function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="aj-china-area",t.template=html(__makeTemplateObject(['\n\t\t\t<div class="aj-china-area">\n\t\t\t\t<span>省</span>\n\t\t\t\t<select v-model="province" class="aj-select" style="width:120px;" :name="provinceName || \'locationProvince\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in addressData[86]" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>市 </span>\n\t\t\t\t<select v-model="city" class="aj-select" style="width:120px;" :name="cityName || \'locationCity\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in citys" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>区</span>\n\t\t\t\t<select v-model="district" class="aj-select" style="width:120px;" :name="districtName || \'locationDistrict\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in districts" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t'],['\n\t\t\t<div class="aj-china-area">\n\t\t\t\t<span>省</span>\n\t\t\t\t<select v-model="province" class="aj-select" style="width:120px;" :name="provinceName || \'locationProvince\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in addressData[86]" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>市 </span>\n\t\t\t\t<select v-model="city" class="aj-select" style="width:120px;" :name="cityName || \'locationCity\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in citys" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t\t<span>区</span>\n\t\t\t\t<select v-model="district" class="aj-select" style="width:120px;" :name="districtName || \'locationDistrict\'">\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t<option v-for="(v, k) in districts" :value="k">{{v}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t'])),t.provinceCode=String,t.cityCode=String,t.districtCode=String,t.provinceName=String,t.cityName=String,t.districtName=String,t.computed={citys:function(){return this.province?this.addressData[this.province]:{}},districts:function(){return this.city?this.addressData[this.city]:{}}},t}e=t.form||(t.form={}),i=t.VueComponent,__extends(n,i),n.prototype.data=function(){return{province:this.provinceCode||"",city:this.cityCode||"",district:this.districtCode||"",addressData:window.China_AREA}},n.prototype.mounted=function(){if(!window.China_AREA)throw"中国行政区域数据 脚本没导入"},t=n,(new(e.ChinaArea=t)).register()}(aj=aj||{}),function(n){var i;i=n.form||(n.form={}),Vue.component("aj-edit-form",{template:html(__makeTemplateObject(['\n            <form class="aj-table-form" :action="getInfoApi + (isCreate ? \'\' : info.id + \'/\')" :method="isCreate ? \'POST\' : \'PUT\'">\n                <h3>{{isCreate ? "新建" : "编辑" }}{{uiName}}</h3>\n                \x3c!-- 传送 id 参数 --\x3e\n                <input v-if="!isCreate" type="hidden" name="id" :value="info.id" />\n                <slot v-bind:info="info"></slot>\n                <div class="aj-btnsHolder">\n                    <button><img :src="ajResources.commonAsset + \'/icon/save.gif\'" /> {{isCreate ? "新建":"保存"}}</button>\n                    <button onclick="this.up(\'form\').reset();return false;">复 位</button>\n                    <button v-if="!isCreate" v-on:click.prevent="del()">\n                        <img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 删 除\n                    </button>\n                    <button @click.prevent="close">关闭</button>\n                </div>\n            </form>\n        '],['\n            <form class="aj-table-form" :action="getInfoApi + (isCreate ? \'\' : info.id + \'/\')" :method="isCreate ? \'POST\' : \'PUT\'">\n                <h3>{{isCreate ? "新建" : "编辑" }}{{uiName}}</h3>\n                \x3c!-- 传送 id 参数 --\x3e\n                <input v-if="!isCreate" type="hidden" name="id" :value="info.id" />\n                <slot v-bind:info="info"></slot>\n                <div class="aj-btnsHolder">\n                    <button><img :src="ajResources.commonAsset + \'/icon/save.gif\'" /> {{isCreate ? "新建":"保存"}}</button>\n                    <button onclick="this.up(\\\'form\\\').reset();return false;">复 位</button>\n                    <button v-if="!isCreate" v-on:click.prevent="del()">\n                        <img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 删 除\n                    </button>\n                    <button @click.prevent="close">关闭</button>\n                </div>\n            </form>\n        '])),props:{isCreate:Boolean,uiName:String,apiUrl:{type:String,required:!0}},data:function(){return{id:0,info:{}}},mounted:function(){var i=this;n.xhr.form(this.$el,function(t){var e;t&&(t.isOk?(e=(i.isCreate?"新建":"保存")+i.uiName+"成功",n.msg.show(e),i.$parent.close()):n.msg.show(t.msg))})},methods:{load:function(t,e){var i=this;this.id=t,n.xhr.get(this.apiUrl+t+"/",function(t){i.info=t.result,e&&e(t)})},close:function(){"aj-layer"===this.$parent.$options._componentTag?this.$parent.close():history.back()},del:function(){var t=i.utils.getFormFieldValue(this.$el,"input[name=id]"),e=i.utils.getFormFieldValue(this.$el,"input[name=name]");n.showConfirm("请确定删除记录：\n"+e+"？",function(){return n.xhr.dele("../"+t+"/",function(t){t.isOk?n.msg.show("删除成功！"):n.alert("删除失败！")})})}}})}(aj=aj||{}),function(o){var t,e,i,n;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.fieldName="",t.fieldValue="",t.radomId=0,t.action="",t.accpectFileType="",t.limitFileType="",t.fileSize=0,t.fileName="",t.$fileObj=null,t.$blob=null,t.buttonBottom=!1,t.limitSize=0,t.progress=0,t.errMsg="init",t.errStatus=[!1,!1],t.newlyId="",t.$uploadOk_callback=function(t){t.isOk&&(this.fieldValue=t.imgUrl),o.xhr.defaultCallBack(t)},t}function l(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="aj-file-uploader",t.template=html(__makeTemplateObject(['\n            <div class="aj-file-uploader">\n                <input type="hidden" :name="fieldName" :value="fieldValue" />\n                <input type="file" :id="\'uploadInput_\' + radomId" @change="onUploadInputChange" :accept="accpectFileType" />\n            \n                <label class="pseudoFilePicker" :for="\'uploadInput_\' + radomId">\n                    <div @drop="onDrop" ondragover="event.preventDefault();">\n                        <div>+</div>点击选择文件<br />或拖放到此\n                    </div>\n                </label>\n            \n                <div class="msg" v-if="errMsg != \'\'">\n                    允许类型：{{limitFileType || \'无限制\'}}\n                    <br />\n                    允许大小：{{limitSize ? changeByte(limitSize * 1024) : \'无限制\'}}\n                    <span class="slot"></span>\n                </div>\n                <div class="msg" v-if="errMsg == \'\'">\n                    {{fileName}}<div v-if="fileSize">{{changeByte(fileSize)}}</div>\n                    <button @click.prevent="doUpload">{{progress && progress !== 100 ? \'上传中 \' + progress + \'%\': \'上传\'}}</button>\n                </div>\n            </div>\n        '],['\n            <div class="aj-file-uploader">\n                <input type="hidden" :name="fieldName" :value="fieldValue" />\n                <input type="file" :id="\'uploadInput_\' + radomId" @change="onUploadInputChange" :accept="accpectFileType" />\n            \n                <label class="pseudoFilePicker" :for="\'uploadInput_\' + radomId">\n                    <div @drop="onDrop" ondragover="event.preventDefault();">\n                        <div>+</div>点击选择文件<br />或拖放到此\n                    </div>\n                </label>\n            \n                <div class="msg" v-if="errMsg != \'\'">\n                    允许类型：{{limitFileType || \'无限制\'}}\n                    <br />\n                    允许大小：{{limitSize ? changeByte(limitSize * 1024) : \'无限制\'}}\n                    <span class="slot"></span>\n                </div>\n                <div class="msg" v-if="errMsg == \'\'">\n                    {{fileName}}<div v-if="fileSize">{{changeByte(fileSize)}}</div>\n                    <button @click.prevent="doUpload">{{progress && progress !== 100 ? \'上传中 \' + progress + \'%\': \'上传\'}}</button>\n                </div>\n            </div>\n        '])),t.props={action:{type:String,required:!0},fieldName:String,limitSize:{type:Number,default:2e4},limitFileType:String,accpectFileType:String,buttonBottom:Boolean,radomId:{type:Number,default:function(){return Math.round(1e3*Math.random())}}},t.watch={fileName:function(t){var e;this.limitFileType?t&&this.limitFileType&&(e=t.split(".").pop(),new RegExp(this.limitFileType,"i").test(e)?Vue.set(this.errStatus,0,!0):(e="上传文件为 "+t+"，<br />抱歉，不支持上传 *."+e+" 类型文件",Vue.set(this.errStatus,0,e))):Vue.set(this.errStatus,0,!0)},fileSize:function(t){this.limitSize&&this.limitSize&&t>1024*this.limitSize?(t="要上传的文件容量过大("+this.changeByte(t)+")，请压缩到 "+this.changeByte(1024*this.limitSize)+" 以下",Vue.set(this.errStatus,1,t)):Vue.set(this.errStatus,1,!0)},errStatus:function(t){var e=t.length;if(e){for(var i="",n=0;n<e;n++){var a=t[n];if(!1===a)return;a&&"string"==typeof a&&(i+=a+"；<br/>")}i?(o.alert(i),this.errMsg=i):(this.errMsg="",this.errStatus=[!1,!1])}}},t}t=o.xhr_upload||(o.xhr_upload={}),e=o.VueComponent,__extends(a,e),n=i=a,__extends(l,n),l.prototype.onUploadInputChange=function(t){t=t.target;t.files&&t.files[0]&&this.onFileGet(t.files)},l.prototype.onDrop=function(t){var e;t.preventDefault(),null!==(e=t.dataTransfer)&&void 0!==e&&e.files&&this.onFileGet(t.dataTransfer.files)},l.prototype.onFileGet=function(t){t=t[0],t.type;this.$fileObj=t,this.fileName=t.name,this.fileSize=t.size},l.prototype.changeByte=function(t){var e="",t=(e=t<102.4?t.toFixed(2)+"B":t<104857.6?(t/1024).toFixed(2)+"KB":t<107374182.4?(t/1048576).toFixed(2)+"MB":(t/1073741824).toFixed(2)+"GB").indexOf(".");return"00"==e.substr(t+1,2)?e.substring(0,t)+e.substr(t+3,2):e},l.prototype.doUpload=function(){var i=this,t=new FormData;this.$blob?t.append("file",this.$blob,this.fileName):this.$fileObj&&t.append("file",this.$fileObj);var e=new XMLHttpRequest;e.onreadystatechange=o.xhr.requestHandler.delegate(null,this.$uploadOk_callback,"json"),e.open("POST",this.action,!0),e.onprogress=function(t){var e=0,t=~~(1e3*t.loaded/t.total);e!==(t/=10)&&(e=t),i.progress=e},e.send(t)},i=l,t.FileUploader=i,t.fileUploader=new i,t.fileUploader.register()}(aj=aj||{}),function(r){var t,e,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="aj-form-html-editor",t.template=html(__makeTemplateObject(['\n            <div class="aj-form-html-editor">\n                <ul class="toolbar" @click="onToolBarClk">\n                    <li class="dorpdown">\n                        <i title="字体" class="fa-font"></i>\n                        <div class="fontfamilyChoser" @click="onFontfamilyChoserClk">\n                            <a style="font-family: \'宋体\'">宋体</a>\n                            <a style="font-family: \'黑体\'">黑体</a>\n                            <a style="font-family: \'楷体\'">楷体</a>\n                            <a style="font-family: \'隶书\'">隶书</a>\n                            <a style="font-family: \'幼圆\'">幼圆</a>\n                            <a style="font-family: \'Microsoft YaHei\'">Microsoft YaHei</a>\n                            <a style="font-family: Arial">Arial</a>\n                            <a style="font-family: \'Arial Narrow\'">Arial Narrow</a>\n                            <a style="font-family: \'Arial Black\'">Arial Black</a>\n                            <a style="font-family: \'Comic Sans MS\'">Comic Sans MS</a>\n                            <a style="font-family: Courier">Courier</a>\n                            <a style="font-family: System">System</a>\n                            <a style="font-family: \'Times New Roman\'">Times New Roman</a>\n                            <a style="font-family: Verdana">Verdana</a>\n                        </div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="字号" class="fa-header"></i>\n                        <div class="fontsizeChoser" @click="onFontsizeChoserClk">\n                            <a style="font-size: xx-small; ">极小</a>\n                            <a style="font-size: x-small;  ">特小</a>\n                            <a style="font-size: small;    ">小</a>\n                            <a style="font-size: medium;   ">中</a>\n                            <a style="font-size: large;    ">大</a>\n                            <a style="font-size: x-large;  ">特大</a>\n                            <a style="font-size: xx-large; line-height: 140%">极大</a>\n                        </div>\n                    </li>\n                    <li><i title="加粗" class="bold fa-bold"></i></li>\n                    <li><i title="斜体" class="italic fa-italic"></i></li>\n                    <li><i title="下划线" class="underline fa-underline"></i></li>\n                    <li><i title="左对齐" class="justifyleft fa-align-left"></i></li>\n                    <li><i title="中间对齐" class="justifycenter fa-align-center"></i></li>\n                    <li><i title="右对齐" class="justifyright fa-align-right"></i></li>\n                    <li><i title="数字编号" class="insertorderedlist fa-list-ol"></i></li>\n                    <li><i title="项目编号" class="insertunorderedlist fa-list-ul"></i></li>\n                    <li><i title="增加缩进" class="outdent fa-outdent"></i></li>\n                    <li><i title="减少缩进" class="indent fa-indent"></i></li>\n                    <li class="dorpdown">\n                        <i title="字体颜色" class="fa-paint-brush"></i>\n                        <div class="fontColor colorPicker" v-html="createColorPickerHTML()" @click="onFontColorPicker"></div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="背景颜色" class="fa-pencil"></i>\n                        <div class="bgColor colorPicker" v-html="createColorPickerHTML()" @click="onFontBgColorPicker"></div>\n                    </li>\n                    <li><i title="增加链接" class="createLink fa-link"></i></li>\n                    <li><i title="增加图片" class="insertImage fa-file-image-o"></i></li>\n                    <li><i title="一键存图" class="saveRemoteImage2Local fa-hdd-o"></i></li>\n                    <li><i title="清理 HTML" class="cleanHTML fa-eraser"></i></li>\n                    <li><i title="切换到代码" class="switchMode fa-code"></i></li>\n                </ul>\n            \n                <div class="editorBody">\n                    <iframe srcdoc="<html><body></body></html>"></iframe>\n                    <slot></slot>\n                </div>\n                <aj-form-popup-upload ref="uploadLayer" :upload-url="uploadImageActionUrl"></aj-form-popup-upload>\n            </div>\n        '],['\n            <div class="aj-form-html-editor">\n                <ul class="toolbar" @click="onToolBarClk">\n                    <li class="dorpdown">\n                        <i title="字体" class="fa-font"></i>\n                        <div class="fontfamilyChoser" @click="onFontfamilyChoserClk">\n                            <a style="font-family: \'宋体\'">宋体</a>\n                            <a style="font-family: \'黑体\'">黑体</a>\n                            <a style="font-family: \'楷体\'">楷体</a>\n                            <a style="font-family: \'隶书\'">隶书</a>\n                            <a style="font-family: \'幼圆\'">幼圆</a>\n                            <a style="font-family: \'Microsoft YaHei\'">Microsoft YaHei</a>\n                            <a style="font-family: Arial">Arial</a>\n                            <a style="font-family: \'Arial Narrow\'">Arial Narrow</a>\n                            <a style="font-family: \'Arial Black\'">Arial Black</a>\n                            <a style="font-family: \'Comic Sans MS\'">Comic Sans MS</a>\n                            <a style="font-family: Courier">Courier</a>\n                            <a style="font-family: System">System</a>\n                            <a style="font-family: \'Times New Roman\'">Times New Roman</a>\n                            <a style="font-family: Verdana">Verdana</a>\n                        </div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="字号" class="fa-header"></i>\n                        <div class="fontsizeChoser" @click="onFontsizeChoserClk">\n                            <a style="font-size: xx-small; ">极小</a>\n                            <a style="font-size: x-small;  ">特小</a>\n                            <a style="font-size: small;    ">小</a>\n                            <a style="font-size: medium;   ">中</a>\n                            <a style="font-size: large;    ">大</a>\n                            <a style="font-size: x-large;  ">特大</a>\n                            <a style="font-size: xx-large; line-height: 140%">极大</a>\n                        </div>\n                    </li>\n                    <li><i title="加粗" class="bold fa-bold"></i></li>\n                    <li><i title="斜体" class="italic fa-italic"></i></li>\n                    <li><i title="下划线" class="underline fa-underline"></i></li>\n                    <li><i title="左对齐" class="justifyleft fa-align-left"></i></li>\n                    <li><i title="中间对齐" class="justifycenter fa-align-center"></i></li>\n                    <li><i title="右对齐" class="justifyright fa-align-right"></i></li>\n                    <li><i title="数字编号" class="insertorderedlist fa-list-ol"></i></li>\n                    <li><i title="项目编号" class="insertunorderedlist fa-list-ul"></i></li>\n                    <li><i title="增加缩进" class="outdent fa-outdent"></i></li>\n                    <li><i title="减少缩进" class="indent fa-indent"></i></li>\n                    <li class="dorpdown">\n                        <i title="字体颜色" class="fa-paint-brush"></i>\n                        <div class="fontColor colorPicker" v-html="createColorPickerHTML()" @click="onFontColorPicker"></div>\n                    </li>\n                    <li class="dorpdown">\n                        <i title="背景颜色" class="fa-pencil"></i>\n                        <div class="bgColor colorPicker" v-html="createColorPickerHTML()" @click="onFontBgColorPicker"></div>\n                    </li>\n                    <li><i title="增加链接" class="createLink fa-link"></i></li>\n                    <li><i title="增加图片" class="insertImage fa-file-image-o"></i></li>\n                    <li><i title="一键存图" class="saveRemoteImage2Local fa-hdd-o"></i></li>\n                    <li><i title="清理 HTML" class="cleanHTML fa-eraser"></i></li>\n                    <li><i title="切换到代码" class="switchMode fa-code"></i></li>\n                </ul>\n            \n                <div class="editorBody">\n                    <iframe srcdoc="<html><body></body></html>"></iframe>\n                    <slot></slot>\n                </div>\n                <aj-form-popup-upload ref="uploadLayer" :upload-url="uploadImageActionUrl"></aj-form-popup-upload>\n            </div>\n        '])),t.props={fieldName:{type:String,required:!0},uploadImageActionUrl:String},t.fieldName="",t.fieldValue="",t.uploadImageActionUrl="",t.toolbarEl=document.body,t.iframeEl=document.body,t.iframeDoc=document,t.sourceEditor=document.body,t.mode="iframe",t}function a(e){this.toolbarEl.$("i",function(t){-1==t.className.indexOf("switchMode")&&(t.style.color=e?"lightgray":"")})}t=r.form||(r.form={}),e=r.VueComponent,__extends(n,e),n.prototype.mounted=function(){var i=this,t=this.$el;this.mode="iframe",this.toolbarEl=t.$(".toolbar"),this.iframeEl=t.$("iframe"),this.iframeEl.contentWindow.onload=function(t){var e=i.iframeEl.contentWindow.document;e.designMode="on",e.addEventListener("paste",function(t){var e=this;if(!this.uploadImageActionUrl)return void r.alert("未提供图片上传地址");var i=t.clipboardData&&t.clipboardData.items,n=null;if(i&&i.length)for(var a=0;a<i.length;a++){var o=i[a];if(-1!==o.type.indexOf("image")){if(window.isCreate)return void r.alert("请保存记录后再上传图片。");n=o.getAsFile();break}}n&&(t.preventDefault(),r.img.changeBlobImageQuality(n,function(t){Vue.options.components["aj-xhr-upload"].extendOptions.methods.doUpload.call({action:e.uploadImageActionUrl,progress:0,uploadOk_callback:function(t){t.isOk&&this.format("insertImage",this.ajResources.imgPerfix+t.imgUrl)},$blob:t,$fileName:"foo.jpg"})}))}.bind(i)),i.iframeDoc=e,new MutationObserver(function(t,e){"iframe"===i.mode&&(i.sourceEditor.value=i.iframeDoc.body.innerHTML)}).observe(e.body,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),i.sourceEditor.value&&i.setIframeBody(i.sourceEditor.value)},this.sourceEditor=t.$("textarea"),this.sourceEditor.classList.add("hide"),this.sourceEditor.name=this.fieldName,this.sourceEditor.oninput=function(t){"textarea"===i.mode&&i.setIframeBody(i.sourceEditor.value)},this.uploadImgMgr=this.$refs.uploadLayer},n.prototype.setIframeBody=function(t){this.iframeDoc.body.innerHTML=t},n.prototype.getValue=function(t,e){var i=this.iframeDoc.body.innerHTML;return t&&(i=i.replace(/<(\/)*(\\?xml:|meta|link|span|font|del|ins|st1:|[ovwxp]:)((.|\s)*?)>/gi,"").replace(/(class|style|type|start)=("(.*?)"|(\w*))/gi,"").replace(/<style(.*?)style>/gi,"").replace(/<script(.*?)script>/gi,"").replace(/<!--(.*?)-->/gi,"")),e&&(i=encodeURIComponent(i)),i},n.prototype.setMode=function(){"iframe"==this.mode?(this.iframeEl.classList.add("hide"),this.sourceEditor.classList.remove("hide"),this.mode="textarea",a.call(this,!0)):(this.iframeEl.classList.remove("hide"),this.sourceEditor.classList.add("hide"),this.mode="iframe",a.call(this,!1))},n.prototype.onToolBarClk=function(t){var e=this,i=t.target.className.split(" ").shift();switch(i){case"createLink":var n=prompt("请输入 URL 地址");n&&this.format("createLink",n);break;case"insertImage":window.isCreate?r.alert("请保存记录后再上传图片。"):this.uploadImgMgr.show(function(t){t&&t.isOk&&e.format("insertImage",t.fullUrl)});break;case"switchMode":this.setMode();break;case"cleanHTML":this.setIframeBody(HtmlSanitizer.SanitizeHtml(this.iframeDoc.body.innerHTML));break;case"saveRemoteImage2Local":(function(){for(var t=this.iframeDoc.querySelectorAll("img"),a=new Array,e=[],i=0,n=t.length;i<n;i++){var o=t[i],l=o.getAttribute("src");/^http/.test(l)&&(a.push(o),e.push(l))}e.length?r.xhr.post("../downAllPics/",function(t){for(var e=t.pics,i=0,n=e.length;i<n;i++)a[i].src="images/"+e[i];r.alert("所有图片下载完成。")},{pics:e.join("|")}):r.alert("未发现有远程图片")}).call(this);break;default:this.format(i)}},n.prototype.format=function(t,e){e?this.iframeDoc.execCommand(t,!1,e):this.iframeDoc.execCommand(t,!1),this.iframeEl.contentWindow.focus()},n.prototype.onFontsizeChoserClk=function(t){for(var e=t.target,i=t.currentTarget.children,n=0,a=i.length;n<a&&e!=i[n];n++);this.format("fontsize",n+"")},n.prototype.onFontColorPicker=function(t){this.format("foreColor",t.target.title)},n.prototype.onFontBgColorPicker=function(t){this.format("backColor",t.target.title)},n.prototype.onFontfamilyChoserClk=function(t){t=t.target;this.format("fontname",t.innerHTML);var e=t.parentNode;e.style.display="none",setTimeout(function(){return e.style.display=""},300)},n.prototype.createColorPickerHTML=function(){for(var t,e,i,n=["00","33","66","99","CC","FF"],a=['<div class="colorhead"><span class="colortitle">颜色选择</span></div><div class="colorbody"><table cellspaci="0" cellpadding="0"><tr>'],o=0;o<6;++o){a.push('<td><table class="colorpanel" cellspacing="0" cellpadding="0">');for(var l=0,r=n[o];l<6;++l){a.push("<tr>");for(var s=0,c=n[l];s<6;++s)e=5==s&&2!=o&&5!=o?";border-right:none;":"",i=5==l&&o<3?";border-bottom:none":"",t="#"+r+n[s]+c,a.push('<td unselectable="on" style="background-color: '+t+e+i+'" title="'+t+'"></td>');a.push("</tr>")}a.push("</table></td>"),"66"==n[o]&&a.push("</tr><tr>")}return a.push("</tr></table></div>"),a.join("")},i=n,(new(t.HtmlEditor=i)).register()}(aj=aj||{}),function(a){var e,i,o,t;function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="aj-img-uploder",t.template='<div class="aj-img-uploader">\n                <img :src="imgSrc" />'+e.fileUploader.template+"\n            </div>",t.imgSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALMAAAB2CAYAAACDMaL0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5RkM5NjQxRDQxQUNFNDExOTcwMkU4MjNEOTc3MDU5RiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4QTc3NDNFQkFDNDIxMUU0QTEzMkQyOUQzOTFFQkMzRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4QTc3NDNFQUFDNDIxMUU0QTEzMkQyOUQzOTFFQkMzRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUZDOTY0MUQ0MUFDRTQxMTk3MDJFODIzRDk3NzA1OUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUZDOTY0MUQ0MUFDRTQxMTk3MDJFODIzRDk3NzA1OUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz77Tka5AAADFElEQVR42uzd0W3aUBiAUVNFlTqBO4VRn/scT1FvQaaAKWCK0hX6FKZghb44Rr2uLGqCL+AY7HMkqyitSHC+XP5riDoryzIZs91ulzAJ5SfngJGYiZnREDNiBjGDmEHMiBnEDGIGMYOYETOIGcQMYkbMIGYQM4gZxIyYQcwgZhAzYgYxg5hBzPDP0wQeYzmR7+Wf6vhdHd+tzDy6z9Xxzco8HZvq2I/sMaXVUYTbX8Q8DasQ8+vIHlcWfkAXNoDTsR9hyMlIH5OYETPjeNYRs1OAmEHM0I8np+BuHK4Xz8PtrdNhZX5UeXUsq+NndfwIt3Onxcr8iCvyIeD6Vbyi8XErtJX54Vbl4sTfFU6PlTlWFv58HfBzt4Xs+rGYo9XheGlYzA9tEebTe2RlNjNHbb6yls3XR/qV/H0337GNDaCYY1flonH7eYCvYRtW4GbQqzDyGHuMGZ3n5PTE1YWPXhFfGnP7vhE0Yu50BeG5Zayogxri6X0jR2PGpaty8c4cfYtX3/LEb3+IuecrA3mH0K+ZnbPG/J0mXvgwZvQ8XpxbMesIY5766xU9O7r/1UBzuJhHbB05huxDoF2u9ebv/JAsGlct+n7WMWbQatFxREg7rvbGDTEPqstmMO0Q8iKMH5lTKuYhV+dzm8E84r68R1nMgyvOrMwx+gg69S0Sc9cV9dSIEBvmMtzPreOzARRzVNBt4WZJ/Asjyws3g0YUMd/UrYJKIzeD9fXrwiZSzLewPArpmqgOq/k84t9n4fOvQ9hWaTHfdDM4D4H1vdLnJ36o7vmXCgbhN03iV+f67ZrXhrQO93WwPTOSLFu+jnrjZ/MXzMpy3P9Lwm63u/cH+JL8/+b841k55hlgZsxgyNW+nqOzDqsyxoy71nwT1NcwdvRxPVrMfPhMnlwwXojZKbjbsQMzM2IGMYOYQcwgZsQMYgYxg5gRMzy+0b+fGTGDmEHMIGYQM2IGMYOYQcyIGcQMYgYxg5gRM4gZxAxiRswgZhAziBnEjJhBzCBmEDNiBjGDmEHMIGbEDGIGMYOYmaY3AQYAXojZOq5J9RcAAAAASUVORK5CYII=",t.imgMaxWidth=0,t.imgMaxHeight=0,t.imgPerfix="",t}e=a.xhr_upload||(a.xhr_upload={}),o={jpeg:"/9j/4",gif:"R0lGOD",png:"iVBORw"},i=e.FileUploader,__extends(n,i),n.prototype.propsFactory=function(){var t=a.apply({imgMaxWidth:{type:Number,default:1920},imgMaxHeight:{type:Number,default:1680},imgPerfix:{type:String}},this.props);return t.accpectFileType={type:String,default:"image/*"},t.limitFileType={type:String,default:"jpg|png|gif|jpeg"},t},n.prototype.beforeCreate=function(){this.$options.template=this.$options.template.replace('<span class="slot"></span>',"<br />最大尺寸：{{imgMaxWidth}}x{{imgMaxHeight}}")},n.prototype.mounted=function(){var t=this;this.fieldValue&&(this.imgSrc=this.imgPerfix+this.fieldValue);var e=this.$el.$("img");e.onload=function(){(e.width>t.imgMaxWidth||e.height>t.imgMaxHeight)&&(t.errMsg="图片大小尺寸不符合要求哦，请裁剪图片重新上传吧~")}},n.prototype.watchFactory=function(){return{imgBase64Str:function(t){var e,i,n=!1;for(e in o)if(~t.indexOf(o[e])){n=!0;break}n?Vue.set(this.errStatus,2,""):(i="亲，改了扩展名我还能认得你不是图片哦",Vue.set(this.errStatus,2,i),a.alert(i))},errMsg:function(t){t||this.readBase64()}}},n.prototype.readBase64=function(){var e=this,t=new FileReader;t.onload=function(t){t=t.target;e.imgSrc=t.result},this.$fileObj&&t.readAsDataURL(this.$fileObj)},t=n,(new(e.ImgFileUploader=t)).register()}(aj=aj||{}),Vue.component("aj-form-popup-upload",{template:html(__makeTemplateObject(['\n        <aj-layer>\n            <h3>图片上传</h3>\n            <p>上传成功后自动插入到正文</p>\n            <aj-img-uploder ref="uploadControl" :action="uploadUrl"></aj-img-uploder>\n        </aj-layer>\n    '],['\n        <aj-layer>\n            <h3>图片上传</h3>\n            <p>上传成功后自动插入到正文</p>\n            <aj-img-uploder ref="uploadControl" :action="uploadUrl"></aj-img-uploder>\n        </aj-layer>\n    '])),data:function(){return{text:{}}},props:{uploadUrl:{type:String,required:!0},imgName:{type:String,required:!1},imgId:{type:Number,required:!1},imgPlace:String},mounted:function(){var t=this.$refs.uploadControl;this.text={maxSize:t.limitSize||600,maxHeight:t.imgMaxHeight,maxWidth:t.imgMaxWidth}},methods:{show:function(t){t&&(this.$refs.uploadControl.uploadOk_callback=t),this.$children[0].show()}}}),Vue.component("aj-form-select",{template:html(__makeTemplateObject(['\n        <select :name="name" class="aj-form-select">\n            <template v-for="value, key, index in options">\n                <option v-if="index === selectedIndex" selected :value="value" >{{key}}</option>\n                <option v-else :value="value" >{{key}}</option>\n            </template>\n        </select>\n    '],['\n        <select :name="name" class="aj-form-select">\n            <template v-for="value, key, index in options">\n                <option v-if="index === selectedIndex" selected :value="value" >{{key}}</option>\n                <option v-else :value="value" >{{key}}</option>\n            </template>\n        </select>\n    '])),props:{name:{type:String,required:!0},options:{type:Object,required:!0},selectedIndex:{type:Number}}}),function(t){(t=(t=t.form||(t.form={})).utils||(t.utils={})).getFormFieldValue=function(t,e){if(t=t.$(e))return t.value;throw"找不到"+e+"元素"},t.selectOption=function(e){this.$el.$("option",function(t){console.log(t.value),t.value==e&&(t.selected=!0)})}}(aj=aj||{}),function(t){!function(t){"validity"in document.createElement("input")||window.alert("不支持 HTML5 表单验证");var e=(n.prototype.checkEveryField=function(){var i=this;document.addEventListener("blur",function(t){var e=t.target;"A"==e.tagName||n.isIgnoreEl(e)||((t=n.check(e))?(i.errorElements.push(t),i.showError(t)):i.removeError(e))},!0)},n.prototype.showError=function(t){var e,i,n=t.el,a=n.id||n.name;a&&(t.el.classList.add("error"),(i=t.el.form.$(".error-message#error-for-"+a))||((i=document.createElement("div")).className="error-message",i.id="error-for-"+a,null!==(e=n.parentNode)&&void 0!==e&&e.insertBefore(i,n.nextSibling)),n.setAttribute("aria-describedby","error-for-"+a),i.innerHTML=t.msg,i.classList.remove("hide"))},n.prototype.removeError=function(t){var e=t.id||t.name;e&&(t.classList.remove("error"),t.removeAttribute("aria-describedby"),(e=t.form.$(".error-message#error-for-"+e))&&(e.innerHTML="",e.classList.add("hide")))},n.isIgnoreEl=function(t){return t.disabled||"file"===t.type||"reset"===t.type||"submit"===t.type||"button"===t.type},n.check=function(t){var e=t.validity;if(!e)throw"浏览器不支持 HTML5 表单验证";if(e.valid)return null;var i={el:t,msg:"无效输入"};return e.valueMissing&&(i.msg="该项是必填项"),e.typeMismatch&&("email"===t.type?i.msg="请输入有效的邮件地址":"url"===t.type?i.msg="请输入一个有效的网址":i.msg="请输入正确的类型"),e.tooShort&&(i.msg="请输入至少"+t.getAttribute("minLength")+"个字符。当前你输入了"+t.value.length+"个字符。"),e.tooLong&&(i.msg="你只能输入最多"+t.getAttribute("maxLength")+"个字符。当前你输入了"+t.value.length+"个字符。"),e.badInput&&(i.msg="请输入数字"),e.stepMismatch&&(i.msg="请选择一个有效值"),e.rangeOverflow&&(i.msg="请选择小于 "+t.getAttribute("max")+" 的值"),e.rangeUnderflow&&(i.msg="请选择大于 "+t.getAttribute("min")+" 的值"),e.patternMismatch&&(i.msg=t.getAttribute("title")||"格式要求不正确"),i},n.onSubmit=function(t){for(var e=t.elements,i=null,n=0,a=e.length;n<a;n++){var o=e[n];this.check(o)&&(i=i||o)}return!i||(i.focus(),!1)},n);function n(t){this.errorElements=[],t.setAttribute("novalidate","true"),this.checkEveryField()}t.Validator=e}(t.form||(t.form={}))}(aj=aj||{});
//# sourceMappingURL=../sourcemap/form.min.js.map

"use strict";var aj;Vue.component("aj-attachment-picture-list",{template:html(__makeTemplateObject(['\n        <table>\n            <tr>\n                <td>\n                    <div class="label">相册图：</div>\n                    <ul>\n                        <li v-for="pic in pics" style="float:left;margin-right:1%;text-align:center;">\n                            <a :href="picCtx + pic.path" target="_blank"><img :src="picCtx + pic.path" style="max-width: 100px;max-height: 100px;" /></a><br />\n                            <a href="###" @click="delPic(pic.id);">删 除</a>\n                        </li>\n                    </ul>\n                </td> \n                <td>\n                    <aj-xhr-upload ref="attachmentPictureUpload" :action="uploadUrl" :is-img-upload="true" :img-place="blankBg"></aj-xhr-upload>\n                </td>\n            </tr>\n        </table>\n    '],['\n        <table>\n            <tr>\n                <td>\n                    <div class="label">相册图：</div>\n                    <ul>\n                        <li v-for="pic in pics" style="float:left;margin-right:1%;text-align:center;">\n                            <a :href="picCtx + pic.path" target="_blank"><img :src="picCtx + pic.path" style="max-width: 100px;max-height: 100px;" /></a><br />\n                            <a href="###" @click="delPic(pic.id);">删 除</a>\n                        </li>\n                    </ul>\n                </td> \n                <td>\n                    <aj-xhr-upload ref="attachmentPictureUpload" :action="uploadUrl" :is-img-upload="true" :img-place="blankBg"></aj-xhr-upload>\n                </td>\n            </tr>\n        </table>\n    '])),props:{picCtx:String,uploadUrl:String,blankBg:String,delImgUrl:String,apiUrl:String},data:function(){return{pics:[]}},mounted:function(){this.getData(),this.$refs.attachmentPictureUpload.uploadOk_callback=this.getData},methods:{getData:function(){var e=this;aj.xhr.get(this.apiUrl,function(t){return e.pics=t.result})},delPic:function(t){var e=this;aj.showConfirm("确定删除相册图片？",function(){aj.xhr.dele(e.delImgUrl+t+"/",function(t){t.isOk&&e.getData()})})}}}),function(t){t.grid||(t.grid={}),Vue.component("aj-simple-grid",{template:html(__makeTemplateObject(['\n            <div>\n                <form action="?" method="GET" style="float:right;">\n                    <input type="hidden" name="searchField" value="content" />\n                    <input type="text" name="searchValue" placeholder="请输入搜索之关键字" class="aj-input" />\n                    <button style="margin-top: 0;" class="aj-btn">搜索</button>\n                </form>\n                <table class="aj-grid ajaxjs-borderTable">\n                    <thead>\n                        <tr>\n                            <th v-for="key in columns" @click="sortBy(key)" :class="{ active: sortKey == key }">\n                                {{ key | capitalize }}\n                                <span class="arrow" :class="sortOrders[key] > 0 ? \'asc\' : \'dsc\'"></span>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="entry in filteredData">\n                            <td v-for="key in columns" v-html="entry[key]"></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        '],['\n            <div>\n                <form action="?" method="GET" style="float:right;">\n                    <input type="hidden" name="searchField" value="content" />\n                    <input type="text" name="searchValue" placeholder="请输入搜索之关键字" class="aj-input" />\n                    <button style="margin-top: 0;" class="aj-btn">搜索</button>\n                </form>\n                <table class="aj-grid ajaxjs-borderTable">\n                    <thead>\n                        <tr>\n                            <th v-for="key in columns" @click="sortBy(key)" :class="{ active: sortKey == key }">\n                                {{ key | capitalize }}\n                                <span class="arrow" :class="sortOrders[key] > 0 ? \'asc\' : \'dsc\'"></span>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="entry in filteredData">\n                            <td v-for="key in columns" v-html="entry[key]"></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        '])),props:{data:Array,columns:Array,filterKey:String},data:function(){var e={};return this.columns.forEach(function(t){return e[t]=1}),{sortKey:"",sortOrders:e}},computed:{filteredData:function(){var i=this.sortKey,n=this.filterKey&&this.filterKey.toLowerCase(),a=this.sortOrders[i]||1,t=this.data;return n&&(t=t.filter(function(e){return Object.keys(e).some(function(t){return-1<String(e[t]).toLowerCase().indexOf(n)})})),i&&(t=t.slice().sort(function(t,e){return((t=t[i])===(e=e[i])?0:e<t?1:-1)*a})),t}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]}}})}(aj=aj||{}),function(i){var t;(t=i.list||(i.list={})).datastore={props:{apiUrl:{type:String,required:!0},hrefStr:{type:String,required:!1},isPage:{type:Boolean,default:!0},initPageSize:{type:Number,required:!1,default:9},autoLoad:{type:Boolean,default:!0},initBaseParam:{type:Object,default:function(){return{}}},pageParamNames:{type:Array,default:function(){return["start","limit"]}},onLoad:Function},data:function(){return{baseParam:this.initBaseParam,result:[],extraParam:{},realApiUrl:this.apiUrl,pageSize:this.initPageSize,total:0,totalPage:0,pageStart:0,currentPage:0}},methods:{jumpPageBySelect:function(t){t=t.target,t=t.options[t.selectedIndex].value;this.pageStart=(Number(t)-1)*this.pageSize,this.getData()},onPageSizeChange:function(t){this.pageSize=Number(t.target.value),this.count(),this.getData()},count:function(){var t=this.total/this.pageSize,e=this.total%this.pageSize;this.totalPage=parseInt(String(0==e?t:1+t)),this.currentPage=parseInt(this.pageStart/this.pageSize+1)},previousPage:function(){this.pageStart-=this.pageSize,this.currentPage=parseInt(this.pageStart/this.pageSize+1),this.getData()},nextPage:function(){this.pageStart+=this.pageSize,this.currentPage=this.pageStart/this.pageSize+1,this.getData()}}},Vue.component("aj-list",{mixins:[t.datastore],template:html(__makeTemplateObject(['\n\t\t\t<div class="aj-list">\n\t\t\t\t<slot name="header" v-if="total != 0"></slot>\n\t\t\t\t<ul v-if="showDefaultUi && (total != 0)">\n\t\t\t\t\t<li v-for="(item, index) in result">\n\t\t\t\t\t\t<slot v-bind="item">\n\t\t\t\t\t\t\t<a href="#" @click="show(item.id, index, $event)" :id="item.id">{{item.name}}</a>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="no-data" v-show="total == 0">未有任何数据</div>\n\t\t\t\t<footer v-if="isPage" class="pager">\n\t\t\t\t\t<a v-if="pageStart > 0" href="#" @click="previousPage">上一页</a>\n\t\t\t\t\t<a v-if="(pageStart > 0 ) && (pageStart + pageSize < total)"\n\t\t\t\t\t\tstyle="text-decoration: none;">&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</a>\n\t\t\t\t\t<a v-if="pageStart + pageSize < total" href="#" @click="nextPage">下一页</a>\n\t\t\t\t\t<a href="javascript:;" @click="getData"><i class="fa fa-refresh" aria-hidden="true"></i> 刷新</a>\n\t\t\t\t\t<input type="hidden" name="start" :value="pageStart" />\n\t\t\t\t\t页数：{{currentPage}}/{{totalPage}} 记录数：{{pageStart}}/{{total}}\n\t\t\t\t\t每页记录数： <input size="2" title="输入一个数字确定每页记录数" type="text" :value="pageSize" @change="onPageSizeChange" />\n\t\t\t\t\t跳转：\n\t\t\t\t\t<select @change="jumpPageBySelect">\n\t\t\t\t\t\t<option :value="n" v-for="n in totalPage">{{n}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</footer>\n\t\t\t\t<div v-show="!!autoLoadWhenReachedBottom" class="buttom"></div>\n\t\t\t</div>\n\t\t'],['\n\t\t\t<div class="aj-list">\n\t\t\t\t<slot name="header" v-if="total != 0"></slot>\n\t\t\t\t<ul v-if="showDefaultUi && (total != 0)">\n\t\t\t\t\t<li v-for="(item, index) in result">\n\t\t\t\t\t\t<slot v-bind="item">\n\t\t\t\t\t\t\t<a href="#" @click="show(item.id, index, $event)" :id="item.id">{{item.name}}</a>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="no-data" v-show="total == 0">未有任何数据</div>\n\t\t\t\t<footer v-if="isPage" class="pager">\n\t\t\t\t\t<a v-if="pageStart > 0" href="#" @click="previousPage">上一页</a>\n\t\t\t\t\t<a v-if="(pageStart > 0 ) && (pageStart + pageSize < total)"\n\t\t\t\t\t\tstyle="text-decoration: none;">&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</a>\n\t\t\t\t\t<a v-if="pageStart + pageSize < total" href="#" @click="nextPage">下一页</a>\n\t\t\t\t\t<a href="javascript:;" @click="getData"><i class="fa fa-refresh" aria-hidden="true"></i> 刷新</a>\n\t\t\t\t\t<input type="hidden" name="start" :value="pageStart" />\n\t\t\t\t\t页数：{{currentPage}}/{{totalPage}} 记录数：{{pageStart}}/{{total}}\n\t\t\t\t\t每页记录数： <input size="2" title="输入一个数字确定每页记录数" type="text" :value="pageSize" @change="onPageSizeChange" />\n\t\t\t\t\t跳转：\n\t\t\t\t\t<select @change="jumpPageBySelect">\n\t\t\t\t\t\t<option :value="n" v-for="n in totalPage">{{n}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</footer>\n\t\t\t\t<div v-show="!!autoLoadWhenReachedBottom" class="buttom"></div>\n\t\t\t</div>\n\t\t'])),props:{showDefaultUi:{type:Boolean,default:!0},isShowFooter:{type:Boolean,default:!0},autoLoadWhenReachedBottom:{type:String,default:""},isDataAppend:{type:Boolean,default:!1}},mounted:function(){this.autoLoad&&this.getData(),this.autoLoadWhenReachedBottom},methods:{foo:function(){window.alert(9)},getData:function(){var e=this;this.lastRequestParam={},i.apply(this.lastRequestParam,this.baseParam),i.apply(this.lastRequestParam,this.extraParam),function(){var t={};t[this.pageParamNames[0]]=this.pageStart,t[this.pageParamNames[1]]=this.pageSize,this.isPage&&i.apply(this.lastRequestParam,t)}.call(this),i.xhr.get(this.apiUrl,this.onLoad||function(t){t.result&&(void 0===t.total&&i.alert("JSON 缺少 total 字段"),0!=t.total&&0!=t.result.length||i.alert("没有找到任何记录"),e.result=t.result,e.isPage&&(e.total=t.total,e.count())),e.$emit("pager-result",e.result)},this.lastRequestParam)},reset:function(){this.total=this.totalPage=this.pageStart=this.currentPage=0,this.pageSize=this.initPageSize},doAjaxGet:function(t){this.isPage?(this.total=t.total,this.result=this.isDataAppend?this.result.concat(t.result):t.result,this.count()):this.result=t.result},onBaseParamChange:function(t){i.apply(this.baseParam,t),this.pageStart=0,this.getData()}},watch:{baseParam:function(){this.getData()}}})}(aj=aj||{}),Vue.component("aj-cell-renderer",{props:{html:{type:String,default:""},form:Object},render:function(t){return-1==this.html.indexOf("<aj-")?this._v(this.html):t(Vue.extend({template:this.html,props:{form:Object}}),{props:{form:this.form}})}}),Vue.component("aj-grid-select-row",{template:'<a href="#" @click="fireSelect">选择</a>',props:{type:{type:String,required:!0}},methods:{fireSelect:function(){this.BUS.$emit("on-"+this.type+"-select",this.$parent.form)}}}),Vue.component("aj-grid-open-link",{template:'<a href="#" @click="fireSelect"><i class="fa fa-external-link"></i> 详情</a>',methods:{fireSelect:function(){this.BUS.$emit("on-open-link-clk",this.$parent.form)}}}),function(i){var t;(t=(t=i.list||(i.list={})).grid||(t.grid={})).SectionModel={data:function(){return{isSelectAll:!1,selected:{},selectedTotal:0,maxRows:0}},mounted:function(){this.BUS&&this.BUS.$on("on-delete-btn-clk",this.batchDelete)},methods:{batchDelete:function(){var e=this;0<this.selectedTotal?i.showConfirm("确定批量删除记录？",function(){for(var t in e.selected)i.xhr.dele(e.apiUrl+"/"+t+"/",function(t){console.log(t)})}):i.alert("未选择记录")},selectAll:function(){var e=this;this.$el.$("table .selectCheckbox input[type=checkbox]",this.selectedTotal===this.maxRows?function(t){t.checked=!1;t=t.dataset.id;if(!t)throw"需要提供 id 在 DOM 属性中";e.$set(e.selected,Number(t),!1)}:function(t){t.checked=!0;t=t.dataset.id;if(!t)throw"需要提供 id 在 DOM 属性中";e.$set(e.selected,Number(t),!0)})}},watch:{selected:{handler:function(t){var e,i=0;for(e in this.selected)!1===this.selected[e]?delete this.selected[e]:i++;(this.selectedTotal=i)===this.maxRows?this.$el.$(".top-checkbox").checked=!0:this.$el.$(".top-checkbox").checked=!1},deep:!0}}},Vue.component("aj-grid",{mixins:[t.SectionModel],template:'<div class="aj-grid"><slot v-bind="this"></slot></div>',props:{apiUrl:{type:String,required:!0}},data:function(){return{list:[],updateApi:null,showAddNew:!1}},mounted:function(){var e=this;this.$children.forEach(function(t){switch(t.$options._componentTag){case"aj-entity-toolbar":e.$toolbar=t;break;case"aj-grid-inline-edit-row":e.$row=t;break;case"aj-list":e.$store=t}}),this.$store.$on("pager-result",function(t){console.log(t),e.list=t,e.maxRows=t.length})},methods:{onCreateClk:function(){this.showAddNew=!0},reload:function(){this.$store.getData()},onDirtySaveClk:function(){var e=this,t=function(){var e=[];return this.list.forEach(function(t){t.dirty&&e.push(t)}),e}.call(this);t.length?t.forEach(function(t){i.xhr.put(e.apiUrl+"/"+t.id+"/",function(t){t.isOk&&(e.list.forEach(function(t){t.dirty&&delete t.dirty}),i.msg.show("修改记录成功"))},t.dirty)}):i.msg.show("没有修改过的记录")}}})}(aj=aj||{}),Vue.component("aj-grid-inline-edit-row-create",{template:html(__makeTemplateObject(['\n        <tr class="aj-grid-inline-edit-row isEditMode">\n            <td><input type="checkbox" /></td>\n            <td></td>\n            <td v-for="key in columns" style="padding:0" class="cell" @dblclick="dbEdit">\n                <aj-select v-if="key != null && key.type == \'select\'" :name="key.name" :options="key.data"\n                    style="width: 200px;"></aj-select>\n                <input v-if="key != null && !key.type" type="text" size="0" :name="key" />\n            </td>\n            <td class="control">\n                <span @click="addNew"><img :src="ajResources.commonAsset + \'/icon/update.gif\'" />新增</span>\n                <span @click="$parent.showAddNew = false"><img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 撤销</span>\n            </td>\n        </tr>\n    '],['\n        <tr class="aj-grid-inline-edit-row isEditMode">\n            <td><input type="checkbox" /></td>\n            <td></td>\n            <td v-for="key in columns" style="padding:0" class="cell" @dblclick="dbEdit">\n                <aj-select v-if="key != null && key.type == \'select\'" :name="key.name" :options="key.data"\n                    style="width: 200px;"></aj-select>\n                <input v-if="key != null && !key.type" type="text" size="0" :name="key" />\n            </td>\n            <td class="control">\n                <span @click="addNew"><img :src="ajResources.commonAsset + \'/icon/update.gif\'" />新增</span>\n                <span @click="$parent.showAddNew = false"><img :src="ajResources.commonAsset + \'/icon/delete.gif\'" /> 撤销</span>\n            </td>\n        </tr>\n    '])),props:{columns:{type:Array,required:!0},createApi:{type:String,required:!1,default:"."}},methods:{addNew:function(){var e=this,i={};this.$el.$("*[name]",function(t){return i[t.name]=t.value}),this.BUS.$emit("before-add-new",i),aj.xhr.post(this.createApi,function(t){t&&t.isOk?(aj.msg.show("新建实体成功"),e.$el.$("input[name]",function(t){t.value=""}),e.$parent.reload(),e.$parent.showAddNew=!1):t&&t.msg&&aj.msg.show(t.msg)},i)},dbEdit:function(t){this.isEditMode=!this.isEditMode;var e=t.target;"INPUT"!==e.tagName&&(e=e.$("input")),setTimeout(function(){return e&&e.focus()},200)}}}),function(i){var t;function e(l){return function(t){for(var e,i=this.$parent.list,n=0,a=i.length;n<a;n++)if(this.id&&String(i[n].id)==this.id){e=i[n];break}if(!e)throw"找不到匹配的实体！目标 id: "+this.id;e.dirty||(e.dirty={id:this.id}),e.dirty[l]=t}}(t=i.list||(i.list={})).grid||(t.grid={}),Vue.component("aj-grid-inline-edit-row",{template:html(__makeTemplateObject(['\n            <tr class="aj-grid-inline-edit-row" :class="{editing: isEditMode}">\n                <td v-if="showCheckboxCol" class="selectCheckbox">\n                    <input type="checkbox" @change="selectCheckboxChange" :data-id="id" />\n                </td>\n                <td v-if="showIdCol">{{id}}</td>\n                <td v-for="cellRenderer in columns" :style="styleModifly" class="cell" @dblclick="dbEdit">\n                    <aj-cell-renderer v-if="!isEditMode" :html="renderCell(data, cellRenderer)" :form="data"></aj-cell-renderer>\n                    <aj-cell-renderer v-if="isEditMode && cellRenderer && cellRenderer.editMode"\n                        :html="rendererEditMode(data, cellRenderer)" :form="data">\n                    </aj-cell-renderer>\n                    <input type="text" v-if="canEdit(cellRenderer)" size="0" v-model="data[cellRenderer]" />\n                </td>\n                <td v-if="showControl" class="control">\n                    <aj-cell-renderer v-if="controlUi" :html="controlUi" :form="data"></aj-cell-renderer>\n                    <span @click="onEditClk" class="edit"><i class="fa fa-pencil" aria-hidden="true"></i>\n                        {{!isEditMode ? "编辑" : "确定"}}</span>\n                    <span @click="dele(id)" class="delete"><i class="fa fa-times" aria-hidden="true"></i> 删除</span>\n                </td>\n            </tr>\n        '],['\n            <tr class="aj-grid-inline-edit-row" :class="{editing: isEditMode}">\n                <td v-if="showCheckboxCol" class="selectCheckbox">\n                    <input type="checkbox" @change="selectCheckboxChange" :data-id="id" />\n                </td>\n                <td v-if="showIdCol">{{id}}</td>\n                <td v-for="cellRenderer in columns" :style="styleModifly" class="cell" @dblclick="dbEdit">\n                    <aj-cell-renderer v-if="!isEditMode" :html="renderCell(data, cellRenderer)" :form="data"></aj-cell-renderer>\n                    <aj-cell-renderer v-if="isEditMode && cellRenderer && cellRenderer.editMode"\n                        :html="rendererEditMode(data, cellRenderer)" :form="data">\n                    </aj-cell-renderer>\n                    <input type="text" v-if="canEdit(cellRenderer)" size="0" v-model="data[cellRenderer]" />\n                </td>\n                <td v-if="showControl" class="control">\n                    <aj-cell-renderer v-if="controlUi" :html="controlUi" :form="data"></aj-cell-renderer>\n                    <span @click="onEditClk" class="edit"><i class="fa fa-pencil" aria-hidden="true"></i>\n                        {{!isEditMode ? "编辑" : "确定"}}</span>\n                    <span @click="dele(id)" class="delete"><i class="fa fa-times" aria-hidden="true"></i> 删除</span>\n                </td>\n            </tr>\n        '])),props:{rowData:{type:Object,required:!0},showIdCol:{type:Boolean,default:!0},columns:Array,showCheckboxCol:{type:Boolean,default:!0},showControl:{type:Boolean,default:!0},filterField:Array,enableInlineEdit:{type:Boolean,default:!1},deleApi:String,controlUi:String},data:function(){return{id:this.rowData.id,data:this.rowData,isEditMode:!1}},mounted:function(){for(var t in this.data)this.$watch("data."+t,e.call(this,t))},computed:{filterData:function(){var e=JSON.parse(JSON.stringify(this.data));return delete e.id,delete e.dirty,this.filterField&&this.filterField.length&&this.filterField.forEach(function(t){return delete e[t]}),e},styleModifly:function(){return{padding:this.isEditMode?0:""}}},methods:{canEdit:function(t){return this.isEditMode&&!function(t){if(this.filterField&&this.filterField.length)for(var e=0,i=this.filterField.length;e<i;e++)if(this.filterField[e]==t)return!0;return!1}.call(this,t)&&!t.editMode},renderCell:function(t,e){var i;return""===e?"":"string"==typeof e?(i=t[e])+"":"function"==typeof e?i=e(t):("object"==typeof e&&e.renderer&&(i=e.renderer(t)),(null===i?"":i)+"")},onEditClk:function(){this.enableInlineEdit?this.isEditMode=!this.isEditMode:this.$parent.onEditClk&&this.$parent.onEditClk(this.id)},rendererEditMode:function(t,e){return"string"==typeof e?e.toString():e.editMode&&"function"==typeof e.editRenderer?e.editRenderer(t):"NULL"},dbEdit:function(t){var e;this.enableInlineEdit&&(this.isEditMode=!this.isEditMode,this.isEditMode&&(e=t.target,setTimeout(function(){"INPUT"!==e.tagName&&(e=e.$("input")),e&&e.focus()},200)))},selectCheckboxChange:function(t){var e=t.target,t=this.$parent;e.checked?t.$set(t.selected,this.id,!0):t.$set(t.selected,this.id,!1)},dele:function(t){var e=this;i.showConfirm("确定删除记录 id:["+t+"] 吗？",function(){return i.xhr.dele(e.$parent.apiUrl+"/"+t+"/",function(t){t.isOk&&(i.msg.show("删除成功"),e.$parent.reload())})})}}})}(aj=aj||{}),Vue.component("aj-entity-toolbar",{template:html(__makeTemplateObject(['\n        <div class="toolbar"> \n            <form v-if="search" class="right">\n                <input type="text" name="keyword" placeholder="请输入关键字" size="12" />\n                <button @click="doSearch"><i class="fa fa-search" style="color:#417BB5;"></i>搜索</button>\n            </form>\n            <aj-form-between-date v-if="betweenDate" class="right"></aj-form-between-date>\n            <ul>\n                <li v-if="create" @click="$emit(\'on-create-btn-clk\')"><i class="fa fa-plus" style="color:#0a90f0;"></i> 新建</li>\n                <li v-if="save" @click="$emit(\'on-save-btn-clk\')"><i class="fa fa-floppy-o" style="color:rgb(205, 162, 4);"></i> 保存</li>\n                <li v-if="deleBtn" @click="$emit(\'on-delete-btn-clk\')"><i class="fa fa-trash-o" style="color:red;"></i> 删除</li>\n                <li v-if="excel"><i class="fa fa-file-excel-o" style="color:green;"></i> 导出</li>\n                <slot></slot>\n                \n            </ul>\n        </div>\n    '],['\n        <div class="toolbar"> \n            <form v-if="search" class="right">\n                <input type="text" name="keyword" placeholder="请输入关键字" size="12" />\n                <button @click="doSearch"><i class="fa fa-search" style="color:#417BB5;"></i>搜索</button>\n            </form>\n            <aj-form-between-date v-if="betweenDate" class="right"></aj-form-between-date>\n            <ul>\n                <li v-if="create" @click="$emit(\'on-create-btn-clk\')"><i class="fa fa-plus" style="color:#0a90f0;"></i> 新建</li>\n                <li v-if="save" @click="$emit(\'on-save-btn-clk\')"><i class="fa fa-floppy-o" style="color:rgb(205, 162, 4);"></i> 保存</li>\n                <li v-if="deleBtn" @click="$emit(\'on-delete-btn-clk\')"><i class="fa fa-trash-o" style="color:red;"></i> 删除</li>\n                <li v-if="excel"><i class="fa fa-file-excel-o" style="color:green;"></i> 导出</li>\n                <slot></slot>\n                \n            </ul>\n        </div>\n    '])),props:{betweenDate:{type:Boolean,default:!0},create:{type:Boolean,default:!0},save:{type:Boolean,default:!0},excel:{type:Boolean,default:!1},deleBtn:{type:Boolean,default:!0},search:{type:Boolean,default:!0}},methods:{doSearch:function(t){t.preventDefault(),aj.apply(this.$parent.$store.extraParam,{keyword:aj.form.utils.getFormFieldValue(this.$el,"input[name=keyword]")}),this.$parent.$store.reload()}}}),function(i){var t,n,e;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="aj-tree-like-select",t.template='<select :name="fieldName" class="aj-select" @change="onSelected" style="min-width:180px;"></select>',t.props={fieldName:{type:String,required:!1,default:"catalogId"},apiUrl:{type:String,default:function(){return i.ctx+"/admin/tree-like/"}},isAutoLoad:{type:Boolean,default:!0},isAutoJump:Boolean,initFieldValue:String},t.apiUrl="",t.isAutoJump=!1,t.isAutoLoad=!1,t.fieldName="",t.fieldValue="",t.initFieldValue="",t}t=i.list||(i.list={}),n=t.tree||(t.tree={}),e=i.VueComponent,__extends(a,e),a.prototype.data=function(){return{fieldValue:this.initFieldValue}},a.prototype.mounted=function(){this.isAutoLoad&&this.getData()},a.prototype.onSelected=function(t){var e=t.target;this.fieldValue=e.selectedOptions[0].value,this.isAutoJump?location.assign("?"+this.fieldName+"="+this.fieldValue):this.BUS&&this.BUS.$emit("aj-tree-catelog-select-change",t,this)},a.prototype.getData=function(){var e=this;i.xhr.get(this.apiUrl,function(t){n.rendererOption([{id:0,name:"请选择分类"}].concat(t.result),e.$el,e.fieldValue,{makeAllOption:!1}),e.fieldValue&&i.form.utils.selectOption.call(e,e.fieldValue)})},t=a,(new(n.TreeLikeSelect=t)).register()}(aj=aj||{}),function(t){!function(t){function r(t,e){for(var i=0,n=t.length;i<n;i++){var a=t[i];if(a.id==e)return a;if(a.children){a=r(a.children,e);if(null!=a)return a}}return null}function o(t,e){for(var i in t){if(i==e)return t[i];var n=t[i].children;if(n)for(var a=0,l=n.length;a<l;a++){var r=o(n[a],e);if(null!=r)return r}}return null}t.makeTree=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var a,l=t[i];-1===l.pid?e.push(l):(a=r(e,l.pid))?(a.children||(a.children=[]),a.children.push(l)):console.log("parent not found!")}return e},t.findParentInArray=r,t.findParentInMap=o;var s=[];function d(t,e){for(var i in s.push(t),t){t[i].level=s.length,e(t[i],i);var n=t[i].children;if(n)for(var a=0,l=n.length;a<l;a++)d(n[a],e)}s.pop()}function l(t){if(!t)return{};for(var e={},i=0,n=t.length;i<n;i++){var a,l=t[i],r=o(e,l.pid+"");null==r?e[l.id]=l:((a={})[l.id]=l,r.children||(r.children=[]),r.children.push(a))}return e}t.output=d,t.toTree=l,t.rendererOption=function(t,e,n,i){i&&i.makeAllOption&&((i=document.createElement("option")).value=i.innerHTML="全部分类",e.appendChild(i));var a=document.createDocumentFragment();d(l(t),function(t,e){var i=document.createElement("option");i.value=e,n&&n==e&&(i.selected=!0),i.dataset.pid=t.pid+"",i.innerHTML=new Array(5*t.level).join("&nbsp;")+(1==t.level?"":"└─")+t.name,a.appendChild(i)}),e.appendChild(a)}}((t=t.list||(t.list={})).tree||(t.tree={}))}(aj=aj||{}),function(t){var e,i,n;function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="aj-tree-item",t.template=html(__makeTemplateObject(['\n            <li>\n                <div :class="{bold: isFolder, node: true}" @click="toggle">\n                    <span>········</span>{{model.name}}\n                    <span v-if="isFolder">[{{open ? \'-\' : \'+\'}}]</span>\n                </div>\n                <ul v-show="open" v-if="isFolder" :class="{show: open}">\n                    <aj-tree-item class="item" v-for="(model, index) in model.children" :key="index" :model="model">\n                    </aj-tree-item>\n                    <li v-if="allowAddNode" class="add" @click="addChild">+</li>\n                </ul>\n            </li>\n        '],['\n            <li>\n                <div :class="{bold: isFolder, node: true}" @click="toggle">\n                    <span>········</span>{{model.name}}\n                    <span v-if="isFolder">[{{open ? \'-\' : \'+\'}}]</span>\n                </div>\n                <ul v-show="open" v-if="isFolder" :class="{show: open}">\n                    <aj-tree-item class="item" v-for="(model, index) in model.children" :key="index" :model="model">\n                    </aj-tree-item>\n                    <li v-if="allowAddNode" class="add" @click="addChild">+</li>\n                </ul>\n            </li>\n        '])),t.props={model:Object,allowAddNode:{type:Boolean,default:!1}},t.model={children:[]},t.open=!1,t.allowAddNode=!1,t.computed={isFolder:function(){return!(!this.model.children||!this.model.children.length)}},t}e=t.list||(t.list={}),i=e.tree||(e.tree={}),n=t.VueComponent,__extends(a,n),a.prototype.toggle=function(){this.isFolder&&(this.open=!this.open),this.BUS&&this.BUS.$emit("tree-node-click",this.model)},a.prototype.changeType=function(){this.isFolder||(Vue.set(this.model,"children",[]),this.addChild(),this.open=!0)},a.prototype.addChild=function(){this.model.children.push({name:"new stuff"})},e=a,(new(i.TreeItem=e)).register()}(aj=aj||{}),function(t){var e,i,n;function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="aj-tree",t.template='<ul class="aj-tree"><aj-tree-item :model="treeData"></aj-tree-item></ul>',t.props={apiUrl:String,topNodeName:String},t.topNodeName="",t.apiUrl="",t.isAutoLoad=!1,t.treeData={name:t.topNodeName||"TOP",children:null},t}e=t.list||(t.list={}),i=e.tree||(e.tree={}),n=t.VueComponent,__extends(a,n),a.prototype.getData=function(){var e=this;t.xhr.get(this.apiUrl,function(t){return e.treeData.children=i.makeTree(t.result)}),this.BUS&&this.BUS.$on("treenodeclick",function(t){return e.$emit("treenodeclick",t)})},a.prototype.mounted=function(){this.getData()},e=a,(new(i.Tree=e)).register()}(aj=aj||{});
//# sourceMappingURL=../sourcemap/list.min.js.map

