<html>

<head>
    <meta charset="utf-8" />
    <title>AJAXJS Web UI Demo</title>
    <link rel="stylesheet" type="text/css" href="../../dist/css/base.css" />
    <link rel="stylesheet" type="text/css" href="../common/demo.css" />
    <link rel="stylesheet" type="text/css" href="../../dist/css/form/calendar.css" />
    <link rel="stylesheet" type="text/css" href="../../dist/css/list/grid.css" />
    <link crossorigin="anonymous" integrity="sha384-FckWOBo7yuyMS7In0aXZ0aoVvnInlnFMwCv77x9sZpFgOonQgnBj1uLwenWVtsEj"
        href="https://lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
    <script src="https://lib.baomitu.com/vue/2.6.11/vue.js"></script>
</head>

<body>
    <div class="content">
        <h2>表格 Grid</h2>
        <p>下面是简单不分页的列表。</p>

        <div class="grid">
            <aj-grid api-url="grid.json">
                <template slot-scope="grid">
                    <div class="box padding">税率用于定义各税种的税率</div>
                    <div class="box">
                        <!-- 菜单工具栏-->
                        <aj-entity-toolbar @on-create-btn-clk="grid.showAddNew = !grid.showAddNew"
                            @on-save-btn-clk="grid.onDirtySaveClk"></aj-entity-toolbar>
                    </div>

                    <div class="main-panel">
                        <div class="theader-bg"></div>
                        <table>
                            <thead>
                                <tr>
                                    <th><input type="checkbox" class="top-checkbox" @click="grid.selectAll" /> </th>
                                    <th>#</th>
                                    <th>税种</th>
                                    <th>税率%</th>
                                    <th>创建日期</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tr v-show="grid.showAddNew" is="aj-grid-inline-edit-row-create"
                                :columns="['name', 'rate',null]" create-api="."></tr>
                            <tr is="aj-grid-inline-edit-row" v-for="value in grid.list" v-bind:key="value.id"
                                :row-data="value" :show-id-col="false" :columns="gridCols()" :enable-inline-edit="true"
                                :filter-field="['id', 'createDate']" dele-api=".">
                            </tr>
                        </table>
                    </div>
                    <!-- 菜单工具栏-->
                    <div class="box bottom-bar padding">
                        <aj-list class="right" :api-url="grid.apiUrl" :show-default-ui="false"></aj-list>
                        <div class="stateMsg" v-show="grid.selectedTotal != 0">已选择[{{grid.selectedTotal}}]笔记录</div>
                    </div>
                </template>
            </aj-grid>


        </div>
    </div>

    <script src="../../dist/base/prototype.js"></script>
    <script src="../../dist/base/aj.js"></script>
    <script src="../../dist/base/xhr.js"></script>

    <script src="../../dist/form/calendar.js"></script>
    <script src="../../dist/form/calendar-input.js"></script>
    <script src="../../dist/form/between-date.js"></script>
    <script src="../../dist/list/list.js"></script>
    <script src="../../dist/list/grid/toolbar.js"></script>
    <script src="../../dist/list/grid/inline-edit-row-create.js"></script>
    <script src="../../dist/list/grid/inline-edit-row.js"></script>
    <script src="../../dist/list/grid/cell.js"></script>
    <script src="../../dist/list/grid/grid.js"></script>
    <script>
        Vue.use(function (Vue) {
            Vue.prototype.ajResources = {
                ctx: '',
                imgPerfix: '', // 图片云存储前缀
                commonAsset: ''
            };
            Vue.prototype.BUS = new Vue();
        });

        VUE = new Vue({
            el: '.grid',
            methods: {
                gridCols() {
                    return ['id', 'name', 'rate', data => new Date(data.createDate).format("yyyy-MM-dd")];
                }
            }
        });
    </script>
</body>

</html>