<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title>文件拖动排序</title>
    <script src="./dragSort.js"></script>
    <style media="screen">
        #drag-div {
            display: block;
            margin: 10px 50px;
            width: 520px;
            border: 1px solid #CCC;
            overflow: hidden;
        }

        .drag-item {
            display: block;
            position: relative;
            float: left;
            width: 120px;
            height: 120px;
            border: 1px solid #CCC;
            margin: 10px;
        }

        .close {
            border: 1px solid red;
            position: absolute;
            right: 0;
            width: 17px;
            height: 17px;
            z-index: 1;
            text-align: center;
            line-height: 17px;
        }

        .drag-pic {
            max-width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
        }
    </style>

</head>

<body>
    <button onclick="add()" style="margin: 52px 0 0 52px;"> 新增 </button>

    <div id="drag-div">
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/1.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/2.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/3.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/4.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/5.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/6.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/7.jpg" class="drag-pic" draggable="false">
        </div>
        <div class="drag-item" draggable="true">
            <div class="close" onclick="del(event)">x</div>
            <img src="./img/8.jpg" class="drag-pic" draggable="false">
        </div>
    </div>
</body>
<script type="text/javascript">
    /*
    https://fengkui.net/article/154

    再我们上传完图片时，经常不是我们需要的顺序，
    这时，我们就需要对上传图片进行排序处理，
    这里 我们 基本 ondragstart 与 ondragover 事件，
    进行拖拽排序处理成我们所需的顺序，
    （本文已封装 dragSort.js 插件，可直接使用）
    定义和用法

    1、ondragstart 事件在用户开始拖动元素或选择的文本时触发。
    2、ondragover 事件在可拖动元素或选取的文本正在拖动到放置目标时触发 （拖放是 HTML5 中非常常见的功能。 更多信息可以查看我们 HTML 教程中的 HTML5 拖放。） 注意： 为了让元素可拖动，需要使用 HTML5 （draggable=true/false/auto） 属性。
    提示： 链接和图片默认是可拖动的，不需要 draggable 属性。

    */
    var dragSort = new dragSort({
        id: 'drag-div', // 拖动父级div框的ID
        drag: 'drag-item', //拖动元素
        times: '1000', // 动画时长（默认一秒钟）
    })

    function add(event) {
        var node = document.getElementById('drag-div')
        var wrapper = document.createElement('div');
        wrapper.innerHTML = '<div class="drag-item" draggable="true"> <div class="close" onclick="del(event)">x</div> <img src="./img/9.jpg" class="drag-pic" draggable="false"> </div>';
        var html = wrapper.firstChild;
        node.appendChild(html)

    }

    function del(event) {
        // 点击删除当前元素的父级元素
        event.currentTarget.parentElement.parentElement.removeChild(event.currentTarget.parentElement);
    }

</script>

</html>