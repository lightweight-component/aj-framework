{"version":3,"file":"../dist/list.min.js","sources":["list.min.js"],"sourcesContent":["\"use strict\";\n\n/**\n * 相册列表\n */\nVue.component('aj-attachment-picture-list', {\n    template: html(__makeTemplateObject([\"\\n        <table>\\n            <tr>\\n            <td>\\n                <div class=\\\"label\\\">\\u76F8\\u518C\\u56FE\\uFF1A</div>\\n                <ul>\\n                    <li v-for=\\\"pic in pics\\\" style=\\\"float:left;margin-right:1%;text-align:center;\\\">\\n                        <a :href=\\\"picCtx + pic.path\\\" target=\\\"_blank\\\"><img :src=\\\"picCtx + pic.path\\\" style=\\\"max-width: 100px;max-height: 100px;\\\" /></a><br />\\n                        <a href=\\\"###\\\" @click=\\\"delPic(pic.id);\\\">\\u5220 \\u9664</a>\\n                    </li>\\n                </ul>\\n            </td>\\n            <td>\\n                <aj-xhr-upload ref=\\\"attachmentPictureUpload\\\" :action=\\\"uploadUrl\\\" :is-img-upload=\\\"true\\\" :img-place=\\\"blankBg\\\"></aj-xhr-upload>\\n            </td></tr>\\n        </table>\\n    \"], [\"\\n        <table>\\n            <tr>\\n            <td>\\n                <div class=\\\"label\\\">\\u76F8\\u518C\\u56FE\\uFF1A</div>\\n                <ul>\\n                    <li v-for=\\\"pic in pics\\\" style=\\\"float:left;margin-right:1%;text-align:center;\\\">\\n                        <a :href=\\\"picCtx + pic.path\\\" target=\\\"_blank\\\"><img :src=\\\"picCtx + pic.path\\\" style=\\\"max-width: 100px;max-height: 100px;\\\" /></a><br />\\n                        <a href=\\\"###\\\" @click=\\\"delPic(pic.id);\\\">\\u5220 \\u9664</a>\\n                    </li>\\n                </ul>\\n            </td>\\n            <td>\\n                <aj-xhr-upload ref=\\\"attachmentPictureUpload\\\" :action=\\\"uploadUrl\\\" :is-img-upload=\\\"true\\\" :img-place=\\\"blankBg\\\"></aj-xhr-upload>\\n            </td></tr>\\n        </table>\\n    \"])),\n    props: {\n        picCtx: String,\n        uploadUrl: String,\n        blankBg: String,\n        delImgUrl: String,\n        apiUrl: String\n    },\n    data: function () {\n        return {\n            pics: []\n        };\n    },\n    mounted: function () {\n        this.getData();\n        this.$refs.attachmentPictureUpload.uploadOk_callback = this.getData;\n    },\n    methods: {\n        getData: function () {\n            var _this = this;\n            aj.xhr.get(this.apiUrl, function (j) { return _this.pics = j.result; });\n        },\n        delPic: function (picId) {\n            var _this = this;\n            aj.showConfirm(\"确定删除相册图片？\", function () {\n                aj.xhr.dele(_this.delImgUrl + picId + \"/\", function (j) {\n                    if (j.isOk)\n                        _this.getData(); // 刷新\n                });\n            });\n        }\n    }\n});\n\n\"use strict\";\nVue.component('aj-simple-grid', {\n    template: \"\\n        <div>\\n            <form action=\\\"?\\\" method=\\\"GET\\\" style=\\\"float:right;\\\">\\n                <input type=\\\"hidden\\\" name=\\\"searchField\\\" value=\\\"content\\\" />\\n                <input type=\\\"text\\\" name=\\\"searchValue\\\" placeholder=\\\"\\u8BF7\\u8F93\\u5165\\u641C\\u7D22\\u4E4B\\u5173\\u952E\\u5B57\\\" class=\\\"aj-input\\\" />\\n                <button style=\\\"margin-top: 0;\\\" class=\\\"aj-btn\\\">\\u641C\\u7D22</button>\\n            </form>\\n            <table class=\\\"aj-grid ajaxjs-borderTable\\\">\\n                <thead>\\n                    <tr>\\n                        <th v-for=\\\"key in columns\\\" @click=\\\"sortBy(key)\\\" :class=\\\"{ active: sortKey == key }\\\">\\n                            {{ key | capitalize }}\\n                            <span class=\\\"arrow\\\" :class=\\\"sortOrders[key] > 0 ? 'asc' : 'dsc'\\\"></span>\\n                        </th>\\n                    </tr>\\n                </thead>\\n                <tbody>\\n                    <tr v-for=\\\"entry in filteredData\\\">\\n                        <td v-for=\\\"key in columns\\\" v-html=\\\"entry[key]\\\"></td>\\n                    </tr>\\n                </tbody>\\n            </table>\\n        </div>\\n    \",\n    props: {\n        data: Array,\n        columns: Array,\n        filterKey: String\n    },\n    data: function () {\n        var sortOrders = {};\n        this.columns.forEach(function (key) { return sortOrders[key] = 1; });\n        return {\n            sortKey: '',\n            sortOrders: sortOrders\n        };\n    },\n    computed: {\n        filteredData: function () {\n            var sortKey = this.sortKey;\n            var filterKey = this.filterKey && this.filterKey.toLowerCase();\n            var order = this.sortOrders[sortKey] || 1;\n            var data = this.data;\n            if (filterKey) {\n                data = data.filter(function (row) {\n                    return Object.keys(row).some(function (key) { return String(row[key]).toLowerCase().indexOf(filterKey) > -1; });\n                });\n            }\n            if (sortKey) {\n                data = data.slice().sort(function (a, b) {\n                    a = a[sortKey];\n                    b = b[sortKey];\n                    return (a === b ? 0 : a > b ? 1 : -1) * order;\n                });\n            }\n            return data;\n        }\n    },\n    filters: {\n        capitalize: function (str) {\n            return str.charAt(0).toUpperCase() + str.slice(1);\n        }\n    },\n    methods: {\n        sortBy: function (key) {\n            this.sortKey = key;\n            this.sortOrders[key] = this.sortOrders[key] * -1;\n        }\n    }\n});\n\n\"use strict\";\n\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        list.datastore = {\n            props: {\n                apiUrl: { type: String, required: true },\n                hrefStr: { type: String, required: false },\n                isPage: { type: Boolean, default: true },\n                initPageSize: { type: Number, required: false, default: 9 },\n                autoLoad: { type: Boolean, default: true },\n                initBaseParam: { type: Object, default: function () { return {}; } },\n                pageParamNames: { type: Array, default: function () { return ['start', 'limit']; } },\n                onLoad: Function\n            },\n            data: function () {\n                return {\n                    baseParam: this.initBaseParam,\n                    result: [],\n                    extraParam: {},\n                    realApiUrl: this.apiUrl,\n                    pageSize: this.initPageSize,\n                    total: 0,\n                    totalPage: 0,\n                    pageStart: 0,\n                    currentPage: 0\n                };\n            },\n            methods: {\n                /**\n                 * 分页，跳到第几页，下拉控件传入指定的页码\n                 *\n                 * @param this\n                 * @param ev\n                 */\n                jumpPageBySelect: function (ev) {\n                    var selectEl = ev.target;\n                    var currentPage = selectEl.options[selectEl.selectedIndex].value;\n                    this.pageStart = (Number(currentPage) - 1) * this.pageSize;\n                    this.getData();\n                },\n                /**\n                 * PageSize 改变时候重新分页\n                 *\n                 * @param this\n                 * @param ev\n                 */\n                onPageSizeChange: function (ev) {\n                    this.pageSize = Number(ev.target.value);\n                    this.count();\n                    this.getData();\n                },\n                count: function () {\n                    var totalPage = this.total / this.pageSize, yushu = this.total % this.pageSize;\n                    this.totalPage = parseInt(String(yushu == 0 ? totalPage : totalPage + 1));\n                    //@ts-ignore\n                    this.currentPage = parseInt((this.pageStart / this.pageSize) + 1);\n                },\n                /**\n                 * 前一页\n                 *\n                 * @param this\n                 */\n                previousPage: function () {\n                    this.pageStart -= this.pageSize;\n                    //@ts-ignore\n                    this.currentPage = parseInt((this.pageStart / this.pageSize) + 1);\n                    this.getData();\n                },\n                /**\n                 * 下一页\n                 *\n                 * @param this\n                 */\n                nextPage: function () {\n                    this.pageStart += this.pageSize;\n                    this.currentPage = (this.pageStart / this.pageSize) + 1;\n                    this.getData();\n                },\n            }\n        };\n        var pageParams = {\n            start: 'start',\n            limit: 'limit'\n        };\n        /**\n         * 一般情况下不会单独使用这个组件\n         */\n        Vue.component('aj-list', {\n            mixins: [list.datastore],\n            template: html(__makeTemplateObject([\"\\n\\t\\t\\t<div class=\\\"aj-list\\\">\\n\\t\\t\\t\\t<ul v-if=\\\"showDefaultUi\\\">\\n\\t\\t\\t\\t\\t<li v-for=\\\"(item, index) in result\\\">\\n\\t\\t\\t\\t\\t\\t<slot v-bind=\\\"item\\\">\\n\\t\\t\\t\\t\\t\\t\\t<a href=\\\"#\\\" @click=\\\"show(item.id, index, $event)\\\" :id=\\\"item.id\\\">{{item.name}}</a>\\n\\t\\t\\t\\t\\t\\t</slot>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t<footer v-if=\\\"isPage\\\" class=\\\"pager\\\">\\n\\t\\t\\t\\t\\t<a v-if=\\\"pageStart > 0\\\" href=\\\"#\\\" @click=\\\"previousPage\\\">\\u4E0A\\u4E00\\u9875</a>\\n\\t\\t\\t\\t\\t<a v-if=\\\"(pageStart > 0 ) && (pageStart + pageSize < total)\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"text-decoration: none;\\\">&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</a>\\n\\t\\t\\t\\t\\t<a v-if=\\\"pageStart + pageSize < total\\\" href=\\\"#\\\" @click=\\\"nextPage\\\">\\u4E0B\\u4E00\\u9875</a>\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:;\\\" @click=\\\"getData\\\"><i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i> \\u5237\\u65B0</a>\\n\\t\\t\\t\\t\\t<input type=\\\"hidden\\\" name=\\\"start\\\" :value=\\\"pageStart\\\" />\\n\\t\\t\\t\\t\\t\\u9875\\u6570\\uFF1A{{currentPage}}/{{totalPage}} \\u8BB0\\u5F55\\u6570\\uFF1A{{pageStart}}/{{total}}\\n\\t\\t\\t\\t\\t\\u6BCF\\u9875\\u8BB0\\u5F55\\u6570\\uFF1A <input size=\\\"2\\\" title=\\\"\\u8F93\\u5165\\u4E00\\u4E2A\\u6570\\u5B57\\u786E\\u5B9A\\u6BCF\\u9875\\u8BB0\\u5F55\\u6570\\\" type=\\\"text\\\" :value=\\\"pageSize\\\" @change=\\\"onPageSizeChange\\\" />\\n\\t\\t\\t\\t\\t\\u8DF3\\u8F6C\\uFF1A\\n\\t\\t\\t\\t\\t<select @change=\\\"jumpPageBySelect\\\">\\n\\t\\t\\t\\t\\t\\t<option :value=\\\"n\\\" v-for=\\\"n in totalPage\\\">{{n}}</option>\\n\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t</footer>\\n\\t\\t\\t\\t<div v-show=\\\"!!autoLoadWhenReachedBottom\\\" class=\\\"buttom\\\"></div>\\n\\t\\t\\t</div>\\n\\t\\t\"], [\"\\n\\t\\t\\t<div class=\\\"aj-list\\\">\\n\\t\\t\\t\\t<ul v-if=\\\"showDefaultUi\\\">\\n\\t\\t\\t\\t\\t<li v-for=\\\"(item, index) in result\\\">\\n\\t\\t\\t\\t\\t\\t<slot v-bind=\\\"item\\\">\\n\\t\\t\\t\\t\\t\\t\\t<a href=\\\"#\\\" @click=\\\"show(item.id, index, $event)\\\" :id=\\\"item.id\\\">{{item.name}}</a>\\n\\t\\t\\t\\t\\t\\t</slot>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t<footer v-if=\\\"isPage\\\" class=\\\"pager\\\">\\n\\t\\t\\t\\t\\t<a v-if=\\\"pageStart > 0\\\" href=\\\"#\\\" @click=\\\"previousPage\\\">\\u4E0A\\u4E00\\u9875</a>\\n\\t\\t\\t\\t\\t<a v-if=\\\"(pageStart > 0 ) && (pageStart + pageSize < total)\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"text-decoration: none;\\\">&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</a>\\n\\t\\t\\t\\t\\t<a v-if=\\\"pageStart + pageSize < total\\\" href=\\\"#\\\" @click=\\\"nextPage\\\">\\u4E0B\\u4E00\\u9875</a>\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:;\\\" @click=\\\"getData\\\"><i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i> \\u5237\\u65B0</a>\\n\\t\\t\\t\\t\\t<input type=\\\"hidden\\\" name=\\\"start\\\" :value=\\\"pageStart\\\" />\\n\\t\\t\\t\\t\\t\\u9875\\u6570\\uFF1A{{currentPage}}/{{totalPage}} \\u8BB0\\u5F55\\u6570\\uFF1A{{pageStart}}/{{total}}\\n\\t\\t\\t\\t\\t\\u6BCF\\u9875\\u8BB0\\u5F55\\u6570\\uFF1A <input size=\\\"2\\\" title=\\\"\\u8F93\\u5165\\u4E00\\u4E2A\\u6570\\u5B57\\u786E\\u5B9A\\u6BCF\\u9875\\u8BB0\\u5F55\\u6570\\\" type=\\\"text\\\" :value=\\\"pageSize\\\" @change=\\\"onPageSizeChange\\\" />\\n\\t\\t\\t\\t\\t\\u8DF3\\u8F6C\\uFF1A\\n\\t\\t\\t\\t\\t<select @change=\\\"jumpPageBySelect\\\">\\n\\t\\t\\t\\t\\t\\t<option :value=\\\"n\\\" v-for=\\\"n in totalPage\\\">{{n}}</option>\\n\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t</footer>\\n\\t\\t\\t\\t<div v-show=\\\"!!autoLoadWhenReachedBottom\\\" class=\\\"buttom\\\"></div>\\n\\t\\t\\t</div>\\n\\t\\t\"])),\n            props: {\n                showDefaultUi: { type: Boolean, default: true },\n                isShowFooter: { type: Boolean, default: true },\n                autoLoadWhenReachedBottom: { type: String, default: '' },\n                isDataAppend: { type: Boolean, default: false }\n            },\n            mounted: function () {\n                this.autoLoad && this.getData();\n                // this.BUS.$on('base-param-change', this.onBaseParamChange.bind(this));\n                if (!!this.autoLoadWhenReachedBottom) {\n                    // var scrollSpy = new aj.scrollSpy({ scrollInElement: aj(this.autoLoadWhenReachedBottom), spyOn: thish.$el.$('.buttom') });\n                    // scrollSpy.onScrollSpyBackInSight = e => this.nextPage();\n                }\n            },\n            methods: {\n                foo: function () {\n                    window.alert(9);\n                },\n                getData: function () {\n                    var _this = this;\n                    this.lastRequestParam = {};\n                    aj.apply(this.lastRequestParam, this.baseParam);\n                    aj.apply(this.lastRequestParam, this.extraParam);\n                    initPageParams.call(this);\n                    aj.xhr.get(this.apiUrl, this.onLoad || (function (j) {\n                        if (j.result) {\n                            if (j.total === undefined)\n                                aj.alert('JSON 缺少 total 字段');\n                            if (j.total == 0 || j.result.length == 0)\n                                aj.alert('没有找到任何记录');\n                            _this.result = j.result;\n                            if (_this.isPage) {\n                                _this.total = j.total;\n                                _this.count();\n                            }\n                        }\n                        _this.$emit('pager-result', _this.result);\n                    }), this.lastRequestParam);\n                },\n                /**\n                 * 复位\n                 *\n                 * @param this\n                 */\n                reset: function () {\n                    this.total = this.totalPage = this.pageStart = this.currentPage = 0;\n                    this.pageSize = this.initPageSize;\n                },\n                doAjaxGet: function (j) {\n                    if (this.isPage) {\n                        this.total = j.total;\n                        //@ts-ignore\n                        this.result = this.isDataAppend ? this.result.concat(j.result) : j.result;\n                        this.count();\n                    }\n                    else\n                        this.result = j.result;\n                },\n                onBaseParamChange: function (params) {\n                    aj.apply(this.baseParam, params);\n                    this.pageStart = 0; // 每次 baseParam 被改变，都是从第一笔开始\n                    this.getData();\n                }\n            },\n            watch: {\n                baseParam: function () {\n                    this.getData();\n                }\n            }\n        });\n        /**\n         * 生成分页参数的名字\n         *\n         * @param this\n         */\n        function initPageParams() {\n            var params = {};\n            params[this.pageParamNames[0]] = this.pageStart;\n            params[this.pageParamNames[1]] = this.pageSize;\n            this.isPage && aj.apply(this.lastRequestParam, params);\n        }\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n\n\"use strict\";\n/**\n * 动态组件，可否换为  component？\n */\nVue.component('aj-cell-renderer', {\n    props: {\n        html: { type: String, default: '' },\n        form: Object\n    },\n    render: function (h) {\n        if (this.html.indexOf('<aj-') != -1) {\n            var com = Vue.extend({\n                template: this.html,\n                props: {\n                    form: Object\n                }\n            });\n            return h(com, {\n                props: {\n                    form: this.form\n                }\n            });\n        }\n        else {\n            return this._v(this.html); // html\n        }\n    }\n});\nVue.component('aj-grid-select-row', {\n    template: '<a href=\"#\" @click=\"fireSelect\">选择</a>',\n    props: { type: { type: String, required: true } },\n    methods: {\n        fireSelect: function () {\n            //@ts-ignore\n            this.BUS.$emit('on-' + this.type + '-select', this.$parent.form);\n        }\n    }\n});\nVue.component('aj-grid-open-link', {\n    template: '<a href=\"#\" @click=\"fireSelect\"><i class=\"fa fa-external-link\"></i> 详情</a>',\n    methods: {\n        fireSelect: function () {\n            //@ts-ignore\n            this.BUS.$emit('on-open-link-clk', this.$parent.form);\n        }\n    }\n});\n\n\"use strict\";\n\n\"use strict\";\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        var grid;\n        (function (grid) {\n            grid.SectionModel = {\n                data: function () {\n                    return {\n                        isSelectAll: false,\n                        selected: {},\n                        selectedTotal: 0,\n                        maxRows: 0 // 最多的行数，用于判断是否全选\n                    };\n                },\n                mounted: function () {\n                    this.BUS && this.BUS.$on('on-delete-btn-clk', this.batchDelete);\n                },\n                methods: {\n                    /**\n                     * 批量删除\n                     */\n                    batchDelete: function () {\n                        var _this = this;\n                        if (this.selectedTotal > 0) {\n                            aj.showConfirm('确定批量删除记录？', function () {\n                                for (var id in _this.selected) {\n                                    aj.xhr.dele(_this.apiUrl + \"/\" + id + \"/\", function (j) {\n                                        console.log(j);\n                                    });\n                                }\n                            });\n                        }\n                        else\n                            aj.alert('未选择记录');\n                    },\n                    /**\n                     * 全选\n                     */\n                    selectAll: function () {\n                        var _this = this;\n                        var checkAll = function (item) {\n                            item.checked = true;\n                            var id = item.dataset.id;\n                            if (!id)\n                                throw '需要提供 id 在 DOM 属性中';\n                            _this.$set(_this.selected, Number(id), true);\n                        }, diskCheckAll = function (item) {\n                            item.checked = false;\n                            var id = item.dataset.id;\n                            if (!id)\n                                throw '需要提供 id 在 DOM 属性中';\n                            _this.$set(_this.selected, Number(id), false);\n                        };\n                        this.$el.$('table .selectCheckbox input[type=checkbox]', this.selectedTotal === this.maxRows ? diskCheckAll : checkAll);\n                    }\n                },\n                watch: {\n                    selected: {\n                        handler: function (_new) {\n                            var j = 0;\n                            // clear falses\n                            for (var i in this.selected) {\n                                if (this.selected[i] === false)\n                                    delete this.selected[i];\n                                else\n                                    j++;\n                            }\n                            this.selectedTotal = j;\n                            if (j === this.maxRows)\n                                this.$el.$('.top-checkbox').checked = true;\n                            else\n                                this.$el.$('.top-checkbox').checked = false;\n                        },\n                        deep: true\n                    }\n                }\n            };\n            Vue.component('aj-grid', {\n                mixins: [grid.SectionModel],\n                template: '<div class=\"aj-grid\"><slot v-bind=\"this\"></slot></div>',\n                props: {\n                    apiUrl: { type: String, required: true }\n                },\n                data: function () {\n                    return {\n                        list: [],\n                        updateApi: null,\n                        showAddNew: false\n                    };\n                },\n                mounted: function () {\n                    var _this = this;\n                    this.$children.forEach(function (child) {\n                        switch (child.$options._componentTag) {\n                            case 'aj-entity-toolbar':\n                                _this.$toolbar = child;\n                                break;\n                            case 'aj-grid-inline-edit-row':\n                                _this.$row = child;\n                                break;\n                            case 'aj-list':\n                                _this.$store = child;\n                                break;\n                        }\n                    });\n                    this.$store.$on(\"pager-result\", function (result) {\n                        console.log(result);\n                        _this.list = result;\n                        _this.maxRows = result.length;\n                    });\n                    // this.$store.autoLoad && this.$store.getDataData();\n                },\n                methods: {\n                    /**\n                     * 按下【新建】按钮时候触发的事件，你可以覆盖这个方法提供新的事件\n                     *\n                     * @param this\n                     */\n                    onCreateClk: function () {\n                        this.showAddNew = true;\n                    },\n                    /**\n                     * 重新加载数据\n                     *\n                     * @param this\n                     */\n                    reload: function () {\n                        this.$store.getData();\n                    },\n                    /**\n                     *\n                     * @param this\n                     */\n                    onDirtySaveClk: function () {\n                        var _this = this;\n                        var dirties = getDirty.call(this);\n                        if (!dirties.length) {\n                            aj.msg.show('没有修改过的记录');\n                            return;\n                        }\n                        dirties.forEach(function (item) {\n                            aj.xhr.put(_this.apiUrl + \"/\" + item.id + \"/\", function (j) {\n                                if (j.isOk) {\n                                    _this.list.forEach(function (item) {\n                                        if (item.dirty)\n                                            delete item.dirty;\n                                    });\n                                    aj.msg.show('修改记录成功');\n                                }\n                            }, item.dirty);\n                        });\n                    }\n                }\n            });\n            /**\n             * 获取修改过的数据\n             *\n             * @param this\n             */\n            function getDirty() {\n                var dirties = [];\n                this.list.forEach(function (item) {\n                    if (item.dirty) { // 有这个 dirty 就表示修改过的\n                        // item.dirty.id = item.id;\n                        dirties.push(item);\n                    }\n                });\n                return dirties;\n            }\n        })(grid = list.grid || (list.grid = {}));\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n\n\"use strict\";\n\nVue.component('aj-grid-inline-edit-row-create', {\n    template: html(__makeTemplateObject([\"\\n        <tr class=\\\"aj-grid-inline-edit-row isEditMode\\\">\\n            <td><input type=\\\"checkbox\\\" /></td>\\n            <td></td>\\n            <td v-for=\\\"key in columns\\\" style=\\\"padding:0\\\" class=\\\"cell\\\" @dblclick=\\\"dbEdit\\\">\\n                <aj-select v-if=\\\"key != null && key.type == 'select'\\\" :name=\\\"key.name\\\" :options=\\\"key.data\\\"\\n                    style=\\\"width: 200px;\\\"></aj-select>\\n                <input v-if=\\\"key != null && !key.type\\\" type=\\\"text\\\" size=\\\"0\\\" :name=\\\"key\\\" />\\n            </td>\\n            <td class=\\\"control\\\">\\n                <span @click=\\\"addNew\\\"><img :src=\\\"ajResources.commonAsset + '/icon/update.gif'\\\" />\\u65B0\\u589E</span>\\n                <span @click=\\\"$parent.showAddNew = false\\\"><img :src=\\\"ajResources.commonAsset + '/icon/delete.gif'\\\" /> \\u64A4\\u9500</span>\\n            </td>\\n        </tr>\\n    \"], [\"\\n        <tr class=\\\"aj-grid-inline-edit-row isEditMode\\\">\\n            <td><input type=\\\"checkbox\\\" /></td>\\n            <td></td>\\n            <td v-for=\\\"key in columns\\\" style=\\\"padding:0\\\" class=\\\"cell\\\" @dblclick=\\\"dbEdit\\\">\\n                <aj-select v-if=\\\"key != null && key.type == 'select'\\\" :name=\\\"key.name\\\" :options=\\\"key.data\\\"\\n                    style=\\\"width: 200px;\\\"></aj-select>\\n                <input v-if=\\\"key != null && !key.type\\\" type=\\\"text\\\" size=\\\"0\\\" :name=\\\"key\\\" />\\n            </td>\\n            <td class=\\\"control\\\">\\n                <span @click=\\\"addNew\\\"><img :src=\\\"ajResources.commonAsset + '/icon/update.gif'\\\" />\\u65B0\\u589E</span>\\n                <span @click=\\\"$parent.showAddNew = false\\\"><img :src=\\\"ajResources.commonAsset + '/icon/delete.gif'\\\" /> \\u64A4\\u9500</span>\\n            </td>\\n        </tr>\\n    \"])),\n    props: {\n        columns: { type: Array, required: true },\n        createApi: { type: String, required: false, default: '.' }\n    },\n    methods: {\n        /**\n         * 编辑按钮事件\n         *\n         * @param this\n         */\n        addNew: function () {\n            var _this = this;\n            var map = {};\n            this.$el.$('*[name]', function (i) { return map[i.name] = i.value; });\n            this.BUS.$emit('before-add-new', map);\n            aj.xhr.post(this.createApi, function (j) {\n                if (j && j.isOk) {\n                    aj.msg.show('新建实体成功');\n                    _this.$el.$('input[name]', function (i) {\n                        i.value = '';\n                    });\n                    // @ts-ignore\n                    _this.$parent.reload();\n                    // @ts-ignore\n                    _this.$parent.showAddNew = false;\n                }\n                else if (j && j.msg) {\n                    aj.msg.show(j.msg);\n                }\n            }, map);\n        },\n        /**\n         *\n         * @param this\n         * @param $event\n         */\n        dbEdit: function ($event) {\n            this.isEditMode = !this.isEditMode;\n            var el = $event.target;\n            if (el.tagName !== 'INPUT')\n                el = el.$('input');\n            setTimeout(function () { return el && el.focus(); }, 200);\n        }\n    }\n});\n\n\"use strict\";\n\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        var grid;\n        (function (grid) {\n            /**\n                总体就是一个普通的 HTML Table，程序是通过读取 JSON 数据（实际 JS 数组）里面的字段，\n                然后通过动态添加表格的方法逐行添加 tr，td，在添加行的过程中根据需要设置样式，添加方法等。\n                每一行数据（即 tr 的 DOM 对象）都有 id 属性，其值就等于数据中的idColumn对应的列的值\n             */\n            Vue.component('aj-grid-inline-edit-row', {\n                template: html(__makeTemplateObject([\"\\n            <tr class=\\\"aj-grid-inline-edit-row\\\" :class=\\\"{editing: isEditMode}\\\">\\n                <td v-if=\\\"showCheckboxCol\\\" class=\\\"selectCheckbox\\\">\\n                    <input type=\\\"checkbox\\\" @change=\\\"selectCheckboxChange\\\" :data-id=\\\"id\\\" />\\n                </td>\\n                <td v-if=\\\"showIdCol\\\">{{id}}</td>\\n                <td v-for=\\\"cellRenderer in columns\\\" :style=\\\"styleModifly\\\" class=\\\"cell\\\" @dblclick=\\\"dbEdit\\\">\\n                    <aj-cell-renderer v-if=\\\"!isEditMode\\\" :html=\\\"renderCell(data, cellRenderer)\\\" :form=\\\"data\\\"></aj-cell-renderer>\\n                    <aj-cell-renderer v-if=\\\"isEditMode && cellRenderer && cellRenderer.editMode\\\"\\n                        :html=\\\"rendererEditMode(data, cellRenderer)\\\" :form=\\\"data\\\">\\n                    </aj-cell-renderer>\\n                    <input type=\\\"text\\\" v-if=\\\"canEdit(cellRenderer)\\\" size=\\\"0\\\" v-model=\\\"data[cellRenderer]\\\" />\\n                </td>\\n                <td v-if=\\\"showControl\\\" class=\\\"control\\\">\\n                    <aj-cell-renderer v-if=\\\"controlUi\\\" :html=\\\"controlUi\\\" :form=\\\"data\\\"></aj-cell-renderer>\\n                    <span @click=\\\"onEditClk\\\" class=\\\"edit\\\"><i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i>\\n                        {{!isEditMode ? \\\"\\u7F16\\u8F91\\\" : \\\"\\u786E\\u5B9A\\\"}}</span>\\n                    <span @click=\\\"dele(id)\\\" class=\\\"delete\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> \\u5220\\u9664</span>\\n                </td>\\n            </tr>\\n        \"], [\"\\n            <tr class=\\\"aj-grid-inline-edit-row\\\" :class=\\\"{editing: isEditMode}\\\">\\n                <td v-if=\\\"showCheckboxCol\\\" class=\\\"selectCheckbox\\\">\\n                    <input type=\\\"checkbox\\\" @change=\\\"selectCheckboxChange\\\" :data-id=\\\"id\\\" />\\n                </td>\\n                <td v-if=\\\"showIdCol\\\">{{id}}</td>\\n                <td v-for=\\\"cellRenderer in columns\\\" :style=\\\"styleModifly\\\" class=\\\"cell\\\" @dblclick=\\\"dbEdit\\\">\\n                    <aj-cell-renderer v-if=\\\"!isEditMode\\\" :html=\\\"renderCell(data, cellRenderer)\\\" :form=\\\"data\\\"></aj-cell-renderer>\\n                    <aj-cell-renderer v-if=\\\"isEditMode && cellRenderer && cellRenderer.editMode\\\"\\n                        :html=\\\"rendererEditMode(data, cellRenderer)\\\" :form=\\\"data\\\">\\n                    </aj-cell-renderer>\\n                    <input type=\\\"text\\\" v-if=\\\"canEdit(cellRenderer)\\\" size=\\\"0\\\" v-model=\\\"data[cellRenderer]\\\" />\\n                </td>\\n                <td v-if=\\\"showControl\\\" class=\\\"control\\\">\\n                    <aj-cell-renderer v-if=\\\"controlUi\\\" :html=\\\"controlUi\\\" :form=\\\"data\\\"></aj-cell-renderer>\\n                    <span @click=\\\"onEditClk\\\" class=\\\"edit\\\"><i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i>\\n                        {{!isEditMode ? \\\"\\u7F16\\u8F91\\\" : \\\"\\u786E\\u5B9A\\\"}}</span>\\n                    <span @click=\\\"dele(id)\\\" class=\\\"delete\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> \\u5220\\u9664</span>\\n                </td>\\n            </tr>\\n        \"])),\n                props: {\n                    rowData: { type: Object, required: true },\n                    showIdCol: { type: Boolean, default: true },\n                    columns: Array,\n                    showCheckboxCol: { type: Boolean, default: true },\n                    showControl: { type: Boolean, default: true },\n                    filterField: Array,\n                    enableInlineEdit: { type: Boolean, default: false },\n                    deleApi: String,\n                    controlUi: String // 自定义“操作”按钮，这里填组件的名字\n                },\n                data: function () {\n                    return {\n                        id: this.rowData.id,\n                        data: this.rowData,\n                        isEditMode: false\n                    };\n                },\n                mounted: function () {\n                    for (var i in this.data) // 监视每个字段\n                        this.$watch('data.' + i, makeWatch.call(this, i));\n                },\n                computed: {\n                    filterData: function () {\n                        var data = JSON.parse(JSON.stringify(this.data)); // 剔除不要的字段\n                        delete data.id;\n                        delete data.dirty;\n                        if (this.filterField && this.filterField.length)\n                            this.filterField.forEach(function (i) { return delete data[i]; });\n                        return data;\n                    },\n                    /**\n                     *\n                     *\n                     * @param this\n                     */\n                    styleModifly: function () {\n                        return {\n                            padding: this.isEditMode ? 0 : '',\n                        };\n                    }\n                },\n                methods: {\n                    /**\n                     * 没有指定编辑器的情况下，使用 input 作为编辑器\n                     *\n                     * @param this\n                     * @param cellRenderer\n                     */\n                    canEdit: function (cellRenderer) {\n                        return this.isEditMode && !isFixedField.call(this, cellRenderer) && !(cellRenderer.editMode);\n                    },\n                    /**\n                     * 渲染单元格\n                     *\n                     * @param this\n                     * @param data\n                     * @param cellRenderer\n                     */\n                    renderCell: function (data, cellRenderer) {\n                        var v;\n                        if (cellRenderer === '')\n                            return '';\n                        if (typeof cellRenderer == 'string') {\n                            v = data[cellRenderer];\n                            return v + \"\";\n                        }\n                        if (typeof cellRenderer == 'function') {\n                            v = cellRenderer(data);\n                            return v;\n                        }\n                        if (typeof cellRenderer == 'object') {\n                            var cfg = cellRenderer;\n                            if (!!cfg.renderer)\n                                v = cfg.renderer(data);\n                            // if (typeof key.showMode === 'function')\n                            //     return key.showMode(data);\n                            // if (typeof key.showMode === 'string')\n                            //     return data[key.showMode];\n                        }\n                        return (v === null ? '' : v) + '';\n                    },\n                    /**\n                     * 编辑按钮事件\n                     *\n                     * @param this\n                     */\n                    onEditClk: function () {\n                        if (this.enableInlineEdit)\n                            this.isEditMode = !this.isEditMode;\n                        //@ts-ignore    \n                        else if (this.$parent.onEditClk) // 打开另外的编辑界面\n                            //@ts-ignore    \n                            this.$parent.onEditClk(this.id);\n                    },\n                    /**\n                     * 渲染编辑模式下的行\n                     *\n                     * @param this\n                     * @param data\n                     * @param cfg\n                     */\n                    rendererEditMode: function (data, cellRenderer) {\n                        if (typeof cellRenderer === 'string')\n                            return cellRenderer.toString();\n                        if (cellRenderer.editMode && typeof cellRenderer.editRenderer === 'function')\n                            return cellRenderer.editRenderer(data);\n                        return \"NULL\";\n                    },\n                    /**\n                     * 双击单元格进入编辑\n                     *\n                     * @param ev\n                     */\n                    dbEdit: function (ev) {\n                        if (!this.enableInlineEdit)\n                            return;\n                        this.isEditMode = !this.isEditMode;\n                        if (this.isEditMode) {\n                            var el_1 = ev.target;\n                            setTimeout(function () {\n                                if (el_1.tagName !== 'INPUT')\n                                    el_1 = el_1.$('input');\n                                el_1 && el_1.focus();\n                            }, 200);\n                        }\n                    },\n                    /**\n                     *\n                     * @param this\n                     * @param ev\n                     */\n                    selectCheckboxChange: function (ev) {\n                        var checkbox = ev.target, parent = this.$parent;\n                        if (checkbox.checked)\n                            parent.$set(parent.selected, this.id, true);\n                        //this.$parent.selected[this.id] = true;\n                        else\n                            parent.$set(parent.selected, this.id, false);\n                    },\n                    /**\n                     * 删除记录\n                     *\n                     * @param this\n                     * @param id\n                     */\n                    dele: function (id) {\n                        var _this = this;\n                        aj.showConfirm(\"\\u786E\\u5B9A\\u5220\\u9664\\u8BB0\\u5F55 id:[\" + id + \"] \\u5417\\uFF1F\", function () {\n                            return aj.xhr.dele(_this.$parent.apiUrl + \"/\" + id + \"/\", function (j) {\n                                if (j.isOk) {\n                                    aj.msg.show('删除成功');\n                                    _this.$parent.reload();\n                                }\n                            });\n                        });\n                    }\n                }\n            });\n            /**\n             * 生成该字段的 watch 函数\n             *\n             * @param this\n             * @param field\n             */\n            function makeWatch(field) {\n                return function (_new) {\n                    var arr = this.$parent.list, data;\n                    for (var i = 0, j = arr.length; i < j; i++) { // 已知 id 找到原始数据\n                        if (this.id && (String(arr[i].id) == this.id)) {\n                            data = arr[i];\n                            break;\n                        }\n                    }\n                    if (!data)\n                        throw '找不到匹配的实体！目标 id: ' + this.id;\n                    if (!data.dirty)\n                        data.dirty = {\n                            id: this.id\n                        };\n                    data.dirty[field] = _new; // 保存新的值，key 是字段名\n                };\n            }\n            /**\n             * 是否固定的字段，固定的字段不能被编辑\n             *\n             * @param this\n             * @param cellRenderer\n             */\n            function isFixedField(cellRenderer) {\n                if (this.filterField && this.filterField.length) {\n                    for (var i = 0, j = this.filterField.length; i < j; i++) {\n                        if (this.filterField[i] == cellRenderer)\n                            return true;\n                    }\n                }\n                return false;\n            }\n        })(grid = list.grid || (list.grid = {}));\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n\n\"use strict\";\n\n/**\n * 工具条\n */\nVue.component('aj-entity-toolbar', {\n    template: html(__makeTemplateObject([\"\\n        <div class=\\\"toolbar\\\"> \\n            <form v-if=\\\"search\\\" class=\\\"right\\\">\\n                <input type=\\\"text\\\" name=\\\"keyword\\\" placeholder=\\\"\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u5B57\\\" size=\\\"12\\\" />\\n                <button @click=\\\"doSearch\\\"><i class=\\\"fa fa-search\\\" style=\\\"color:#417BB5;\\\"></i>\\u641C\\u7D22</button>\\n            </form>\\n            <aj-form-between-date v-if=\\\"betweenDate\\\" class=\\\"right\\\"></aj-form-between-date>\\n            <ul>\\n                <li v-if=\\\"create\\\" @click=\\\"$emit('on-create-btn-clk')\\\"><i class=\\\"fa fa-plus\\\" style=\\\"color:#0a90f0;\\\"></i> \\u65B0\\u5EFA</li>\\n                <li v-if=\\\"save\\\" @click=\\\"$emit('on-save-btn-clk')\\\"><i class=\\\"fa fa-floppy-o\\\" style=\\\"color:rgb(205, 162, 4);\\\"></i> \\u4FDD\\u5B58</li>\\n                <li v-if=\\\"deleBtn\\\" @click=\\\"$emit('on-delete-btn-clk')\\\"><i class=\\\"fa fa-trash-o\\\" style=\\\"color:red;\\\"></i> \\u5220\\u9664</li>\\n                <li v-if=\\\"excel\\\"><i class=\\\"fa fa-file-excel-o\\\" style=\\\"color:green;\\\"></i> \\u5BFC\\u51FA</li>\\n                <slot></slot>\\n                \\n            </ul>\\n        </div>\\n    \"], [\"\\n        <div class=\\\"toolbar\\\"> \\n            <form v-if=\\\"search\\\" class=\\\"right\\\">\\n                <input type=\\\"text\\\" name=\\\"keyword\\\" placeholder=\\\"\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u5B57\\\" size=\\\"12\\\" />\\n                <button @click=\\\"doSearch\\\"><i class=\\\"fa fa-search\\\" style=\\\"color:#417BB5;\\\"></i>\\u641C\\u7D22</button>\\n            </form>\\n            <aj-form-between-date v-if=\\\"betweenDate\\\" class=\\\"right\\\"></aj-form-between-date>\\n            <ul>\\n                <li v-if=\\\"create\\\" @click=\\\"$emit('on-create-btn-clk')\\\"><i class=\\\"fa fa-plus\\\" style=\\\"color:#0a90f0;\\\"></i> \\u65B0\\u5EFA</li>\\n                <li v-if=\\\"save\\\" @click=\\\"$emit('on-save-btn-clk')\\\"><i class=\\\"fa fa-floppy-o\\\" style=\\\"color:rgb(205, 162, 4);\\\"></i> \\u4FDD\\u5B58</li>\\n                <li v-if=\\\"deleBtn\\\" @click=\\\"$emit('on-delete-btn-clk')\\\"><i class=\\\"fa fa-trash-o\\\" style=\\\"color:red;\\\"></i> \\u5220\\u9664</li>\\n                <li v-if=\\\"excel\\\"><i class=\\\"fa fa-file-excel-o\\\" style=\\\"color:green;\\\"></i> \\u5BFC\\u51FA</li>\\n                <slot></slot>\\n                \\n            </ul>\\n        </div>\\n    \"])),\n    props: {\n        betweenDate: { type: Boolean, default: true },\n        create: { type: Boolean, default: true },\n        save: { type: Boolean, default: true },\n        excel: { type: Boolean, default: false },\n        deleBtn: { type: Boolean, default: true },\n        search: { type: Boolean, default: true }\n    },\n    methods: {\n        /**\n         * 获取关键字进行搜索\n         *\n         * @param this\n         * @param e\n         */\n        doSearch: function (e) {\n            e.preventDefault();\n            aj.apply(this.$parent.$store.extraParam, { keyword: aj.form.utils.getFormFieldValue(this.$el, 'input[name=keyword]') });\n            this.$parent.$store.reload();\n        }\n    }\n});\n\n\"use strict\";\n\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        var tree;\n        (function (tree) {\n            /**\n             * 下拉分类选择器，异步请求远端获取分类数据\n             */\n            var TreeLikeSelect = /** @class */ (function (_super) {\n                __extends(TreeLikeSelect, _super);\n                function TreeLikeSelect() {\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\n                    _this.name = 'aj-tree-like-select';\n                    _this.template = '<select :name=\"fieldName\" class=\"aj-select\" @change=\"onSelected\" style=\"min-width:180px;\"></select>';\n                    _this.props = {\n                        fieldName: { type: String, required: false, default: 'catalogId' },\n                        apiUrl: { type: String, default: function () { return aj.ctx + '/admin/tree-like/'; } },\n                        isAutoLoad: { type: Boolean, default: true },\n                        isAutoJump: Boolean,\n                        initFieldValue: String\n                    };\n                    _this.apiUrl = \"\";\n                    /**\n                     * 是否自动跳转 catalogId\n                     */\n                    _this.isAutoJump = false;\n                    _this.isAutoLoad = false;\n                    _this.fieldName = \"\";\n                    _this.fieldValue = \"\";\n                    /**\n                     * 初始输入的字段值\n                     */\n                    _this.initFieldValue = \"\";\n                    return _this;\n                }\n                TreeLikeSelect.prototype.data = function () {\n                    return {\n                        fieldValue: this.initFieldValue\n                    };\n                };\n                TreeLikeSelect.prototype.mounted = function () {\n                    this.isAutoLoad && this.getData();\n                };\n                TreeLikeSelect.prototype.onSelected = function (ev) {\n                    var el = ev.target;\n                    this.fieldValue = el.selectedOptions[0].value;\n                    if (this.isAutoJump)\n                        location.assign('?' + this.fieldName + '=' + this.fieldValue);\n                    else\n                        this.BUS && this.BUS.$emit('aj-tree-catelog-select-change', ev, this);\n                };\n                TreeLikeSelect.prototype.getData = function () {\n                    var _this = this;\n                    var fn = function (j) {\n                        var arr = [{ id: 0, name: \"请选择分类\" }];\n                        tree.rendererOption(arr.concat(j.result), _this.$el, _this.fieldValue, { makeAllOption: false });\n                        if (_this.fieldValue) // 有指定的选中值\n                            //@ts-ignore\n                            aj.form.utils.selectOption.call(_this, _this.fieldValue);\n                    };\n                    // aj.xhr.get(this.ajResources.ctx + this.apiUrl + \"/admin/tree-like/getListAndSubByParentId/\", fn);\n                    aj.xhr.get(this.apiUrl, fn);\n                };\n                return TreeLikeSelect;\n            }(aj.VueComponent));\n            tree.TreeLikeSelect = TreeLikeSelect;\n            new TreeLikeSelect().register();\n        })(tree = list.tree || (list.tree = {}));\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n\n\"use strict\";\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        var tree;\n        (function (tree) {\n            /**\n             * 排序\n             * 父id 必须在子 id 之前，不然下面 findParent() 找不到后面的父节点，故先排序\n             *\n             * @param jsonArray\n             */\n            function makeTree(jsonArray) {\n                var arr = [];\n                for (var i = 0, j = jsonArray.length; i < j; i++) {\n                    var n = jsonArray[i];\n                    if (n.pid === -1)\n                        arr.push(n);\n                    else {\n                        var parentNode = findParentInArray(arr, n.pid);\n                        if (parentNode) {\n                            if (!parentNode.children)\n                                parentNode.children = [];\n                            parentNode.children.push(n);\n                        }\n                        else\n                            console.log('parent not found!');\n                    }\n                }\n                return arr;\n            }\n            tree.makeTree = makeTree;\n            /**\n             * 根据传入 id 在一个数组中查找父亲节点\n             *\n             * @param jsonArray\n             * @param id\n             */\n            function findParentInArray(jsonArray, id) {\n                for (var i = 0, j = jsonArray.length; i < j; i++) {\n                    var map = jsonArray[i];\n                    if (map.id == id)\n                        return map;\n                    if (map.children) {\n                        var result = findParentInArray(map.children, id);\n                        if (result != null)\n                            return result;\n                    }\n                }\n                return null;\n            }\n            tree.findParentInArray = findParentInArray;\n            /**\n             * 根据传入 id 查找父亲节点\n             *\n             * @param map\n             * @param id\n             */\n            function findParentInMap(map, id) {\n                for (var i in map) {\n                    if (i == id)\n                        return map[i];\n                    var c = map[i].children;\n                    if (c) {\n                        for (var q = 0, p = c.length; q < p; q++) {\n                            var result = findParentInMap(c[q], id);\n                            if (result != null)\n                                return result;\n                        }\n                    }\n                }\n                return null;\n            }\n            tree.findParentInMap = findParentInMap;\n            var stack = [];\n            /**\n             * 遍历各个元素，输出\n             *\n             * @param map\n             * @param cb\n             */\n            function output(map, cb) {\n                stack.push(map);\n                for (var i in map) {\n                    map[i].level = stack.length; // 层数，也表示缩进多少个字符\n                    cb(map[i], i);\n                    var c = map[i].children;\n                    if (c) {\n                        for (var q = 0, p = c.length; q < p; q++)\n                            output(c[q], cb);\n                    }\n                }\n                stack.pop();\n            }\n            tree.output = output;\n            /**\n             * 生成树，将扁平化的数组结构 还原为树状的结构\n             * 父id 必须在子id之前，不然下面 findParent() 找不到后面的父节点，故前提条件是，这个数组必须先排序\n             *\n             * @param jsonArray\n             */\n            function toTree(jsonArray) {\n                if (!jsonArray)\n                    return {};\n                var m = {};\n                for (var i = 0, j = jsonArray.length; i < j; i++) {\n                    var n = jsonArray[i], parentNode = findParentInMap(m, n.pid + \"\");\n                    if (parentNode == null) { // 没有父节点，那就表示这是根节点，保存之\n                        m[n.id] = n; // id 是key，value 新建一对象\n                    }\n                    else { // 有父亲节点，作为孩子节点保存\n                        var obj = {};\n                        obj[n.id] = n;\n                        if (!parentNode.children)\n                            parentNode.children = [];\n                        parentNode.children.push(obj);\n                    }\n                }\n                return m;\n            }\n            tree.toTree = toTree;\n            /**\n             * 渲染 Option 标签的 DOM\n             *\n             * @param jsonArray\n             * @param select\n             * @param selectedId\n             * @param cfg\n             */\n            function rendererOption(jsonArray, select, selectedId, cfg) {\n                if (cfg && cfg.makeAllOption) {\n                    var option = document.createElement('option');\n                    option.value = option.innerHTML = \"全部分类\";\n                    select.appendChild(option);\n                }\n                // 生成 option\n                var temp = document.createDocumentFragment();\n                output(toTree(jsonArray), function (node, nodeId) {\n                    var option = document.createElement('option'); // 节点\n                    option.value = nodeId;\n                    if (selectedId && selectedId == nodeId) // 选中的\n                        option.selected = true;\n                    option.dataset['pid'] = node.pid + \"\";\n                    //option.style= \"padding-left:\" + (node.level - 1) +\"rem;\";\n                    option.innerHTML = new Array(node.level * 5).join('&nbsp;') + (node.level == 1 ? '' : '└─') + node.name;\n                    temp.appendChild(option);\n                });\n                select.appendChild(temp);\n            }\n            tree.rendererOption = rendererOption;\n        })(tree = list.tree || (list.tree = {}));\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n\n\"use strict\";\n\n\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        var tree;\n        (function (tree) {\n            /**\n             * 注意递归组件的使用\n             */\n            var TreeItem = /** @class */ (function (_super) {\n                __extends(TreeItem, _super);\n                function TreeItem() {\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\n                    _this.name = 'aj-tree-item';\n                    _this.template = html(__makeTemplateObject([\"\\n            <li>\\n                <div :class=\\\"{bold: isFolder, node: true}\\\" @click=\\\"toggle\\\">\\n                    <span>\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7</span>{{model.name}}\\n                    <span v-if=\\\"isFolder\\\">[{{open ? '-' : '+'}}]</span>\\n                </div>\\n                <ul v-show=\\\"open\\\" v-if=\\\"isFolder\\\" :class=\\\"{show: open}\\\">\\n                    <aj-tree-item class=\\\"item\\\" v-for=\\\"(model, index) in model.children\\\" :key=\\\"index\\\" :model=\\\"model\\\">\\n                    </aj-tree-item>\\n                    <li v-if=\\\"allowAddNode\\\" class=\\\"add\\\" @click=\\\"addChild\\\">+</li>\\n                </ul>\\n            </li>\\n        \"], [\"\\n            <li>\\n                <div :class=\\\"{bold: isFolder, node: true}\\\" @click=\\\"toggle\\\">\\n                    <span>\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7</span>{{model.name}}\\n                    <span v-if=\\\"isFolder\\\">[{{open ? '-' : '+'}}]</span>\\n                </div>\\n                <ul v-show=\\\"open\\\" v-if=\\\"isFolder\\\" :class=\\\"{show: open}\\\">\\n                    <aj-tree-item class=\\\"item\\\" v-for=\\\"(model, index) in model.children\\\" :key=\\\"index\\\" :model=\\\"model\\\">\\n                    </aj-tree-item>\\n                    <li v-if=\\\"allowAddNode\\\" class=\\\"add\\\" @click=\\\"addChild\\\">+</li>\\n                </ul>\\n            </li>\\n        \"]));\n                    _this.props = {\n                        model: Object,\n                        allowAddNode: { type: Boolean, default: false } // 是否允许添加新节点\n                    };\n                    _this.model = { children: [] };\n                    _this.open = false;\n                    _this.allowAddNode = false;\n                    // isFolder = false;\n                    _this.computed = {\n                        isFolder: function () {\n                            return !!(this.model.children && this.model.children.length);\n                        }\n                    };\n                    return _this;\n                }\n                /**\n                 * 点击节点时的方法\n                 *\n                 * @param this\n                 */\n                TreeItem.prototype.toggle = function () {\n                    //@ts-ignore\n                    if (this.isFolder)\n                        this.open = !this.open;\n                    this.BUS && this.BUS.$emit('tree-node-click', this.model);\n                };\n                /**\n                 * 变为文件夹\n                 *\n                 * @param this\n                 */\n                TreeItem.prototype.changeType = function () {\n                    //@ts-ignore\n                    if (!this.isFolder) {\n                        Vue.set(this.model, 'children', []);\n                        this.addChild();\n                        this.open = true;\n                    }\n                };\n                TreeItem.prototype.addChild = function () {\n                    this.model.children.push({\n                        //@ts-ignore\n                        name: 'new stuff'\n                    });\n                };\n                return TreeItem;\n            }(aj.VueComponent));\n            tree.TreeItem = TreeItem;\n            new TreeItem().register();\n        })(tree = list.tree || (list.tree = {}));\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n\n\"use strict\";\n\nvar aj;\n(function (aj) {\n    var list;\n    (function (list) {\n        var tree;\n        (function (tree) {\n            var Tree = /** @class */ (function (_super) {\n                __extends(Tree, _super);\n                function Tree() {\n                    var _this = _super !== null && _super.apply(this, arguments) || this;\n                    _this.name = 'aj-tree';\n                    _this.template = '<ul class=\"aj-tree\"><aj-tree-item :model=\"treeData\"></aj-tree-item></ul>';\n                    _this.props = {\n                        apiUrl: String,\n                        topNodeName: String\n                    };\n                    /**\n                     * 根节点显示名称\n                     */\n                    _this.topNodeName = \"\";\n                    _this.apiUrl = \"\";\n                    _this.isAutoLoad = false;\n                    _this.treeData = { name: _this.topNodeName || 'TOP', children: null };\n                    return _this;\n                }\n                Tree.prototype.getData = function () {\n                    var _this = this;\n                    // @ts-ignore\n                    aj.xhr.get(this.apiUrl, function (j) { return _this.treeData.children = tree.makeTree(j.result); });\n                    // 递归组件怎么事件上报呢？通过事件 bus\n                    this.BUS && this.BUS.$on('treenodeclick', function (data) { return _this.$emit('treenodeclick', data); });\n                };\n                Tree.prototype.mounted = function () {\n                    this.getData();\n                };\n                return Tree;\n            }(aj.VueComponent));\n            tree.Tree = Tree;\n            new Tree().register();\n        })(tree = list.tree || (list.tree = {}));\n    })(list = aj.list || (aj.list = {}));\n})(aj || (aj = {}));\n"],"names":["aj","Vue","component","template","html","__makeTemplateObject","props","picCtx","String","uploadUrl","blankBg","delImgUrl","apiUrl","data","pics","mounted","this","getData","$refs","attachmentPictureUpload","uploadOk_callback","methods","_this","xhr","get","j","result","delPic","picId","showConfirm","dele","isOk","Array","columns","filterKey","sortOrders","forEach","key","sortKey","computed","filteredData","toLowerCase","order","filter","row","Object","keys","some","indexOf","slice","sort","a","b","filters","capitalize","str","charAt","toUpperCase","sortBy","list","datastore","type","required","hrefStr","isPage","Boolean","default","initPageSize","Number","autoLoad","initBaseParam","pageParamNames","onLoad","Function","baseParam","extraParam","realApiUrl","pageSize","total","totalPage","pageStart","currentPage","jumpPageBySelect","ev","selectEl","target","options","selectedIndex","value","onPageSizeChange","count","yushu","parseInt","previousPage","nextPage","mixins","showDefaultUi","isShowFooter","autoLoadWhenReachedBottom","isDataAppend","foo","window","alert","lastRequestParam","apply","params","call","undefined","length","$emit","reset","doAjaxGet","concat","onBaseParamChange","watch","form","render","h","_v","extend","fireSelect","BUS","$parent","grid","SectionModel","isSelectAll","selected","selectedTotal","maxRows","$on","batchDelete","id","console","log","selectAll","$el","$","item","checked","dataset","$set","handler","_new","i","deep","updateApi","showAddNew","$children","child","$options","_componentTag","$toolbar","$row","$store","onCreateClk","reload","onDirtySaveClk","dirties","dirty","push","put","msg","show","createApi","addNew","map","name","post","dbEdit","$event","isEditMode","el","tagName","setTimeout","focus","makeWatch","field","arr","rowData","showIdCol","showCheckboxCol","showControl","filterField","enableInlineEdit","deleApi","controlUi","$watch","filterData","JSON","parse","stringify","styleModifly","padding","canEdit","cellRenderer","renderCell","v","renderer","onEditClk","rendererEditMode","toString","editMode","editRenderer","el_1","selectCheckboxChange","checkbox","parent","betweenDate","create","save","excel","deleBtn","search","doSearch","e","preventDefault","keyword","utils","getFormFieldValue","tree","_super","TreeLikeSelect","arguments","fieldName","ctx","isAutoLoad","isAutoJump","initFieldValue","fieldValue","VueComponent","__extends","prototype","onSelected","selectedOptions","location","assign","rendererOption","makeAllOption","selectOption","register","findParentInArray","jsonArray","children","findParentInMap","c","q","p","makeTree","parentNode","n","pid","stack","output","cb","level","pop","toTree","m","obj","select","selectedId","cfg","option","document","createElement","innerHTML","appendChild","temp","createDocumentFragment","node","nodeId","join","TreeItem","model","allowAddNode","open","isFolder","toggle","changeType","set","addChild","Tree","topNodeName","treeData"],"mappings":"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"}