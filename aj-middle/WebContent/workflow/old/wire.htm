<script src="js/lib/raphael-2.3.js"></script>
<script src="https://lib.baomitu.com/vue/2.6.11/vue.js"></script>

<script src="svg.js"></script>
<style>
	.resizeDot {
		width:5px;
		height:5px;
		fill: black;
	    stroke: rgb(255, 255, 255);
	}
	
	.arrow {
		stroke: #808080;
		fill: #808080;
		stroke-width: 2;
		radius: 4;
	}
</style>
<div id="RaphaelCanvas"></div>
<script>
	aj.svgMgr.init(window.RaphaelCanvas);

	var rect_1 = new aj.RectBox({
		x: 500, y: 200, width: 100, height: 80,
		fill:"90-#fff-#F6F7FF",stroke:"#03689A","stroke-width":2
	}), rect_2 = new aj.RectBox({
		x: 700, y: 500, width: 100, height: 80,
		fill:"90-#fff-#F6F7FF",stroke:"#03689A","stroke-width":2
	});
	
	var path = aj.svgMgr.PAPER.path().attr({stroke:"#808080", fill:"none", "stroke-width":2});
	
	var arrowSvg = aj.svgMgr.PAPER.path().addClass('arrow');

	rendererPath = () => {
		var formPos = connPoint(rect_1.vBox, { x: rect_2.vBox.x + rect_2.vBox.width / 2, y: rect_2.vBox.y + rect_2.vBox.height / 2});
		var toPos = connPoint(rect_2.vBox, formPos);
		path.attr({path: `M${formPos.x} ${formPos.y}L${toPos.x} ${toPos.y}`});
		
		// 画箭头
		var arrPos = arrow(formPos, toPos, 5);
		arrowSvg.attr({
			path:  arr = "M" + arrPos[0].x + " " + arrPos[0].y + "L" + arrPos[1].x + " " + arrPos[1].y + "L" + arrPos[2].x + " " + arrPos[2].y + "z"
		});
	}
	
	rendererPath();
	
	rect_1.addUpdateHandler(rendererPath);
	rect_2.addUpdateHandler(rendererPath);
	
	var resizeRect = new aj.RectBox({
		x: 750, y: 300, width: 600, height: 400,
		fill: "90-#fff-#F6F7FF", stroke: "#03689A", "stroke-width": 2
	});
</script>