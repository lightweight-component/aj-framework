<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <title>AJ Framework-åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</title>
        <meta name="description" content="AJ Framework ä¸€ä¸ªåŸºäº SpringMVC æ„å»ºçš„è½»é‡çº§æ¡†æ¶ï¼Œæ—¨åœ¨å¢å¼º SpringMVC å¹¶ä½¿å…¶æ›´å…· SpringBoot çš„ç‰¹æ€§ã€‚å®ƒæ‹¥æœ‰è®¸å¤šå°å‹ç»„ä»¶ï¼Œéå¸¸æ˜“äºä½¿ç”¨ã€‚" />
        <meta name="keywords" content="AJ Framework, ajaxjs, ajaxjs framework, java framework, web framework" />
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap&family=Noto+Sans+SC:wght@100..900&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" /> 
        <link rel="stylesheet" href="/asset/main.css"/>
        <link rel="icon" type="image/x-icon" href="/asset/logo.ico"/>
        <script src="https://framework.ajaxjs.com/static/aj-docs/common.js"></script>
        <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?a3dec1d9b9415edd86b54c1fb3d02f19";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
        </script>
    </head>
    <body>
        <nav>
            <div>
                <div class="links">
                    <a href="/">ğŸ  é¦–é¡µ</a>
                    | âš™ï¸ æºç :
                    <a target="_blank" href="https://github.com/lightweight-component/aj-framework">Github</a>/<a target="_blank" href="https://gitcode.com/lightweight-component/aj-framework">Gitcode</a>
                    |
                    <a href="/common/contact">âœ‰ï¸ è”ç³»</a>
                </div>
                <h1>
                    <img src="/asset/logo.png" style="vertical-align: middle;height: 45px;margin-bottom: 6px;" /> 
                    AJ Framework
                </h1>
                <h3>è½»é‡çº§ Java å¿«é€Ÿå¼€å‘æ¡†æ¶
                </h3>
            </div>
        </nav>
        <div>
            <menu>
                
                <ul>
                    <li class="selected">
                        <a href="/">é¦–é¡µ</a>
                    </li>
                </ul>
                <h3>æ¡†æ¶åŸºæœ¬ç”¨æ³•</h3>
                <ul>
                    <li>
                        <a href="/framework/init">åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</a>
                    </li>
                    <li>
                        <a href="/framework/controller">ç®€åŒ–æ§åˆ¶å™¨ä¸ºæ¥å£</a>
                    </li>
                    <li>
                        <a href="/framework/unified-return">ç»Ÿä¸€å¯¹è±¡è¿”å›</a>
                    </li>
                    <li>
                        <a href="/framework/unified-ex">ç»Ÿä¸€å¼‚å¸¸å¤„ç†</a>
                    </li>
                    <li>
                        <a href="/framework/package">æ‰“åŒ…ä¸éƒ¨ç½²</a>
                    </li>
                </ul>
                <h3>å¸¸ç”¨ç»„ä»¶</h3>
                <ul>
                    <li>
                        <a href="/component/db">æ•°æ®åº“è®¿é—®</a>
                    </li>
                    <li>
                        <a href="/component/bean-validator/">Bean å®ä½“æ ¡éªŒ</a>
                    </li>
                    <li>
                        <a href="/component/security">å®‰å…¨ç»„ä»¶ã€ç”¨æˆ·ç³»ç»Ÿ</a>
                    </li>
                    <li>
                        <a href="/component/lite-c/">ä½¿ç”¨ç®€å•æœ¬åœ°ç¼“å­˜</a>
                    </li>
                  <li>
                       <a href="/component/cache/">ä½¿ç”¨å¤šçº§ç¼“å­˜</a>
                   </li>
                </ul>

                <h3>å…¶ä»–</h3>
                <ul>
                    <li><a href="/common/contact">è”ç³»</a></li>
                </ul>
            </menu>
            <article>
                <h1>åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</h1>
<h1>ğŸ”§ å®‰è£…</h1>
<h2>ç³»ç»Ÿè¦æ±‚</h2>
<ul>
<li>Java 8 åŠä»¥ä¸Šï¼ŒSpring 5.1 åŠä»¥ä¸Šï¼ŒMySQL 8 åŠä»¥ä¸Š</li>
<li>å‰ç«¯åŸºäº Vue2/iViewï¼Œè¦æ±‚æ”¯æŒ ECMAScript 6+ çš„æµè§ˆå™¨</li>
<li>è½»é‡çº§è®¾è®¡ï¼Œå¯¹ç³»ç»Ÿè¦æ±‚ä½ï¼Œå•æ ¸/512MB RAM å³å¯è¿è¡ŒæœåŠ¡</li>
</ul>
<hr>
<h2>ä¸‹è½½ä¸æºç </h2>
<p>åŒ…æ‹¬ä¾èµ–åŒ…åœ¨å†…çš„ JAR åŒ…çº¦ 300 å¤š KBã€‚</p>
<h3>Maven ä¾èµ–</h3>
<p><a href="https://search.maven.org/artifact/com.ajaxjs/ajaxjs-framework"><img src="https://img.shields.io/maven-central/v/com.ajaxjs/ajaxjs-framework?label=Latest%20Release" alt="æœ€æ–°ç‰ˆæœ¬"></a></p>
<pre><code class="language-xml">&lt;!-- AJ æ¡†æ¶ --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.ajaxjs&lt;/groupId&gt;
    &lt;artifactId&gt;ajaxjs-framework&lt;/artifactId&gt;
    &lt;version&gt;1.1.8&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>æºç ä¿¡æ¯</h3>
<p>æºç é‡‡ç”¨ Apache License Version 2.0ï¼Œå¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ã€‚</p>
<ul>
<li><a href="https://github.com/sp42/ajaxjs">GitHub ä»“åº“</a></li>
<li><a href="https://gitee.com/sp42_admin/ajaxjs">Gitee é•œåƒ</a></li>
</ul>
<h2>ä¾èµ–ä¸é¡¹ç›®ç»“æ„</h2>
<p>ä½ å¯ä»¥ç›´æ¥ä¾èµ– AJ çš„ Mavenï¼ˆå‚è§<a href="install.html">ã€Šå®‰è£…ã€‹</a>ï¼‰ï¼Œä¸è¿‡æ›´æ¨èé€šè¿‡çˆ¶ <code>pom.xml</code> ä¾èµ–æ–¹å¼æ•´åˆï¼ŒåŒ…å« MySQL é©±åŠ¨ã€Tomcatã€Spring ç­‰çš„ä¾èµ–ã€‚<br>
å¦‚ä¸‹æ˜¯ä¸€ä¸ª <code>pom.xml</code> çš„ä¾‹å­ï¼Œä½¿ç”¨äº† <code>aj-common-parent</code> çš„ <code>1.7</code> ç‰ˆæœ¬ã€‚æ•´ä¸ªå·¥ç¨‹çš„ç»“æ„è·Ÿæ™®é€šçš„ Spring Boot ä¸€æ ·ï¼Œéƒ½æ˜¯ <code>main()</code> å‡½æ•°å¯åŠ¨ã€‚ä½ éœ€è¦åœ¨èŠ‚ç‚¹ <code>project.mainClass</code> æŒ‡å®šé¡¹ç›®ä¸»ç±»è¿è¡Œå…¥å£ï¼Œä¹Ÿå°±æ˜¯ <code>main()</code> å‡½æ•°æ‰€åœ¨çš„ç±»ã€‚</p>
<h2>aj-common-parent å½“å‰æœ€æ–°ç‰ˆæœ¬</h2>
<p><a href="https://search.maven.org/artifact/com.ajaxjs/aj-common-parent"><img src="https://img.shields.io/maven-central/v/com.ajaxjs/aj-common-parent?label=Latest%20Release" alt="æœ€æ–°ç‰ˆæœ¬"></a></p>
<h3>ç¤ºä¾‹ pom.xml</h3>
<pre><code class="language-xml">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.ajaxjs&lt;/groupId&gt;
        &lt;artifactId&gt;aj-common-parent&lt;/artifactId&gt;
        &lt;version&gt;1.7&lt;/version&gt;
        &lt;relativePath/&gt;
    &lt;/parent&gt;
    &lt;artifactId&gt;aj-iam-server&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;description&gt;AJ-IAM Server&lt;/description&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;properties&gt;
        &lt;!-- è¿™é‡Œæ˜¯é¡¹ç›®ä¸»ç±»è¿è¡Œå…¥å£ --&gt;
        &lt;project.mainClass&gt;com.ajaxjs.iam.server.IamServerApp&lt;/project.mainClass&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- åŠ å…¥ä½ é¡¹ç›®çš„ä¾èµ– --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
            &lt;artifactId&gt;spring-data-redis&lt;/artifactId&gt;
            &lt;version&gt;2.6.10&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre>
<h1>é…ç½®</h1>
<p>åœ¨èµ„æºç›®å½•ä¸­å®‰æ’ <code>application.yml</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-yaml">server:
    port: 8888 # ç«¯å£å·
    context-path: /iam  # é¡¹ç›®åï¼Œå¦‚æœä¸è®¾å®šï¼Œé»˜è®¤æ˜¯ /
    localFileUpload: false # æ˜¯å¦æ”¯æŒæœ¬åœ°æ–‡ä»¶ä¸Šä¼ 
</code></pre>
<p>ä»£ç ç»“æ„æŒ‰ç…§æƒ¯å¸¸å¼€å‘çš„æ¨¡å¼å³å¯ã€‚å¿…é¡»è¦æœ‰å¯åŠ¨ç±»å’Œç›¸å…³çš„é…ç½®ç±»ã€‚</p>
<p><img src="/imgs/api/3.jpg" alt="é¡¹ç›®ç»“æ„å›¾"></p>
<p><code>main()</code> å‡½æ•°å†…çš„ <code>start()</code> å¿…é¡»ä¼ å…¥é…ç½®ç±»å‚æ•°ï¼›æŒ‡å®š <code>@ComponentScan</code> æ‰«æåŒ…çš„èŒƒå›´ã€‚</p>
<h3>å¯åŠ¨ç±»ç¤ºä¾‹</h3>
<pre><code class="language-java">import com.ajaxjs.embeded_tomcat.EmbeddedTomcatStarter;
import com.ajaxjs.framework.BaseWebMvcConfigure;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;

@Configuration
@EnableWebMvc
@ComponentScan({&quot;com.foo&quot;})
public class FooApplication extends BaseWebMvcConfigure {
    public static void main(String[] args) {
        EmbeddedTomcatStarter.start(FooApplication.class); // FooApplication æœ¬èº«ä¸ºé…ç½®ç±»
    }
}
</code></pre>
<h3>BaseApplication é…ç½®ç±»ç¤ºä¾‹</h3>
<pre><code class="language-java">import com.ajaxjs.data.jdbc_helper.JdbcConn;
import com.ajaxjs.data.jdbc_helper.JdbcWriter;
import com.ajaxjs.iam.resource_server.UserInterceptor;
import com.ajaxjs.util.logger.LogHelper;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;
import org.springframework.util.StringUtils;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.InterceptorRegistration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import javax.sql.DataSource;

/**
 * ç¨‹åºé…ç½®
 */
@Configuration
public class FooConfig implements WebMvcConfigurer {
    @Value(&quot;${db.url}&quot;)
    private String url;

    @Value(&quot;${db.user}&quot;)
    private String user;

    @Value(&quot;${db.psw}&quot;)
    private String psw;

    @Bean(value = &quot;dataSource&quot;, destroyMethod = &quot;close&quot;)
    DataSource getDs() {
        return JdbcConn.setupJdbcPool(&quot;com.mysql.cj.jdbc.Driver&quot;, url, user, psw);
    }
}
</code></pre>
<h2>éé…ç½®æ–‡ä»¶å¯åŠ¨</h2>
<p>å¦‚æœä½ ä¸é‡‡ç”¨ <code>application.yml</code> é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆä½¿ç”¨ Java é…ç½®äº¦å¯ã€‚</p>
<pre><code class="language-java">public static void main(String[] args) {
    TomcatConfig cfg = new TomcatConfig();
    cfg.setEnableJsp(true);
    cfg.setPort(8080);
    cfg.setContextPath(&quot;/bar&quot;);

    new EmbeddedTomcatStarter(cfg, new Class[]{FooApplication.class}).start();
}
</code></pre>
<h1>Profiles</h1>
<p>åœ¨å®é™…ä½¿ç”¨ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬åŒä¸€ä¸ªåº”ç”¨å¯èƒ½éœ€è¦åœ¨ä¸åŒç¯å¢ƒè¿è¡Œï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ï¼‰ï¼Œæ¯ä¸ªç¯å¢ƒçš„å‚æ•°éƒ½æœ‰å¯èƒ½ä¸åŒï¼ˆè¿æ¥å‚æ•°ã€æ—¥å¿—çº§åˆ«ç­‰ï¼‰ï¼Œä½¿ç”¨ profiles å¯ä»¥å°†ä¸åŒç¯å¢ƒä¸‹çš„å‚æ•°è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶æŒ‡å®šåŠ è½½ã€‚</p>
<h2>IDEA é…ç½®æ–¹å¼</h2>
<p>åœ¨ <code>src</code> ç›®å½•ä¸‹åˆ›å»º <code>profiles</code> ç›®å½•ï¼Œå®‰æ’å¦‚ä¸‹å›¾çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p><img src="../imgs/api/1.png" alt="Profiles é…ç½®ç›®å½•ç»“æ„"></p>
<p>è¦é€‰æ‹©å“ªä¸ª profileï¼Œåœ¨ IDEA é‡Œé¢é€‰ Maven Profile æ‰“å‹¾å³å¯ã€‚</p>
<p><img src="../imgs/api/2.png" alt="IDEA Maven Profile è®¾ç½®"></p>

            </article>
        </div>
        <footer>
             å¼€æºæ¡†æ¶ <a href="https://framework.ajaxjs.com" target="_blank">AJ-Framework</a> é¦–é¡µã€‚è”ç³»æ–¹å¼ï¼š
             frank@ajaxjs.comï¼Œ<a href="https://blog.csdn.net/zhangxin09" target="_blank">ä½œè€…åšå®¢</a>
             <br />
             <br />
             Copyright Â© 2025 Frank Cheung. All rights reserved.
         </footer>
    </body>
</html>